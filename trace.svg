<?xml version="1.0" encoding="utf-8" ?>
<svg xmlns:html="http://www.w3.org/1999/xhtml" baseProfile="full" height="760" style="background-color: #fdf6e3" version="1.1" width="1280" xmlns="http://www.w3.org/2000/svg" xmlns:ev="http://www.w3.org/2001/xml-events" xmlns:xlink="http://www.w3.org/1999/xlink"><defs><symbol id="full_view"><svg data-raw="{&quot;kind&quot;: &quot;SCOPE&quot;, &quot;name&quot;: &quot;BBO&quot;, &quot;event_id&quot;: 1, &quot;start_time_ms&quot;: 1684490827318, &quot;end_time_ms&quot;: 1684491386996, &quot;running&quot;: false, &quot;delta_frame_infos&quot;: [{&quot;module&quot;: &quot;blackboard_pagi.utils.tracer.wandb_integration&quot;, &quot;lineno&quot;: 93, &quot;function&quot;: &quot;wandb_tracer&quot;, &quot;code_context&quot;: null, &quot;index&quot;: null}], &quot;properties&quot;: {}, &quot;children&quot;: []}" id="1" width="99.5%" x="0.0%" y="0"><defs /><rect data-id="1" fill="#93a1a1" height="1.7em" id="1_box" onclick="handleClick(evt)" rx="2" ry="2" width="99.5%" x="2px" y="0" /><text clip-path="url(#1_clip)" fill="black" font-family="Arial" font-size="1em" pointer-events="none" x="4px" y="1.35em">BBO</text><svg data-raw="{&quot;kind&quot;: &quot;CHAIN&quot;, &quot;name&quot;: &quot;create_essay_topics&quot;, &quot;event_id&quot;: 2, &quot;start_time_ms&quot;: 1684490827463, &quot;end_time_ms&quot;: 1684490830934, &quot;running&quot;: false, &quot;delta_frame_infos&quot;: [{&quot;module&quot;: &quot;blackboard_pagi.prompt_optimizer.llm_function&quot;, &quot;lineno&quot;: 732, &quot;function&quot;: &quot;explicit&quot;, &quot;code_context&quot;: null, &quot;index&quot;: null}], &quot;properties&quot;: {&quot;arguments&quot;: {&quot;self&quot;: &quot;&lt;blackboard_pagi.prompt_optimizer.llm_function.LLMFunction object at 0x169e21fd0&gt;&quot;, &quot;language_model_or_chat_chain&quot;: {&quot;chat_model&quot;: {&quot;_type&quot;: &quot;ChatOpenAI&quot;}, &quot;messages&quot;: []}, &quot;kwargs&quot;: {&quot;domain&quot;: &quot;comedy&quot;, &quot;n&quot;: 2}}, &quot;result&quot;: [&quot;Why laughter is the best medicine&quot;, &quot;The role of humor in reducing stress and anxiety&quot;]}, &quot;children&quot;: []}" id="2" width="0.6109063693766773%" x="0.02577821533095816%" y="1.8em"><defs /><rect data-id="2" fill="#2aa198" height="1.7em" id="2_box" onclick="handleClick(evt)" rx="2" ry="2" width="99.5%" x="2px" y="0" /><text clip-path="url(#2_clip)" fill="black" font-family="Arial" font-size="1em" pointer-events="none" x="4px" y="1.35em">create_essay_topics</text><svg data-raw="{&quot;kind&quot;: &quot;CHAIN&quot;, &quot;name&quot;: &quot;LLMStructuredPrompt&quot;, &quot;event_id&quot;: 3, &quot;start_time_ms&quot;: 1684490827464, &quot;end_time_ms&quot;: 1684490830933, &quot;running&quot;: false, &quot;delta_frame_infos&quot;: [{&quot;module&quot;: &quot;blackboard_pagi.prompt_optimizer.llm_function&quot;, &quot;lineno&quot;: 758, &quot;function&quot;: &quot;__call__&quot;, &quot;code_context&quot;: null, &quot;index&quot;: null}, {&quot;module&quot;: &quot;blackboard_pagi.utils.tracer.trace_builder&quot;, &quot;lineno&quot;: 345, &quot;function&quot;: &quot;__call__&quot;, &quot;code_context&quot;: null, &quot;index&quot;: null}, {&quot;module&quot;: &quot;blackboard_pagi.prompt_optimizer.llm_function&quot;, &quot;lineno&quot;: 732, &quot;function&quot;: &quot;explicit&quot;, &quot;code_context&quot;: null, &quot;index&quot;: null}], &quot;properties&quot;: {&quot;arguments&quot;: {&quot;domain&quot;: &quot;comedy&quot;, &quot;n&quot;: 2}, &quot;result&quot;: [&quot;Why laughter is the best medicine&quot;, &quot;The role of humor in reducing stress and anxiety&quot;]}, &quot;children&quot;: []}" id="3" width="97.46375872947277%" x="0.02866609046384327%" y="1.8em"><defs /><rect data-id="3" fill="#2aa198" height="1.7em" id="3_box" onclick="handleClick(evt)" rx="2" ry="2" width="99.5%" x="2px" y="0" /><text clip-path="url(#3_clip)" fill="black" font-family="Arial" font-size="1em" pointer-events="none" x="4px" y="1.35em">LLMStructuredPrompt</text><svg data-raw="{&quot;kind&quot;: &quot;LLM&quot;, &quot;name&quot;: &quot;TrackedChatModel&quot;, &quot;event_id&quot;: 4, &quot;start_time_ms&quot;: 1684490827467, &quot;end_time_ms&quot;: 1684490830917, &quot;running&quot;: false, &quot;delta_frame_infos&quot;: [{&quot;module&quot;: &quot;blackboard_pagi.prompts.chat_chain&quot;, &quot;lineno&quot;: 35, &quot;function&quot;: &quot;query&quot;, &quot;code_context&quot;: null, &quot;index&quot;: null}, {&quot;module&quot;: &quot;blackboard_pagi.prompt_optimizer.llm_function&quot;, &quot;lineno&quot;: 455, &quot;function&quot;: &quot;query&quot;, &quot;code_context&quot;: null, &quot;index&quot;: null}, {&quot;module&quot;: &quot;blackboard_pagi.prompt_optimizer.track_hyperparameters&quot;, &quot;lineno&quot;: 328, &quot;function&quot;: &quot;__call__&quot;, &quot;code_context&quot;: null, &quot;index&quot;: null}, {&quot;module&quot;: &quot;blackboard_pagi.prompt_optimizer.llm_function&quot;, &quot;lineno&quot;: 377, &quot;function&quot;: &quot;__call__&quot;, &quot;code_context&quot;: null, &quot;index&quot;: null}, {&quot;module&quot;: &quot;blackboard_pagi.utils.tracer.trace_builder&quot;, &quot;lineno&quot;: 345, &quot;function&quot;: &quot;__call__&quot;, &quot;code_context&quot;: null, &quot;index&quot;: null}, {&quot;module&quot;: &quot;blackboard_pagi.prompt_optimizer.llm_function&quot;, &quot;lineno&quot;: 758, &quot;function&quot;: &quot;__call__&quot;, &quot;code_context&quot;: null, &quot;index&quot;: null}], &quot;properties&quot;: {&quot;arguments&quot;: {&quot;self&quot;: {&quot;_type&quot;: &quot;ChatOpenAI&quot;}, &quot;messages&quot;: [{&quot;content&quot;: &quot;Create a list of essay topics.\n\nThe input and output are formatted as a JSON interface that conforms to the JSON schemas below.\n\nAs an example, for the schema {\&quot;properties\&quot;: {\&quot;foo\&quot;: {\&quot;description\&quot;: \&quot;a list of strings\&quot;, \&quot;type\&quot;: \&quot;array\&quot;, \&quot;items\&quot;: {\&quot;type\&quot;: \&quot;string\&quot;}}}, \&quot;required\&quot;: [\&quot;foo\&quot;]}} the object {\&quot;foo\&quot;: [\&quot;bar\&quot;, \&quot;baz\&quot;]} is a well-formatted instance of the schema. The object {\&quot;properties\&quot;: {\&quot;foo\&quot;: [\&quot;bar\&quot;, \&quot;baz\&quot;]}} is not well-formatted.\n\nHere is the input schema:\n```\n{\n\&quot;properties\&quot;: {\n\&quot;domain\&quot;: {\n\&quot;description\&quot;: \&quot;The domain or general area of the essay topic\&quot;,\n\&quot;type\&quot;: \&quot;string\&quot;\n},\n\&quot;n\&quot;: {\n\&quot;description\&quot;: \&quot;Number of topics to generate\&quot;,\n\&quot;type\&quot;: \&quot;integer\&quot;\n}\n},\n\&quot;required\&quot;: [\n\&quot;domain\&quot;,\n\&quot;n\&quot;\n]\n}\n```\n\nHere is the output schema:\n```\n{\n\&quot;properties\&quot;: {\n\&quot;return_value\&quot;: {\n\&quot;type\&quot;: \&quot;array\&quot;,\n\&quot;items\&quot;: {\n\&quot;type\&quot;: \&quot;string\&quot;\n}\n}\n},\n\&quot;required\&quot;: [\n\&quot;return_value\&quot;\n]\n}\n```\nNow output the results for the following inputs:\n```\n{\n\&quot;domain\&quot;: \&quot;comedy\&quot;,\n\&quot;n\&quot;: 2\n}\n```&quot;, &quot;additional_kwargs&quot;: {}}]}, &quot;result&quot;: {&quot;content&quot;: &quot;{\n\&quot;return_value\&quot;: [\n\&quot;Why laughter is the best medicine\&quot;,\n\&quot;The role of humor in reducing stress and anxiety\&quot;\n]\n}&quot;, &quot;additional_kwargs&quot;: {}}}, &quot;children&quot;: []}" id="4" width="96.0159669140963%" x="0.08604785240703372%" y="1.8em"><defs /><rect data-id="4" fill="#268bd2" height="1.7em" id="4_box" onclick="handleClick(evt)" rx="2" ry="2" width="99.5%" x="2px" y="0" /><text clip-path="url(#4_clip)" fill="black" font-family="Arial" font-size="1em" pointer-events="none" x="4px" y="1.35em">TrackedChatModel</text></svg></svg></svg><svg data-raw="{&quot;kind&quot;: &quot;CHAIN&quot;, &quot;name&quot;: &quot;create_essay_topics&quot;, &quot;event_id&quot;: 5, &quot;start_time_ms&quot;: 1684490830940, &quot;end_time_ms&quot;: 1684490833785, &quot;running&quot;: false, &quot;delta_frame_infos&quot;: [{&quot;module&quot;: &quot;blackboard_pagi.prompt_optimizer.llm_function&quot;, &quot;lineno&quot;: 732, &quot;function&quot;: &quot;explicit&quot;, &quot;code_context&quot;: null, &quot;index&quot;: null}], &quot;properties&quot;: {&quot;arguments&quot;: {&quot;self&quot;: &quot;&lt;blackboard_pagi.prompt_optimizer.llm_function.LLMFunction object at 0x169e21fd0&gt;&quot;, &quot;language_model_or_chat_chain&quot;: {&quot;chat_model&quot;: {&quot;_type&quot;: &quot;ChatOpenAI&quot;}, &quot;messages&quot;: []}, &quot;kwargs&quot;: {&quot;domain&quot;: &quot;comedy&quot;, &quot;n&quot;: 2}}, &quot;result&quot;: [&quot;What makes a good comedy movie?&quot;, &quot;The evolution of comedy in modern culture&quot;]}, &quot;children&quot;: []}" id="5" width="0.5007284992442084%" x="0.6439220408877961%" y="1.8em"><defs /><rect data-id="5" fill="#2aa198" height="1.7em" id="5_box" onclick="handleClick(evt)" rx="2" ry="2" width="99.5%" x="2px" y="0" /><text clip-path="url(#5_clip)" fill="black" font-family="Arial" font-size="1em" pointer-events="none" x="4px" y="1.35em">create_essay_topics</text><svg data-raw="{&quot;kind&quot;: &quot;CHAIN&quot;, &quot;name&quot;: &quot;LLMStructuredPrompt&quot;, &quot;event_id&quot;: 6, &quot;start_time_ms&quot;: 1684490830941, &quot;end_time_ms&quot;: 1684490833784, &quot;running&quot;: false, &quot;delta_frame_infos&quot;: [{&quot;module&quot;: &quot;blackboard_pagi.prompt_optimizer.llm_function&quot;, &quot;lineno&quot;: 758, &quot;function&quot;: &quot;__call__&quot;, &quot;code_context&quot;: null, &quot;index&quot;: null}, {&quot;module&quot;: &quot;blackboard_pagi.utils.tracer.trace_builder&quot;, &quot;lineno&quot;: 345, &quot;function&quot;: &quot;__call__&quot;, &quot;code_context&quot;: null, &quot;index&quot;: null}, {&quot;module&quot;: &quot;blackboard_pagi.prompt_optimizer.llm_function&quot;, &quot;lineno&quot;: 732, &quot;function&quot;: &quot;explicit&quot;, &quot;code_context&quot;: null, &quot;index&quot;: null}], &quot;properties&quot;: {&quot;arguments&quot;: {&quot;domain&quot;: &quot;comedy&quot;, &quot;n&quot;: 2}, &quot;result&quot;: [&quot;What makes a good comedy movie?&quot;, &quot;The evolution of comedy in modern culture&quot;]}, &quot;children&quot;: []}" id="6" width="97.4513946748682%" x="0.03497363796133568%" y="1.8em"><defs /><rect data-id="6" fill="#2aa198" height="1.7em" id="6_box" onclick="handleClick(evt)" rx="2" ry="2" width="99.5%" x="2px" y="0" /><text clip-path="url(#6_clip)" fill="black" font-family="Arial" font-size="1em" pointer-events="none" x="4px" y="1.35em">LLMStructuredPrompt</text><svg data-raw="{&quot;kind&quot;: &quot;LLM&quot;, &quot;name&quot;: &quot;TrackedChatModel&quot;, &quot;event_id&quot;: 7, &quot;start_time_ms&quot;: 1684490830942, &quot;end_time_ms&quot;: 1684490833778, &quot;running&quot;: false, &quot;delta_frame_infos&quot;: [{&quot;module&quot;: &quot;blackboard_pagi.prompts.chat_chain&quot;, &quot;lineno&quot;: 35, &quot;function&quot;: &quot;query&quot;, &quot;code_context&quot;: null, &quot;index&quot;: null}, {&quot;module&quot;: &quot;blackboard_pagi.prompt_optimizer.llm_function&quot;, &quot;lineno&quot;: 455, &quot;function&quot;: &quot;query&quot;, &quot;code_context&quot;: null, &quot;index&quot;: null}, {&quot;module&quot;: &quot;blackboard_pagi.prompt_optimizer.track_hyperparameters&quot;, &quot;lineno&quot;: 328, &quot;function&quot;: &quot;__call__&quot;, &quot;code_context&quot;: null, &quot;index&quot;: null}, {&quot;module&quot;: &quot;blackboard_pagi.prompt_optimizer.llm_function&quot;, &quot;lineno&quot;: 377, &quot;function&quot;: &quot;__call__&quot;, &quot;code_context&quot;: null, &quot;index&quot;: null}, {&quot;module&quot;: &quot;blackboard_pagi.utils.tracer.trace_builder&quot;, &quot;lineno&quot;: 345, &quot;function&quot;: &quot;__call__&quot;, &quot;code_context&quot;: null, &quot;index&quot;: null}, {&quot;module&quot;: &quot;blackboard_pagi.prompt_optimizer.llm_function&quot;, &quot;lineno&quot;: 758, &quot;function&quot;: &quot;__call__&quot;, &quot;code_context&quot;: null, &quot;index&quot;: null}], &quot;properties&quot;: {&quot;arguments&quot;: {&quot;self&quot;: {&quot;_type&quot;: &quot;ChatOpenAI&quot;}, &quot;messages&quot;: [{&quot;content&quot;: &quot;Create a list of essay topics.\n\nThe input and output are formatted as a JSON interface that conforms to the JSON schemas below.\n\nAs an example, for the schema {\&quot;properties\&quot;: {\&quot;foo\&quot;: {\&quot;description\&quot;: \&quot;a list of strings\&quot;, \&quot;type\&quot;: \&quot;array\&quot;, \&quot;items\&quot;: {\&quot;type\&quot;: \&quot;string\&quot;}}}, \&quot;required\&quot;: [\&quot;foo\&quot;]}} the object {\&quot;foo\&quot;: [\&quot;bar\&quot;, \&quot;baz\&quot;]} is a well-formatted instance of the schema. The object {\&quot;properties\&quot;: {\&quot;foo\&quot;: [\&quot;bar\&quot;, \&quot;baz\&quot;]}} is not well-formatted.\n\nHere is the input schema:\n```\n{\n\&quot;properties\&quot;: {\n\&quot;domain\&quot;: {\n\&quot;description\&quot;: \&quot;The domain or general area of the essay topic\&quot;,\n\&quot;type\&quot;: \&quot;string\&quot;\n},\n\&quot;n\&quot;: {\n\&quot;description\&quot;: \&quot;Number of topics to generate\&quot;,\n\&quot;type\&quot;: \&quot;integer\&quot;\n}\n},\n\&quot;required\&quot;: [\n\&quot;domain\&quot;,\n\&quot;n\&quot;\n]\n}\n```\n\nHere is the output schema:\n```\n{\n\&quot;properties\&quot;: {\n\&quot;return_value\&quot;: {\n\&quot;type\&quot;: \&quot;array\&quot;,\n\&quot;items\&quot;: {\n\&quot;type\&quot;: \&quot;string\&quot;\n}\n}\n},\n\&quot;required\&quot;: [\n\&quot;return_value\&quot;\n]\n}\n```\nNow output the results for the following inputs:\n```\n{\n\&quot;domain\&quot;: \&quot;comedy\&quot;,\n\&quot;n\&quot;: 2\n}\n```&quot;, &quot;additional_kwargs&quot;: {}}]}, &quot;result&quot;: {&quot;content&quot;: &quot;{\n\&quot;return_value\&quot;: [\n\&quot;What makes a good comedy movie?\&quot;,\n\&quot;The evolution of comedy in modern culture\&quot;\n]\n}&quot;, &quot;additional_kwargs&quot;: {}}}, &quot;children&quot;: []}" id="7" width="96.30703919029195%" x="0.03499824129440732%" y="1.8em"><defs /><rect data-id="7" fill="#268bd2" height="1.7em" id="7_box" onclick="handleClick(evt)" rx="2" ry="2" width="99.5%" x="2px" y="0" /><text clip-path="url(#7_clip)" fill="black" font-family="Arial" font-size="1em" pointer-events="none" x="4px" y="1.35em">TrackedChatModel</text></svg></svg></svg><svg data-raw="{&quot;kind&quot;: &quot;CHAIN&quot;, &quot;name&quot;: &quot;reflect_on_task_run&quot;, &quot;event_id&quot;: 8, &quot;start_time_ms&quot;: 1684490833790, &quot;end_time_ms&quot;: 1684490863088, &quot;running&quot;: false, &quot;delta_frame_infos&quot;: [{&quot;module&quot;: &quot;blackboard_pagi.prompt_optimizer.track_hyperparameters&quot;, &quot;lineno&quot;: 325, &quot;function&quot;: &quot;__call__&quot;, &quot;code_context&quot;: null, &quot;index&quot;: null}], &quot;properties&quot;: {&quot;arguments&quot;: {&quot;self&quot;: &quot;&lt;blackboard_pagi.prompt_optimizer.llm_function.LLMFunction object at 0x169c74210&gt;&quot;, &quot;language_model_or_chat_chain&quot;: {&quot;chat_model&quot;: {&quot;_type&quot;: &quot;ChatOpenAI&quot;}, &quot;messages&quot;: []}, &quot;args&quot;: [{&quot;task_parameters&quot;: {&quot;domain&quot;: &quot;comedy&quot;, &quot;n&quot;: 2}, &quot;hyperparameters&quot;: {&quot;blackboard_pagi_prompt_optimizer_llm_function&quot;: {&quot;LLMStructuredPrompt_query&quot;: {&quot;json_dumps_kwargs&quot;: {&quot;indent&quot;: 0}, &quot;additional_definitions_prompt_template&quot;: &quot;Here is the schema for additional data types:\n```\n{additional_definitions}\n```\n\n&quot;, &quot;llm_structured_prompt_template&quot;: &quot;{docstring}\n\nThe input and output are formatted as a JSON interface that conforms to the JSON schemas below.\n\nAs an example, for the schema {{\&quot;properties\&quot;: {{\&quot;foo\&quot;: {{\&quot;description\&quot;: \&quot;a list of strings\&quot;, \&quot;type\&quot;: \&quot;array\&quot;, \&quot;items\&quot;: {{\&quot;type\&quot;: \&quot;string\&quot;}}}}}}, \&quot;required\&quot;: [\&quot;foo\&quot;]}}}} the object {{\&quot;foo\&quot;: [\&quot;bar\&quot;, \&quot;baz\&quot;]}} is a well-formatted instance of the schema. The object {{\&quot;properties\&quot;: {{\&quot;foo\&quot;: [\&quot;bar\&quot;, \&quot;baz\&quot;]}}}} is not well-formatted.\n\n{optional_additional_definitions_prompt}Here is the input schema:\n```\n{input_schema}\n```\n\nHere is the output schema:\n```\n{output_schema}\n```\nNow output the results for the following inputs:\n```\n{inputs}\n```&quot;, &quot;num_retries_on_parser_failure&quot;: 3}}}, &quot;all_chat_chains&quot;: [], &quot;return_value&quot;: [&quot;Why laughter is the best medicine&quot;, &quot;The role of humor in reducing stress and anxiety&quot;], &quot;exception&quot;: null}]}, &quot;result&quot;: {&quot;feedback&quot;: &quot;The generated essay topics are relevant to the comedy domain and satisfy the task description and task parameters. The content is appropriate and contains relevant information.&quot;, &quot;evaluation&quot;: &quot;The output is satisfying as it provides two essay topics related to the comedy domain. There is nothing wrong or missing in the output.&quot;, &quot;hyperparameter_suggestion&quot;: &quot;The current hyperparameters seem to be working well for this task. There is no immediate need to change them.&quot;, &quot;hyperparameter_missing&quot;: &quot;There are no missing hyperparameters that need to be added for this task, as the current hyperparameters are providing satisfactory results.&quot;}}, &quot;children&quot;: []}" id="8" width="5.156535525784468%" x="1.1505973077376634%" y="1.8em"><defs /><rect data-id="8" fill="#2aa198" height="1.7em" id="8_box" onclick="handleClick(evt)" rx="2" ry="2" width="99.5%" x="2px" y="0" /><text clip-path="url(#8_clip)" fill="black" font-family="Arial" font-size="1em" pointer-events="none" x="4px" y="1.35em">reflect_on_task_run</text><svg data-raw="{&quot;kind&quot;: &quot;CHAIN&quot;, &quot;name&quot;: &quot;LLMStructuredPrompt&quot;, &quot;event_id&quot;: 9, &quot;start_time_ms&quot;: 1684490833791, &quot;end_time_ms&quot;: 1684490863086, &quot;running&quot;: false, &quot;delta_frame_infos&quot;: [{&quot;module&quot;: &quot;blackboard_pagi.prompt_optimizer.llm_function&quot;, &quot;lineno&quot;: 758, &quot;function&quot;: &quot;__call__&quot;, &quot;code_context&quot;: null, &quot;index&quot;: null}, {&quot;module&quot;: &quot;blackboard_pagi.utils.tracer.trace_builder&quot;, &quot;lineno&quot;: 345, &quot;function&quot;: &quot;__call__&quot;, &quot;code_context&quot;: null, &quot;index&quot;: null}, {&quot;module&quot;: &quot;blackboard_pagi.prompt_optimizer.track_hyperparameters&quot;, &quot;lineno&quot;: 325, &quot;function&quot;: &quot;__call__&quot;, &quot;code_context&quot;: null, &quot;index&quot;: null}], &quot;properties&quot;: {&quot;arguments&quot;: {&quot;task_run&quot;: {&quot;task_parameters&quot;: {&quot;domain&quot;: &quot;comedy&quot;, &quot;n&quot;: 2}, &quot;hyperparameters&quot;: {&quot;blackboard_pagi_prompt_optimizer_llm_function&quot;: {&quot;LLMStructuredPrompt_query&quot;: {&quot;json_dumps_kwargs&quot;: {&quot;indent&quot;: 0}, &quot;additional_definitions_prompt_template&quot;: &quot;Here is the schema for additional data types:\n```\n{additional_definitions}\n```\n\n&quot;, &quot;llm_structured_prompt_template&quot;: &quot;{docstring}\n\nThe input and output are formatted as a JSON interface that conforms to the JSON schemas below.\n\nAs an example, for the schema {{\&quot;properties\&quot;: {{\&quot;foo\&quot;: {{\&quot;description\&quot;: \&quot;a list of strings\&quot;, \&quot;type\&quot;: \&quot;array\&quot;, \&quot;items\&quot;: {{\&quot;type\&quot;: \&quot;string\&quot;}}}}}}, \&quot;required\&quot;: [\&quot;foo\&quot;]}}}} the object {{\&quot;foo\&quot;: [\&quot;bar\&quot;, \&quot;baz\&quot;]}} is a well-formatted instance of the schema. The object {{\&quot;properties\&quot;: {{\&quot;foo\&quot;: [\&quot;bar\&quot;, \&quot;baz\&quot;]}}}} is not well-formatted.\n\n{optional_additional_definitions_prompt}Here is the input schema:\n```\n{input_schema}\n```\n\nHere is the output schema:\n```\n{output_schema}\n```\nNow output the results for the following inputs:\n```\n{inputs}\n```&quot;, &quot;num_retries_on_parser_failure&quot;: 3}}}, &quot;all_chat_chains&quot;: [], &quot;return_value&quot;: [&quot;Why laughter is the best medicine&quot;, &quot;The role of humor in reducing stress and anxiety&quot;], &quot;exception&quot;: null}}, &quot;result&quot;: {&quot;feedback&quot;: &quot;The generated essay topics are relevant to the comedy domain and satisfy the task description and task parameters. The content is appropriate and contains relevant information.&quot;, &quot;evaluation&quot;: &quot;The output is satisfying as it provides two essay topics related to the comedy domain. There is nothing wrong or missing in the output.&quot;, &quot;hyperparameter_suggestion&quot;: &quot;The current hyperparameters seem to be working well for this task. There is no immediate need to change them.&quot;, &quot;hyperparameter_missing&quot;: &quot;There are no missing hyperparameters that need to be added for this task, as the current hyperparameters are providing satisfactory results.&quot;}}, &quot;children&quot;: []}" id="9" width="97.50996434056933%" x="0.0033961362550344737%" y="1.8em"><defs /><rect data-id="9" fill="#2aa198" height="1.7em" id="9_box" onclick="handleClick(evt)" rx="2" ry="2" width="99.5%" x="2px" y="0" /><text clip-path="url(#9_clip)" fill="black" font-family="Arial" font-size="1em" pointer-events="none" x="4px" y="1.35em">LLMStructuredPrompt</text><svg data-raw="{&quot;kind&quot;: &quot;LLM&quot;, &quot;name&quot;: &quot;TrackedChatModel&quot;, &quot;event_id&quot;: 10, &quot;start_time_ms&quot;: 1684490833794, &quot;end_time_ms&quot;: 1684490863069, &quot;running&quot;: false, &quot;delta_frame_infos&quot;: [{&quot;module&quot;: &quot;blackboard_pagi.prompts.chat_chain&quot;, &quot;lineno&quot;: 35, &quot;function&quot;: &quot;query&quot;, &quot;code_context&quot;: null, &quot;index&quot;: null}, {&quot;module&quot;: &quot;blackboard_pagi.prompt_optimizer.llm_function&quot;, &quot;lineno&quot;: 455, &quot;function&quot;: &quot;query&quot;, &quot;code_context&quot;: null, &quot;index&quot;: null}, {&quot;module&quot;: &quot;blackboard_pagi.prompt_optimizer.track_hyperparameters&quot;, &quot;lineno&quot;: 325, &quot;function&quot;: &quot;__call__&quot;, &quot;code_context&quot;: null, &quot;index&quot;: null}, {&quot;module&quot;: &quot;blackboard_pagi.prompt_optimizer.llm_function&quot;, &quot;lineno&quot;: 377, &quot;function&quot;: &quot;__call__&quot;, &quot;code_context&quot;: null, &quot;index&quot;: null}, {&quot;module&quot;: &quot;blackboard_pagi.utils.tracer.trace_builder&quot;, &quot;lineno&quot;: 345, &quot;function&quot;: &quot;__call__&quot;, &quot;code_context&quot;: null, &quot;index&quot;: null}, {&quot;module&quot;: &quot;blackboard_pagi.prompt_optimizer.llm_function&quot;, &quot;lineno&quot;: 758, &quot;function&quot;: &quot;__call__&quot;, &quot;code_context&quot;: null, &quot;index&quot;: null}], &quot;properties&quot;: {&quot;arguments&quot;: {&quot;self&quot;: {&quot;_type&quot;: &quot;ChatOpenAI&quot;}, &quot;messages&quot;: [{&quot;content&quot;: &quot;Reflect on the results given the task parameters and hyperparameters.\n\nThis contains the lessons we learn from each task run to come up with better hyperparameters to try.\n\nThe input and output are formatted as a JSON interface that conforms to the JSON schemas below.\n\nAs an example, for the schema {\&quot;properties\&quot;: {\&quot;foo\&quot;: {\&quot;description\&quot;: \&quot;a list of strings\&quot;, \&quot;type\&quot;: \&quot;array\&quot;, \&quot;items\&quot;: {\&quot;type\&quot;: \&quot;string\&quot;}}}, \&quot;required\&quot;: [\&quot;foo\&quot;]}} the object {\&quot;foo\&quot;: [\&quot;bar\&quot;, \&quot;baz\&quot;]} is a well-formatted instance of the schema. The object {\&quot;properties\&quot;: {\&quot;foo\&quot;: [\&quot;bar\&quot;, \&quot;baz\&quot;]}} is not well-formatted.\n\nHere is the schema for additional data types:\n```\n{\n\&quot;CreateEssayTopicsInputs\&quot;: {\n\&quot;properties\&quot;: {\n\&quot;domain\&quot;: {\n\&quot;description\&quot;: \&quot;The domain or general area of the essay topic\&quot;,\n\&quot;type\&quot;: \&quot;string\&quot;\n},\n\&quot;n\&quot;: {\n\&quot;description\&quot;: \&quot;Number of topics to generate\&quot;,\n\&quot;type\&quot;: \&quot;integer\&quot;\n}\n},\n\&quot;required\&quot;: [\n\&quot;domain\&quot;,\n\&quot;n\&quot;\n]\n},\n\&quot;QueryHyperparameters\&quot;: {\n\&quot;properties\&quot;: {\n\&quot;json_dumps_kwargs\&quot;: {\n\&quot;default\&quot;: {\n\&quot;indent\&quot;: 0\n},\n\&quot;type\&quot;: \&quot;object\&quot;\n},\n\&quot;additional_definitions_prompt_template\&quot;: {\n\&quot;default\&quot;: \&quot;Here is the schema for additional data types:\\n```\\n{additional_definitions}\\n```\\n\\n\&quot;,\n\&quot;type\&quot;: \&quot;string\&quot;\n},\n\&quot;llm_structured_prompt_template\&quot;: {\n\&quot;description\&quot;: \&quot;The general-purpose prompt for the structured prompt execution. It tells the LLM what to do and how to read function arguments and structure return values. \&quot;,\n\&quot;default\&quot;: \&quot;{docstring}\\n\\nThe input and output are formatted as a JSON interface that conforms to the JSON schemas below.\\n\\nAs an example, for the schema {{\\\&quot;properties\\\&quot;: {{\\\&quot;foo\\\&quot;: {{\\\&quot;description\\\&quot;: \\\&quot;a list of strings\\\&quot;, \\\&quot;type\\\&quot;: \\\&quot;array\\\&quot;, \\\&quot;items\\\&quot;: {{\\\&quot;type\\\&quot;: \\\&quot;string\\\&quot;}}}}}}, \\\&quot;required\\\&quot;: [\\\&quot;foo\\\&quot;]}}}} the object {{\\\&quot;foo\\\&quot;: [\\\&quot;bar\\\&quot;, \\\&quot;baz\\\&quot;]}} is a well-formatted instance of the schema. The object {{\\\&quot;properties\\\&quot;: {{\\\&quot;foo\\\&quot;: [\\\&quot;bar\\\&quot;, \\\&quot;baz\\\&quot;]}}}} is not well-formatted.\\n\\n{optional_additional_definitions_prompt}Here is the input schema:\\n```\\n{input_schema}\\n```\\n\\nHere is the output schema:\\n```\\n{output_schema}\\n```\\nNow output the results for the following inputs:\\n```\\n{inputs}\\n```\&quot;,\n\&quot;type\&quot;: \&quot;string\&quot;\n},\n\&quot;num_retries_on_parser_failure\&quot;: {\n\&quot;default\&quot;: 3,\n\&quot;type\&quot;: \&quot;integer\&quot;\n}\n}\n},\n\&quot;blackboard_pagi_prompt_optimizer_llm_functionModule\&quot;: {\n\&quot;properties\&quot;: {\n\&quot;LLMStructuredPrompt_query\&quot;: {\n\&quot;default\&quot;: {\n\&quot;json_dumps_kwargs\&quot;: {\n\&quot;indent\&quot;: 0\n},\n\&quot;additional_definitions_prompt_template\&quot;: \&quot;Here is the schema for additional data types:\\n```\\n{additional_definitions}\\n```\\n\\n\&quot;,\n\&quot;llm_structured_prompt_template\&quot;: \&quot;{docstring}\\n\\nThe input and output are formatted as a JSON interface that conforms to the JSON schemas below.\\n\\nAs an example, for the schema {{\\\&quot;properties\\\&quot;: {{\\\&quot;foo\\\&quot;: {{\\\&quot;description\\\&quot;: \\\&quot;a list of strings\\\&quot;, \\\&quot;type\\\&quot;: \\\&quot;array\\\&quot;, \\\&quot;items\\\&quot;: {{\\\&quot;type\\\&quot;: \\\&quot;string\\\&quot;}}}}}}, \\\&quot;required\\\&quot;: [\\\&quot;foo\\\&quot;]}}}} the object {{\\\&quot;foo\\\&quot;: [\\\&quot;bar\\\&quot;, \\\&quot;baz\\\&quot;]}} is a well-formatted instance of the schema. The object {{\\\&quot;properties\\\&quot;: {{\\\&quot;foo\\\&quot;: [\\\&quot;bar\\\&quot;, \\\&quot;baz\\\&quot;]}}}} is not well-formatted.\\n\\n{optional_additional_definitions_prompt}Here is the input schema:\\n```\\n{input_schema}\\n```\\n\\nHere is the output schema:\\n```\\n{output_schema}\\n```\\nNow output the results for the following inputs:\\n```\\n{inputs}\\n```\&quot;,\n\&quot;num_retries_on_parser_failure\&quot;: 3\n},\n\&quot;allOf\&quot;: [\n{\n\&quot;$ref\&quot;: \&quot;#/definitions/QueryHyperparameters\&quot;\n}\n]\n}\n}\n},\n\&quot;Hyperparameters\&quot;: {\n\&quot;properties\&quot;: {\n\&quot;blackboard_pagi_prompt_optimizer_llm_function\&quot;: {\n\&quot;default\&quot;: {\n\&quot;LLMStructuredPrompt_query\&quot;: {\n\&quot;json_dumps_kwargs\&quot;: {\n\&quot;indent\&quot;: 0\n},\n\&quot;additional_definitions_prompt_template\&quot;: \&quot;Here is the schema for additional data types:\\n```\\n{additional_definitions}\\n```\\n\\n\&quot;,\n\&quot;llm_structured_prompt_template\&quot;: \&quot;{docstring}\\n\\nThe input and output are formatted as a JSON interface that conforms to the JSON schemas below.\\n\\nAs an example, for the schema {{\\\&quot;properties\\\&quot;: {{\\\&quot;foo\\\&quot;: {{\\\&quot;description\\\&quot;: \\\&quot;a list of strings\\\&quot;, \\\&quot;type\\\&quot;: \\\&quot;array\\\&quot;, \\\&quot;items\\\&quot;: {{\\\&quot;type\\\&quot;: \\\&quot;string\\\&quot;}}}}}}, \\\&quot;required\\\&quot;: [\\\&quot;foo\\\&quot;]}}}} the object {{\\\&quot;foo\\\&quot;: [\\\&quot;bar\\\&quot;, \\\&quot;baz\\\&quot;]}} is a well-formatted instance of the schema. The object {{\\\&quot;properties\\\&quot;: {{\\\&quot;foo\\\&quot;: [\\\&quot;bar\\\&quot;, \\\&quot;baz\\\&quot;]}}}} is not well-formatted.\\n\\n{optional_additional_definitions_prompt}Here is the input schema:\\n```\\n{input_schema}\\n```\\n\\nHere is the output schema:\\n```\\n{output_schema}\\n```\\nNow output the results for the following inputs:\\n```\\n{inputs}\\n```\&quot;,\n\&quot;num_retries_on_parser_failure\&quot;: 3\n}\n},\n\&quot;allOf\&quot;: [\n{\n\&quot;$ref\&quot;: \&quot;#/definitions/blackboard_pagi_prompt_optimizer_llm_functionModule\&quot;\n}\n]\n}\n}\n},\n\&quot;TaskRun_CreateEssayTopicsInputs__list_str___Hyperparameters_\&quot;: {\n\&quot;description\&quot;: \&quot;The task run. This is the 'data' we use to optimize the hyperparameters.\&quot;,\n\&quot;properties\&quot;: {\n\&quot;task_parameters\&quot;: {\n\&quot;description\&quot;: \&quot;The task parameters.\&quot;,\n\&quot;allOf\&quot;: [\n{\n\&quot;$ref\&quot;: \&quot;#/definitions/CreateEssayTopicsInputs\&quot;\n}\n]\n},\n\&quot;hyperparameters\&quot;: {\n\&quot;description\&quot;: \&quot;The hyperparameters used for the task. We optimize these.\&quot;,\n\&quot;allOf\&quot;: [\n{\n\&quot;$ref\&quot;: \&quot;#/definitions/Hyperparameters\&quot;\n}\n]\n},\n\&quot;all_chat_chains\&quot;: {\n\&quot;description\&quot;: \&quot;The chat chains from the task execution.\&quot;,\n\&quot;type\&quot;: \&quot;array\&quot;,\n\&quot;items\&quot;: {\n\&quot;type\&quot;: \&quot;object\&quot;\n}\n},\n\&quot;return_value\&quot;: {\n\&quot;description\&quot;: \&quot;The results of the task. (None for exceptions/failure.)\&quot;,\n\&quot;type\&quot;: \&quot;array\&quot;,\n\&quot;items\&quot;: {\n\&quot;type\&quot;: \&quot;string\&quot;\n}\n},\n\&quot;exception\&quot;: {\n\&quot;description\&quot;: \&quot;Exception that occurred during the task execution.\&quot;,\n\&quot;type\&quot;: \&quot;string\&quot;\n}\n},\n\&quot;required\&quot;: [\n\&quot;task_parameters\&quot;,\n\&quot;hyperparameters\&quot;,\n\&quot;all_chat_chains\&quot;,\n\&quot;return_value\&quot;,\n\&quot;exception\&quot;\n]\n},\n\&quot;TaskReflection\&quot;: {\n\&quot;description\&quot;: \&quot;The reflections on the task.\\n\\nThis contains the lessons we learn from each task run to come up with better hyperparameters to try.\&quot;,\n\&quot;properties\&quot;: {\n\&quot;feedback\&quot;: {\n\&quot;description\&quot;: \&quot;Only look at the final results field. Does its content satisfy the task description and task parameters? Does it contain all the relevant information from the all_chains and all_prompts fields? What could be improved in the results?\&quot;,\n\&quot;type\&quot;: \&quot;string\&quot;\n},\n\&quot;evaluation\&quot;: {\n\&quot;description\&quot;: \&quot;The evaluation of the outputs given the task. Is the output satisfying? What is wrong? What is missing?\&quot;,\n\&quot;type\&quot;: \&quot;string\&quot;\n},\n\&quot;hyperparameter_suggestion\&quot;: {\n\&quot;description\&quot;: \&quot;How we want to change the hyperparameters to improve the results. What could we try to change?\&quot;,\n\&quot;type\&quot;: \&quot;string\&quot;\n},\n\&quot;hyperparameter_missing\&quot;: {\n\&quot;description\&quot;: \&quot;What hyperparameters are missing to improve the results? What could be changed that is not exposed via hyperparameters?\&quot;,\n\&quot;type\&quot;: \&quot;string\&quot;\n}\n},\n\&quot;required\&quot;: [\n\&quot;feedback\&quot;,\n\&quot;evaluation\&quot;,\n\&quot;hyperparameter_suggestion\&quot;,\n\&quot;hyperparameter_missing\&quot;\n]\n}\n}\n```\n\nHere is the input schema:\n```\n{\n\&quot;properties\&quot;: {\n\&quot;task_run\&quot;: {\n\&quot;$ref\&quot;: \&quot;#/definitions/TaskRun_CreateEssayTopicsInputs__list_str___Hyperparameters_\&quot;\n}\n},\n\&quot;required\&quot;: [\n\&quot;task_run\&quot;\n]\n}\n```\n\nHere is the output schema:\n```\n{\n\&quot;properties\&quot;: {\n\&quot;return_value\&quot;: {\n\&quot;$ref\&quot;: \&quot;#/definitions/TaskReflection\&quot;\n}\n},\n\&quot;required\&quot;: [\n\&quot;return_value\&quot;\n]\n}\n```\nNow output the results for the following inputs:\n```\n{\n\&quot;task_run\&quot;: {\n\&quot;task_parameters\&quot;: {\n\&quot;domain\&quot;: \&quot;comedy\&quot;,\n\&quot;n\&quot;: 2\n},\n\&quot;hyperparameters\&quot;: {\n\&quot;blackboard_pagi_prompt_optimizer_llm_function\&quot;: {\n\&quot;LLMStructuredPrompt_query\&quot;: {\n\&quot;json_dumps_kwargs\&quot;: {\n\&quot;indent\&quot;: 0\n},\n\&quot;additional_definitions_prompt_template\&quot;: \&quot;Here is the schema for additional data types:\\n```\\n{additional_definitions}\\n```\\n\\n\&quot;,\n\&quot;llm_structured_prompt_template\&quot;: \&quot;{docstring}\\n\\nThe input and output are formatted as a JSON interface that conforms to the JSON schemas below.\\n\\nAs an example, for the schema {{\\\&quot;properties\\\&quot;: {{\\\&quot;foo\\\&quot;: {{\\\&quot;description\\\&quot;: \\\&quot;a list of strings\\\&quot;, \\\&quot;type\\\&quot;: \\\&quot;array\\\&quot;, \\\&quot;items\\\&quot;: {{\\\&quot;type\\\&quot;: \\\&quot;string\\\&quot;}}}}}}, \\\&quot;required\\\&quot;: [\\\&quot;foo\\\&quot;]}}}} the object {{\\\&quot;foo\\\&quot;: [\\\&quot;bar\\\&quot;, \\\&quot;baz\\\&quot;]}} is a well-formatted instance of the schema. The object {{\\\&quot;properties\\\&quot;: {{\\\&quot;foo\\\&quot;: [\\\&quot;bar\\\&quot;, \\\&quot;baz\\\&quot;]}}}} is not well-formatted.\\n\\n{optional_additional_definitions_prompt}Here is the input schema:\\n```\\n{input_schema}\\n```\\n\\nHere is the output schema:\\n```\\n{output_schema}\\n```\\nNow output the results for the following inputs:\\n```\\n{inputs}\\n```\&quot;,\n\&quot;num_retries_on_parser_failure\&quot;: 3\n}\n}\n},\n\&quot;all_chat_chains\&quot;: [],\n\&quot;return_value\&quot;: [\n\&quot;Why laughter is the best medicine\&quot;,\n\&quot;The role of humor in reducing stress and anxiety\&quot;\n],\n\&quot;exception\&quot;: null\n}\n}\n```&quot;, &quot;additional_kwargs&quot;: {}}]}, &quot;result&quot;: {&quot;content&quot;: &quot;{\n\&quot;return_value\&quot;: {\n\&quot;feedback\&quot;: \&quot;The generated essay topics are relevant to the comedy domain and satisfy the task description and task parameters. The content is appropriate and contains relevant information.\&quot;,\n\&quot;evaluation\&quot;: \&quot;The output is satisfying as it provides two essay topics related to the comedy domain. There is nothing wrong or missing in the output.\&quot;,\n\&quot;hyperparameter_suggestion\&quot;: \&quot;The current hyperparameters seem to be working well for this task. There is no immediate need to change them.\&quot;,\n\&quot;hyperparameter_missing\&quot;: \&quot;There are no missing hyperparameters that need to be added for this task, as the current hyperparameters are providing satisfactory results.\&quot;\n}\n}&quot;, &quot;additional_kwargs&quot;: {}}}, &quot;children&quot;: []}" id="10" width="96.47883839861751%" x="0.010189452124935995%" y="1.8em"><defs /><rect data-id="10" fill="#268bd2" height="1.7em" id="10_box" onclick="handleClick(evt)" rx="2" ry="2" width="99.5%" x="2px" y="0" /><text clip-path="url(#10_clip)" fill="black" font-family="Arial" font-size="1em" pointer-events="none" x="4px" y="1.35em">TrackedChatModel</text></svg></svg></svg><svg data-raw="{&quot;kind&quot;: &quot;CHAIN&quot;, &quot;name&quot;: &quot;reflect_on_task_run&quot;, &quot;event_id&quot;: 11, &quot;start_time_ms&quot;: 1684490863090, &quot;end_time_ms&quot;: 1684490887473, &quot;running&quot;: false, &quot;delta_frame_infos&quot;: [{&quot;module&quot;: &quot;blackboard_pagi.prompt_optimizer.track_hyperparameters&quot;, &quot;lineno&quot;: 325, &quot;function&quot;: &quot;__call__&quot;, &quot;code_context&quot;: null, &quot;index&quot;: null}], &quot;properties&quot;: {&quot;arguments&quot;: {&quot;self&quot;: &quot;&lt;blackboard_pagi.prompt_optimizer.llm_function.LLMFunction object at 0x169c74210&gt;&quot;, &quot;language_model_or_chat_chain&quot;: {&quot;chat_model&quot;: {&quot;_type&quot;: &quot;ChatOpenAI&quot;}, &quot;messages&quot;: []}, &quot;args&quot;: [{&quot;task_parameters&quot;: {&quot;domain&quot;: &quot;comedy&quot;, &quot;n&quot;: 2}, &quot;hyperparameters&quot;: {&quot;blackboard_pagi_prompt_optimizer_llm_function&quot;: {&quot;LLMStructuredPrompt_query&quot;: {&quot;json_dumps_kwargs&quot;: {&quot;indent&quot;: 0}, &quot;additional_definitions_prompt_template&quot;: &quot;Here is the schema for additional data types:\n```\n{additional_definitions}\n```\n\n&quot;, &quot;llm_structured_prompt_template&quot;: &quot;{docstring}\n\nThe input and output are formatted as a JSON interface that conforms to the JSON schemas below.\n\nAs an example, for the schema {{\&quot;properties\&quot;: {{\&quot;foo\&quot;: {{\&quot;description\&quot;: \&quot;a list of strings\&quot;, \&quot;type\&quot;: \&quot;array\&quot;, \&quot;items\&quot;: {{\&quot;type\&quot;: \&quot;string\&quot;}}}}}}, \&quot;required\&quot;: [\&quot;foo\&quot;]}}}} the object {{\&quot;foo\&quot;: [\&quot;bar\&quot;, \&quot;baz\&quot;]}} is a well-formatted instance of the schema. The object {{\&quot;properties\&quot;: {{\&quot;foo\&quot;: [\&quot;bar\&quot;, \&quot;baz\&quot;]}}}} is not well-formatted.\n\n{optional_additional_definitions_prompt}Here is the input schema:\n```\n{input_schema}\n```\n\nHere is the output schema:\n```\n{output_schema}\n```\nNow output the results for the following inputs:\n```\n{inputs}\n```&quot;, &quot;num_retries_on_parser_failure&quot;: 3}}}, &quot;all_chat_chains&quot;: [], &quot;return_value&quot;: [&quot;What makes a good comedy movie?&quot;, &quot;The evolution of comedy in modern culture&quot;], &quot;exception&quot;: null}]}, &quot;result&quot;: {&quot;feedback&quot;: &quot;The generated essay topics are relevant to the comedy domain and satisfy the task description and parameters. The content is appropriate and contains relevant information.&quot;, &quot;evaluation&quot;: &quot;The output is satisfying as it provides two essay topics related to the comedy domain. There is nothing wrong or missing in the output.&quot;, &quot;hyperparameter_suggestion&quot;: &quot;The current hyperparameters seem to be working well for this task. No changes are suggested at this time.&quot;, &quot;hyperparameter_missing&quot;: &quot;There are no missing hyperparameters that need to be added for this task, as the current hyperparameters are providing satisfactory results.&quot;}}, &quot;children&quot;: []}" id="11" width="4.291480842555898%" x="6.35957461254507%" y="1.8em"><defs /><rect data-id="11" fill="#2aa198" height="1.7em" id="11_box" onclick="handleClick(evt)" rx="2" ry="2" width="99.5%" x="2px" y="0" /><text clip-path="url(#11_clip)" fill="black" font-family="Arial" font-size="1em" pointer-events="none" x="4px" y="1.35em">reflect_on_task_run</text><svg data-raw="{&quot;kind&quot;: &quot;CHAIN&quot;, &quot;name&quot;: &quot;LLMStructuredPrompt&quot;, &quot;event_id&quot;: 12, &quot;start_time_ms&quot;: 1684490863092, &quot;end_time_ms&quot;: 1684490887471, &quot;running&quot;: false, &quot;delta_frame_infos&quot;: [{&quot;module&quot;: &quot;blackboard_pagi.prompt_optimizer.llm_function&quot;, &quot;lineno&quot;: 758, &quot;function&quot;: &quot;__call__&quot;, &quot;code_context&quot;: null, &quot;index&quot;: null}, {&quot;module&quot;: &quot;blackboard_pagi.utils.tracer.trace_builder&quot;, &quot;lineno&quot;: 345, &quot;function&quot;: &quot;__call__&quot;, &quot;code_context&quot;: null, &quot;index&quot;: null}, {&quot;module&quot;: &quot;blackboard_pagi.prompt_optimizer.track_hyperparameters&quot;, &quot;lineno&quot;: 325, &quot;function&quot;: &quot;__call__&quot;, &quot;code_context&quot;: null, &quot;index&quot;: null}], &quot;properties&quot;: {&quot;arguments&quot;: {&quot;task_run&quot;: {&quot;task_parameters&quot;: {&quot;domain&quot;: &quot;comedy&quot;, &quot;n&quot;: 2}, &quot;hyperparameters&quot;: {&quot;blackboard_pagi_prompt_optimizer_llm_function&quot;: {&quot;LLMStructuredPrompt_query&quot;: {&quot;json_dumps_kwargs&quot;: {&quot;indent&quot;: 0}, &quot;additional_definitions_prompt_template&quot;: &quot;Here is the schema for additional data types:\n```\n{additional_definitions}\n```\n\n&quot;, &quot;llm_structured_prompt_template&quot;: &quot;{docstring}\n\nThe input and output are formatted as a JSON interface that conforms to the JSON schemas below.\n\nAs an example, for the schema {{\&quot;properties\&quot;: {{\&quot;foo\&quot;: {{\&quot;description\&quot;: \&quot;a list of strings\&quot;, \&quot;type\&quot;: \&quot;array\&quot;, \&quot;items\&quot;: {{\&quot;type\&quot;: \&quot;string\&quot;}}}}}}, \&quot;required\&quot;: [\&quot;foo\&quot;]}}}} the object {{\&quot;foo\&quot;: [\&quot;bar\&quot;, \&quot;baz\&quot;]}} is a well-formatted instance of the schema. The object {{\&quot;properties\&quot;: {{\&quot;foo\&quot;: [\&quot;bar\&quot;, \&quot;baz\&quot;]}}}} is not well-formatted.\n\n{optional_additional_definitions_prompt}Here is the input schema:\n```\n{input_schema}\n```\n\nHere is the output schema:\n```\n{output_schema}\n```\nNow output the results for the following inputs:\n```\n{inputs}\n```&quot;, &quot;num_retries_on_parser_failure&quot;: 3}}}, &quot;all_chat_chains&quot;: [], &quot;return_value&quot;: [&quot;What makes a good comedy movie?&quot;, &quot;The evolution of comedy in modern culture&quot;], &quot;exception&quot;: null}}, &quot;result&quot;: {&quot;feedback&quot;: &quot;The generated essay topics are relevant to the comedy domain and satisfy the task description and parameters. The content is appropriate and contains relevant information.&quot;, &quot;evaluation&quot;: &quot;The output is satisfying as it provides two essay topics related to the comedy domain. There is nothing wrong or missing in the output.&quot;, &quot;hyperparameter_suggestion&quot;: &quot;The current hyperparameters seem to be working well for this task. No changes are suggested at this time.&quot;, &quot;hyperparameter_missing&quot;: &quot;There are no missing hyperparameters that need to be added for this task, as the current hyperparameters are providing satisfactory results.&quot;}}, &quot;children&quot;: []}" id="12" width="97.50395197678709%" x="0.008161423942911045%" y="1.8em"><defs /><rect data-id="12" fill="#2aa198" height="1.7em" id="12_box" onclick="handleClick(evt)" rx="2" ry="2" width="99.5%" x="2px" y="0" /><text clip-path="url(#12_clip)" fill="black" font-family="Arial" font-size="1em" pointer-events="none" x="4px" y="1.35em">LLMStructuredPrompt</text><svg data-raw="{&quot;kind&quot;: &quot;LLM&quot;, &quot;name&quot;: &quot;TrackedChatModel&quot;, &quot;event_id&quot;: 13, &quot;start_time_ms&quot;: 1684490863093, &quot;end_time_ms&quot;: 1684490887463, &quot;running&quot;: false, &quot;delta_frame_infos&quot;: [{&quot;module&quot;: &quot;blackboard_pagi.prompts.chat_chain&quot;, &quot;lineno&quot;: 35, &quot;function&quot;: &quot;query&quot;, &quot;code_context&quot;: null, &quot;index&quot;: null}, {&quot;module&quot;: &quot;blackboard_pagi.prompt_optimizer.llm_function&quot;, &quot;lineno&quot;: 455, &quot;function&quot;: &quot;query&quot;, &quot;code_context&quot;: null, &quot;index&quot;: null}, {&quot;module&quot;: &quot;blackboard_pagi.prompt_optimizer.track_hyperparameters&quot;, &quot;lineno&quot;: 325, &quot;function&quot;: &quot;__call__&quot;, &quot;code_context&quot;: null, &quot;index&quot;: null}, {&quot;module&quot;: &quot;blackboard_pagi.prompt_optimizer.llm_function&quot;, &quot;lineno&quot;: 377, &quot;function&quot;: &quot;__call__&quot;, &quot;code_context&quot;: null, &quot;index&quot;: null}, {&quot;module&quot;: &quot;blackboard_pagi.utils.tracer.trace_builder&quot;, &quot;lineno&quot;: 345, &quot;function&quot;: &quot;__call__&quot;, &quot;code_context&quot;: null, &quot;index&quot;: null}, {&quot;module&quot;: &quot;blackboard_pagi.prompt_optimizer.llm_function&quot;, &quot;lineno&quot;: 758, &quot;function&quot;: &quot;__call__&quot;, &quot;code_context&quot;: null, &quot;index&quot;: null}], &quot;properties&quot;: {&quot;arguments&quot;: {&quot;self&quot;: {&quot;_type&quot;: &quot;ChatOpenAI&quot;}, &quot;messages&quot;: [{&quot;content&quot;: &quot;Reflect on the results given the task parameters and hyperparameters.\n\nThis contains the lessons we learn from each task run to come up with better hyperparameters to try.\n\nThe input and output are formatted as a JSON interface that conforms to the JSON schemas below.\n\nAs an example, for the schema {\&quot;properties\&quot;: {\&quot;foo\&quot;: {\&quot;description\&quot;: \&quot;a list of strings\&quot;, \&quot;type\&quot;: \&quot;array\&quot;, \&quot;items\&quot;: {\&quot;type\&quot;: \&quot;string\&quot;}}}, \&quot;required\&quot;: [\&quot;foo\&quot;]}} the object {\&quot;foo\&quot;: [\&quot;bar\&quot;, \&quot;baz\&quot;]} is a well-formatted instance of the schema. The object {\&quot;properties\&quot;: {\&quot;foo\&quot;: [\&quot;bar\&quot;, \&quot;baz\&quot;]}} is not well-formatted.\n\nHere is the schema for additional data types:\n```\n{\n\&quot;CreateEssayTopicsInputs\&quot;: {\n\&quot;properties\&quot;: {\n\&quot;domain\&quot;: {\n\&quot;description\&quot;: \&quot;The domain or general area of the essay topic\&quot;,\n\&quot;type\&quot;: \&quot;string\&quot;\n},\n\&quot;n\&quot;: {\n\&quot;description\&quot;: \&quot;Number of topics to generate\&quot;,\n\&quot;type\&quot;: \&quot;integer\&quot;\n}\n},\n\&quot;required\&quot;: [\n\&quot;domain\&quot;,\n\&quot;n\&quot;\n]\n},\n\&quot;QueryHyperparameters\&quot;: {\n\&quot;properties\&quot;: {\n\&quot;json_dumps_kwargs\&quot;: {\n\&quot;default\&quot;: {\n\&quot;indent\&quot;: 0\n},\n\&quot;type\&quot;: \&quot;object\&quot;\n},\n\&quot;additional_definitions_prompt_template\&quot;: {\n\&quot;default\&quot;: \&quot;Here is the schema for additional data types:\\n```\\n{additional_definitions}\\n```\\n\\n\&quot;,\n\&quot;type\&quot;: \&quot;string\&quot;\n},\n\&quot;llm_structured_prompt_template\&quot;: {\n\&quot;description\&quot;: \&quot;The general-purpose prompt for the structured prompt execution. It tells the LLM what to do and how to read function arguments and structure return values. \&quot;,\n\&quot;default\&quot;: \&quot;{docstring}\\n\\nThe input and output are formatted as a JSON interface that conforms to the JSON schemas below.\\n\\nAs an example, for the schema {{\\\&quot;properties\\\&quot;: {{\\\&quot;foo\\\&quot;: {{\\\&quot;description\\\&quot;: \\\&quot;a list of strings\\\&quot;, \\\&quot;type\\\&quot;: \\\&quot;array\\\&quot;, \\\&quot;items\\\&quot;: {{\\\&quot;type\\\&quot;: \\\&quot;string\\\&quot;}}}}}}, \\\&quot;required\\\&quot;: [\\\&quot;foo\\\&quot;]}}}} the object {{\\\&quot;foo\\\&quot;: [\\\&quot;bar\\\&quot;, \\\&quot;baz\\\&quot;]}} is a well-formatted instance of the schema. The object {{\\\&quot;properties\\\&quot;: {{\\\&quot;foo\\\&quot;: [\\\&quot;bar\\\&quot;, \\\&quot;baz\\\&quot;]}}}} is not well-formatted.\\n\\n{optional_additional_definitions_prompt}Here is the input schema:\\n```\\n{input_schema}\\n```\\n\\nHere is the output schema:\\n```\\n{output_schema}\\n```\\nNow output the results for the following inputs:\\n```\\n{inputs}\\n```\&quot;,\n\&quot;type\&quot;: \&quot;string\&quot;\n},\n\&quot;num_retries_on_parser_failure\&quot;: {\n\&quot;default\&quot;: 3,\n\&quot;type\&quot;: \&quot;integer\&quot;\n}\n}\n},\n\&quot;blackboard_pagi_prompt_optimizer_llm_functionModule\&quot;: {\n\&quot;properties\&quot;: {\n\&quot;LLMStructuredPrompt_query\&quot;: {\n\&quot;default\&quot;: {\n\&quot;json_dumps_kwargs\&quot;: {\n\&quot;indent\&quot;: 0\n},\n\&quot;additional_definitions_prompt_template\&quot;: \&quot;Here is the schema for additional data types:\\n```\\n{additional_definitions}\\n```\\n\\n\&quot;,\n\&quot;llm_structured_prompt_template\&quot;: \&quot;{docstring}\\n\\nThe input and output are formatted as a JSON interface that conforms to the JSON schemas below.\\n\\nAs an example, for the schema {{\\\&quot;properties\\\&quot;: {{\\\&quot;foo\\\&quot;: {{\\\&quot;description\\\&quot;: \\\&quot;a list of strings\\\&quot;, \\\&quot;type\\\&quot;: \\\&quot;array\\\&quot;, \\\&quot;items\\\&quot;: {{\\\&quot;type\\\&quot;: \\\&quot;string\\\&quot;}}}}}}, \\\&quot;required\\\&quot;: [\\\&quot;foo\\\&quot;]}}}} the object {{\\\&quot;foo\\\&quot;: [\\\&quot;bar\\\&quot;, \\\&quot;baz\\\&quot;]}} is a well-formatted instance of the schema. The object {{\\\&quot;properties\\\&quot;: {{\\\&quot;foo\\\&quot;: [\\\&quot;bar\\\&quot;, \\\&quot;baz\\\&quot;]}}}} is not well-formatted.\\n\\n{optional_additional_definitions_prompt}Here is the input schema:\\n```\\n{input_schema}\\n```\\n\\nHere is the output schema:\\n```\\n{output_schema}\\n```\\nNow output the results for the following inputs:\\n```\\n{inputs}\\n```\&quot;,\n\&quot;num_retries_on_parser_failure\&quot;: 3\n},\n\&quot;allOf\&quot;: [\n{\n\&quot;$ref\&quot;: \&quot;#/definitions/QueryHyperparameters\&quot;\n}\n]\n}\n}\n},\n\&quot;Hyperparameters\&quot;: {\n\&quot;properties\&quot;: {\n\&quot;blackboard_pagi_prompt_optimizer_llm_function\&quot;: {\n\&quot;default\&quot;: {\n\&quot;LLMStructuredPrompt_query\&quot;: {\n\&quot;json_dumps_kwargs\&quot;: {\n\&quot;indent\&quot;: 0\n},\n\&quot;additional_definitions_prompt_template\&quot;: \&quot;Here is the schema for additional data types:\\n```\\n{additional_definitions}\\n```\\n\\n\&quot;,\n\&quot;llm_structured_prompt_template\&quot;: \&quot;{docstring}\\n\\nThe input and output are formatted as a JSON interface that conforms to the JSON schemas below.\\n\\nAs an example, for the schema {{\\\&quot;properties\\\&quot;: {{\\\&quot;foo\\\&quot;: {{\\\&quot;description\\\&quot;: \\\&quot;a list of strings\\\&quot;, \\\&quot;type\\\&quot;: \\\&quot;array\\\&quot;, \\\&quot;items\\\&quot;: {{\\\&quot;type\\\&quot;: \\\&quot;string\\\&quot;}}}}}}, \\\&quot;required\\\&quot;: [\\\&quot;foo\\\&quot;]}}}} the object {{\\\&quot;foo\\\&quot;: [\\\&quot;bar\\\&quot;, \\\&quot;baz\\\&quot;]}} is a well-formatted instance of the schema. The object {{\\\&quot;properties\\\&quot;: {{\\\&quot;foo\\\&quot;: [\\\&quot;bar\\\&quot;, \\\&quot;baz\\\&quot;]}}}} is not well-formatted.\\n\\n{optional_additional_definitions_prompt}Here is the input schema:\\n```\\n{input_schema}\\n```\\n\\nHere is the output schema:\\n```\\n{output_schema}\\n```\\nNow output the results for the following inputs:\\n```\\n{inputs}\\n```\&quot;,\n\&quot;num_retries_on_parser_failure\&quot;: 3\n}\n},\n\&quot;allOf\&quot;: [\n{\n\&quot;$ref\&quot;: \&quot;#/definitions/blackboard_pagi_prompt_optimizer_llm_functionModule\&quot;\n}\n]\n}\n}\n},\n\&quot;TaskRun_CreateEssayTopicsInputs__list_str___Hyperparameters_\&quot;: {\n\&quot;description\&quot;: \&quot;The task run. This is the 'data' we use to optimize the hyperparameters.\&quot;,\n\&quot;properties\&quot;: {\n\&quot;task_parameters\&quot;: {\n\&quot;description\&quot;: \&quot;The task parameters.\&quot;,\n\&quot;allOf\&quot;: [\n{\n\&quot;$ref\&quot;: \&quot;#/definitions/CreateEssayTopicsInputs\&quot;\n}\n]\n},\n\&quot;hyperparameters\&quot;: {\n\&quot;description\&quot;: \&quot;The hyperparameters used for the task. We optimize these.\&quot;,\n\&quot;allOf\&quot;: [\n{\n\&quot;$ref\&quot;: \&quot;#/definitions/Hyperparameters\&quot;\n}\n]\n},\n\&quot;all_chat_chains\&quot;: {\n\&quot;description\&quot;: \&quot;The chat chains from the task execution.\&quot;,\n\&quot;type\&quot;: \&quot;array\&quot;,\n\&quot;items\&quot;: {\n\&quot;type\&quot;: \&quot;object\&quot;\n}\n},\n\&quot;return_value\&quot;: {\n\&quot;description\&quot;: \&quot;The results of the task. (None for exceptions/failure.)\&quot;,\n\&quot;type\&quot;: \&quot;array\&quot;,\n\&quot;items\&quot;: {\n\&quot;type\&quot;: \&quot;string\&quot;\n}\n},\n\&quot;exception\&quot;: {\n\&quot;description\&quot;: \&quot;Exception that occurred during the task execution.\&quot;,\n\&quot;type\&quot;: \&quot;string\&quot;\n}\n},\n\&quot;required\&quot;: [\n\&quot;task_parameters\&quot;,\n\&quot;hyperparameters\&quot;,\n\&quot;all_chat_chains\&quot;,\n\&quot;return_value\&quot;,\n\&quot;exception\&quot;\n]\n},\n\&quot;TaskReflection\&quot;: {\n\&quot;description\&quot;: \&quot;The reflections on the task.\\n\\nThis contains the lessons we learn from each task run to come up with better hyperparameters to try.\&quot;,\n\&quot;properties\&quot;: {\n\&quot;feedback\&quot;: {\n\&quot;description\&quot;: \&quot;Only look at the final results field. Does its content satisfy the task description and task parameters? Does it contain all the relevant information from the all_chains and all_prompts fields? What could be improved in the results?\&quot;,\n\&quot;type\&quot;: \&quot;string\&quot;\n},\n\&quot;evaluation\&quot;: {\n\&quot;description\&quot;: \&quot;The evaluation of the outputs given the task. Is the output satisfying? What is wrong? What is missing?\&quot;,\n\&quot;type\&quot;: \&quot;string\&quot;\n},\n\&quot;hyperparameter_suggestion\&quot;: {\n\&quot;description\&quot;: \&quot;How we want to change the hyperparameters to improve the results. What could we try to change?\&quot;,\n\&quot;type\&quot;: \&quot;string\&quot;\n},\n\&quot;hyperparameter_missing\&quot;: {\n\&quot;description\&quot;: \&quot;What hyperparameters are missing to improve the results? What could be changed that is not exposed via hyperparameters?\&quot;,\n\&quot;type\&quot;: \&quot;string\&quot;\n}\n},\n\&quot;required\&quot;: [\n\&quot;feedback\&quot;,\n\&quot;evaluation\&quot;,\n\&quot;hyperparameter_suggestion\&quot;,\n\&quot;hyperparameter_missing\&quot;\n]\n}\n}\n```\n\nHere is the input schema:\n```\n{\n\&quot;properties\&quot;: {\n\&quot;task_run\&quot;: {\n\&quot;$ref\&quot;: \&quot;#/definitions/TaskRun_CreateEssayTopicsInputs__list_str___Hyperparameters_\&quot;\n}\n},\n\&quot;required\&quot;: [\n\&quot;task_run\&quot;\n]\n}\n```\n\nHere is the output schema:\n```\n{\n\&quot;properties\&quot;: {\n\&quot;return_value\&quot;: {\n\&quot;$ref\&quot;: \&quot;#/definitions/TaskReflection\&quot;\n}\n},\n\&quot;required\&quot;: [\n\&quot;return_value\&quot;\n]\n}\n```\nNow output the results for the following inputs:\n```\n{\n\&quot;task_run\&quot;: {\n\&quot;task_parameters\&quot;: {\n\&quot;domain\&quot;: \&quot;comedy\&quot;,\n\&quot;n\&quot;: 2\n},\n\&quot;hyperparameters\&quot;: {\n\&quot;blackboard_pagi_prompt_optimizer_llm_function\&quot;: {\n\&quot;LLMStructuredPrompt_query\&quot;: {\n\&quot;json_dumps_kwargs\&quot;: {\n\&quot;indent\&quot;: 0\n},\n\&quot;additional_definitions_prompt_template\&quot;: \&quot;Here is the schema for additional data types:\\n```\\n{additional_definitions}\\n```\\n\\n\&quot;,\n\&quot;llm_structured_prompt_template\&quot;: \&quot;{docstring}\\n\\nThe input and output are formatted as a JSON interface that conforms to the JSON schemas below.\\n\\nAs an example, for the schema {{\\\&quot;properties\\\&quot;: {{\\\&quot;foo\\\&quot;: {{\\\&quot;description\\\&quot;: \\\&quot;a list of strings\\\&quot;, \\\&quot;type\\\&quot;: \\\&quot;array\\\&quot;, \\\&quot;items\\\&quot;: {{\\\&quot;type\\\&quot;: \\\&quot;string\\\&quot;}}}}}}, \\\&quot;required\\\&quot;: [\\\&quot;foo\\\&quot;]}}}} the object {{\\\&quot;foo\\\&quot;: [\\\&quot;bar\\\&quot;, \\\&quot;baz\\\&quot;]}} is a well-formatted instance of the schema. The object {{\\\&quot;properties\\\&quot;: {{\\\&quot;foo\\\&quot;: [\\\&quot;bar\\\&quot;, \\\&quot;baz\\\&quot;]}}}} is not well-formatted.\\n\\n{optional_additional_definitions_prompt}Here is the input schema:\\n```\\n{input_schema}\\n```\\n\\nHere is the output schema:\\n```\\n{output_schema}\\n```\\nNow output the results for the following inputs:\\n```\\n{inputs}\\n```\&quot;,\n\&quot;num_retries_on_parser_failure\&quot;: 3\n}\n}\n},\n\&quot;all_chat_chains\&quot;: [],\n\&quot;return_value\&quot;: [\n\&quot;What makes a good comedy movie?\&quot;,\n\&quot;The evolution of comedy in modern culture\&quot;\n],\n\&quot;exception\&quot;: null\n}\n}\n```&quot;, &quot;additional_kwargs&quot;: {}}]}, &quot;result&quot;: {&quot;content&quot;: &quot;{\n\&quot;return_value\&quot;: {\n\&quot;feedback\&quot;: \&quot;The generated essay topics are relevant to the comedy domain and satisfy the task description and parameters. The content is appropriate and contains relevant information.\&quot;,\n\&quot;evaluation\&quot;: \&quot;The output is satisfying as it provides two essay topics related to the comedy domain. There is nothing wrong or missing in the output.\&quot;,\n\&quot;hyperparameter_suggestion\&quot;: \&quot;The current hyperparameters seem to be working well for this task. No changes are suggested at this time.\&quot;,\n\&quot;hyperparameter_missing\&quot;: \&quot;There are no missing hyperparameters that need to be added for this task, as the current hyperparameters are providing satisfactory results.\&quot;\n}\n}&quot;, &quot;additional_kwargs&quot;: {}}}, &quot;children&quot;: []}" id="13" width="96.50910905635999%" x="0.004081381516879282%" y="1.8em"><defs /><rect data-id="13" fill="#268bd2" height="1.7em" id="13_box" onclick="handleClick(evt)" rx="2" ry="2" width="99.5%" x="2px" y="0" /><text clip-path="url(#13_clip)" fill="black" font-family="Arial" font-size="1em" pointer-events="none" x="4px" y="1.35em">TrackedChatModel</text></svg></svg></svg><svg data-raw="{&quot;kind&quot;: &quot;CHAIN&quot;, &quot;name&quot;: &quot;suggest_next_optimization_step&quot;, &quot;event_id&quot;: 14, &quot;start_time_ms&quot;: 1684490887478, &quot;end_time_ms&quot;: 1684491026406, &quot;running&quot;: false, &quot;delta_frame_infos&quot;: [{&quot;module&quot;: &quot;blackboard_pagi.prompt_optimizer.track_hyperparameters&quot;, &quot;lineno&quot;: 325, &quot;function&quot;: &quot;__call__&quot;, &quot;code_context&quot;: null, &quot;index&quot;: null}], &quot;properties&quot;: {&quot;arguments&quot;: {&quot;self&quot;: &quot;&lt;blackboard_pagi.prompt_optimizer.llm_function.LLMFunction object at 0x169e21810&gt;&quot;, &quot;language_model_or_chat_chain&quot;: {&quot;chat_model&quot;: {&quot;_type&quot;: &quot;ChatOpenAI&quot;}, &quot;messages&quot;: []}, &quot;args&quot;: [{&quot;older_task_summary&quot;: null, &quot;task_infos&quot;: [{&quot;task_parameters&quot;: {&quot;domain&quot;: &quot;comedy&quot;, &quot;n&quot;: 2}, &quot;hyperparameters&quot;: {&quot;blackboard_pagi_prompt_optimizer_llm_function&quot;: {&quot;LLMStructuredPrompt_query&quot;: {&quot;json_dumps_kwargs&quot;: {&quot;indent&quot;: 0}, &quot;additional_definitions_prompt_template&quot;: &quot;Here is the schema for additional data types:\n```\n{additional_definitions}\n```\n\n&quot;, &quot;llm_structured_prompt_template&quot;: &quot;{docstring}\n\nThe input and output are formatted as a JSON interface that conforms to the JSON schemas below.\n\nAs an example, for the schema {{\&quot;properties\&quot;: {{\&quot;foo\&quot;: {{\&quot;description\&quot;: \&quot;a list of strings\&quot;, \&quot;type\&quot;: \&quot;array\&quot;, \&quot;items\&quot;: {{\&quot;type\&quot;: \&quot;string\&quot;}}}}}}, \&quot;required\&quot;: [\&quot;foo\&quot;]}}}} the object {{\&quot;foo\&quot;: [\&quot;bar\&quot;, \&quot;baz\&quot;]}} is a well-formatted instance of the schema. The object {{\&quot;properties\&quot;: {{\&quot;foo\&quot;: [\&quot;bar\&quot;, \&quot;baz\&quot;]}}}} is not well-formatted.\n\n{optional_additional_definitions_prompt}Here is the input schema:\n```\n{input_schema}\n```\n\nHere is the output schema:\n```\n{output_schema}\n```\nNow output the results for the following inputs:\n```\n{inputs}\n```&quot;, &quot;num_retries_on_parser_failure&quot;: 3}}}, &quot;reflection&quot;: {&quot;feedback&quot;: &quot;The generated essay topics are relevant to the comedy domain and satisfy the task description and task parameters. The content is appropriate and contains relevant information.&quot;, &quot;evaluation&quot;: &quot;The output is satisfying as it provides two essay topics related to the comedy domain. There is nothing wrong or missing in the output.&quot;, &quot;hyperparameter_suggestion&quot;: &quot;The current hyperparameters seem to be working well for this task. There is no immediate need to change them.&quot;, &quot;hyperparameter_missing&quot;: &quot;There are no missing hyperparameters that need to be added for this task, as the current hyperparameters are providing satisfactory results.&quot;}}, {&quot;task_parameters&quot;: {&quot;domain&quot;: &quot;comedy&quot;, &quot;n&quot;: 2}, &quot;hyperparameters&quot;: {&quot;blackboard_pagi_prompt_optimizer_llm_function&quot;: {&quot;LLMStructuredPrompt_query&quot;: {&quot;json_dumps_kwargs&quot;: {&quot;indent&quot;: 0}, &quot;additional_definitions_prompt_template&quot;: &quot;Here is the schema for additional data types:\n```\n{additional_definitions}\n```\n\n&quot;, &quot;llm_structured_prompt_template&quot;: &quot;{docstring}\n\nThe input and output are formatted as a JSON interface that conforms to the JSON schemas below.\n\nAs an example, for the schema {{\&quot;properties\&quot;: {{\&quot;foo\&quot;: {{\&quot;description\&quot;: \&quot;a list of strings\&quot;, \&quot;type\&quot;: \&quot;array\&quot;, \&quot;items\&quot;: {{\&quot;type\&quot;: \&quot;string\&quot;}}}}}}, \&quot;required\&quot;: [\&quot;foo\&quot;]}}}} the object {{\&quot;foo\&quot;: [\&quot;bar\&quot;, \&quot;baz\&quot;]}} is a well-formatted instance of the schema. The object {{\&quot;properties\&quot;: {{\&quot;foo\&quot;: [\&quot;bar\&quot;, \&quot;baz\&quot;]}}}} is not well-formatted.\n\n{optional_additional_definitions_prompt}Here is the input schema:\n```\n{input_schema}\n```\n\nHere is the output schema:\n```\n{output_schema}\n```\nNow output the results for the following inputs:\n```\n{inputs}\n```&quot;, &quot;num_retries_on_parser_failure&quot;: 3}}}, &quot;reflection&quot;: {&quot;feedback&quot;: &quot;The generated essay topics are relevant to the comedy domain and satisfy the task description and parameters. The content is appropriate and contains relevant information.&quot;, &quot;evaluation&quot;: &quot;The output is satisfying as it provides two essay topics related to the comedy domain. There is nothing wrong or missing in the output.&quot;, &quot;hyperparameter_suggestion&quot;: &quot;The current hyperparameters seem to be working well for this task. No changes are suggested at this time.&quot;, &quot;hyperparameter_missing&quot;: &quot;There are no missing hyperparameters that need to be added for this task, as the current hyperparameters are providing satisfactory results.&quot;}}], &quot;best_hyperparameters&quot;: {&quot;blackboard_pagi_prompt_optimizer_llm_function&quot;: {&quot;LLMStructuredPrompt_query&quot;: {&quot;json_dumps_kwargs&quot;: {&quot;indent&quot;: 0}, &quot;additional_definitions_prompt_template&quot;: &quot;Here is the schema for additional data types:\n```\n{additional_definitions}\n```\n\n&quot;, &quot;llm_structured_prompt_template&quot;: &quot;{docstring}\n\nThe input and output are formatted as a JSON interface that conforms to the JSON schemas below.\n\nAs an example, for the schema {{\&quot;properties\&quot;: {{\&quot;foo\&quot;: {{\&quot;description\&quot;: \&quot;a list of strings\&quot;, \&quot;type\&quot;: \&quot;array\&quot;, \&quot;items\&quot;: {{\&quot;type\&quot;: \&quot;string\&quot;}}}}}}, \&quot;required\&quot;: [\&quot;foo\&quot;]}}}} the object {{\&quot;foo\&quot;: [\&quot;bar\&quot;, \&quot;baz\&quot;]}} is a well-formatted instance of the schema. The object {{\&quot;properties\&quot;: {{\&quot;foo\&quot;: [\&quot;bar\&quot;, \&quot;baz\&quot;]}}}} is not well-formatted.\n\n{optional_additional_definitions_prompt}Here is the input schema:\n```\n{input_schema}\n```\n\nHere is the output schema:\n```\n{output_schema}\n```\nNow output the results for the following inputs:\n```\n{inputs}\n```&quot;, &quot;num_retries_on_parser_failure&quot;: 3}}}}]}, &quot;result&quot;: {&quot;best_hyperparameters&quot;: {&quot;blackboard_pagi_prompt_optimizer_llm_function&quot;: {&quot;LLMStructuredPrompt_query&quot;: {&quot;json_dumps_kwargs&quot;: {&quot;indent&quot;: 0}, &quot;additional_definitions_prompt_template&quot;: &quot;Here is the schema for additional data types:\n```\n{additional_definitions}\n```\n\n&quot;, &quot;llm_structured_prompt_template&quot;: &quot;{docstring}\n\nThe input and output are formatted as a JSON interface that conforms to the JSON schemas below.\n\nAs an example, for the schema {{\&quot;properties\&quot;: {{\&quot;foo\&quot;: {{\&quot;description\&quot;: \&quot;a list of strings\&quot;, \&quot;type\&quot;: \&quot;array\&quot;, \&quot;items\&quot;: {{\&quot;type\&quot;: \&quot;string\&quot;}}}}}}, \&quot;required\&quot;: [\&quot;foo\&quot;]}}}} the object {{\&quot;foo\&quot;: [\&quot;bar\&quot;, \&quot;baz\&quot;]}} is a well-formatted instance of the schema. The object {{\&quot;properties\&quot;: {{\&quot;foo\&quot;: [\&quot;bar\&quot;, \&quot;baz\&quot;]}}}} is not well-formatted.\n\n{optional_additional_definitions_prompt}Here is the input schema:\n```\n{input_schema}\n```\n\nHere is the output schema:\n```\n{output_schema}\n```\nNow output the results for the following inputs:\n```\n{inputs}\n```&quot;, &quot;num_retries_on_parser_failure&quot;: 3}}}, &quot;suggestion&quot;: &quot;The current hyperparameters seem to be working well for this task. No changes are suggested at this time. However, we can try different domains and number of topics to generate to further evaluate the performance.&quot;, &quot;task_parameters_suggestions&quot;: [{&quot;domain&quot;: &quot;history&quot;, &quot;n&quot;: 2}, {&quot;domain&quot;: &quot;technology&quot;, &quot;n&quot;: 3}], &quot;hyperparameter_suggestions&quot;: [{&quot;blackboard_pagi_prompt_optimizer_llm_function&quot;: {&quot;LLMStructuredPrompt_query&quot;: {&quot;json_dumps_kwargs&quot;: {&quot;indent&quot;: 0}, &quot;additional_definitions_prompt_template&quot;: &quot;Here is the schema for additional data types:\n```\n{additional_definitions}\n```\n\n&quot;, &quot;llm_structured_prompt_template&quot;: &quot;{docstring}\n\nThe input and output are formatted as a JSON interface that conforms to the JSON schemas below.\n\nAs an example, for the schema {{\&quot;properties\&quot;: {{\&quot;foo\&quot;: {{\&quot;description\&quot;: \&quot;a list of strings\&quot;, \&quot;type\&quot;: \&quot;array\&quot;, \&quot;items\&quot;: {{\&quot;type\&quot;: \&quot;string\&quot;}}}}}}, \&quot;required\&quot;: [\&quot;foo\&quot;]}}}} the object {{\&quot;foo\&quot;: [\&quot;bar\&quot;, \&quot;baz\&quot;]}} is a well-formatted instance of the schema. The object {{\&quot;properties\&quot;: {{\&quot;foo\&quot;: [\&quot;bar\&quot;, \&quot;baz\&quot;]}}}} is not well-formatted.\n\n{optional_additional_definitions_prompt}Here is the input schema:\n```\n{input_schema}\n```\n\nHere is the output schema:\n```\n{output_schema}\n```\nNow output the results for the following inputs:\n```\n{inputs}\n```&quot;, &quot;num_retries_on_parser_failure&quot;: 4}}}]}}, &quot;children&quot;: []}" id="14" width="24.451743037961112%" x="10.695292650416846%" y="1.8em"><defs /><rect data-id="14" fill="#2aa198" height="1.7em" id="14_box" onclick="handleClick(evt)" rx="2" ry="2" width="99.5%" x="2px" y="0" /><text clip-path="url(#14_clip)" fill="black" font-family="Arial" font-size="1em" pointer-events="none" x="4px" y="1.35em">suggest_next_optimization_step</text><svg data-raw="{&quot;kind&quot;: &quot;CHAIN&quot;, &quot;name&quot;: &quot;LLMStructuredPrompt&quot;, &quot;event_id&quot;: 15, &quot;start_time_ms&quot;: 1684490887479, &quot;end_time_ms&quot;: 1684491026403, &quot;running&quot;: false, &quot;delta_frame_infos&quot;: [{&quot;module&quot;: &quot;blackboard_pagi.prompt_optimizer.llm_function&quot;, &quot;lineno&quot;: 758, &quot;function&quot;: &quot;__call__&quot;, &quot;code_context&quot;: null, &quot;index&quot;: null}, {&quot;module&quot;: &quot;blackboard_pagi.utils.tracer.trace_builder&quot;, &quot;lineno&quot;: 345, &quot;function&quot;: &quot;__call__&quot;, &quot;code_context&quot;: null, &quot;index&quot;: null}, {&quot;module&quot;: &quot;blackboard_pagi.prompt_optimizer.track_hyperparameters&quot;, &quot;lineno&quot;: 325, &quot;function&quot;: &quot;__call__&quot;, &quot;code_context&quot;: null, &quot;index&quot;: null}], &quot;properties&quot;: {&quot;arguments&quot;: {&quot;optimization_info&quot;: {&quot;older_task_summary&quot;: null, &quot;task_infos&quot;: [{&quot;task_parameters&quot;: {&quot;domain&quot;: &quot;comedy&quot;, &quot;n&quot;: 2}, &quot;hyperparameters&quot;: {&quot;blackboard_pagi_prompt_optimizer_llm_function&quot;: {&quot;LLMStructuredPrompt_query&quot;: {&quot;json_dumps_kwargs&quot;: {&quot;indent&quot;: 0}, &quot;additional_definitions_prompt_template&quot;: &quot;Here is the schema for additional data types:\n```\n{additional_definitions}\n```\n\n&quot;, &quot;llm_structured_prompt_template&quot;: &quot;{docstring}\n\nThe input and output are formatted as a JSON interface that conforms to the JSON schemas below.\n\nAs an example, for the schema {{\&quot;properties\&quot;: {{\&quot;foo\&quot;: {{\&quot;description\&quot;: \&quot;a list of strings\&quot;, \&quot;type\&quot;: \&quot;array\&quot;, \&quot;items\&quot;: {{\&quot;type\&quot;: \&quot;string\&quot;}}}}}}, \&quot;required\&quot;: [\&quot;foo\&quot;]}}}} the object {{\&quot;foo\&quot;: [\&quot;bar\&quot;, \&quot;baz\&quot;]}} is a well-formatted instance of the schema. The object {{\&quot;properties\&quot;: {{\&quot;foo\&quot;: [\&quot;bar\&quot;, \&quot;baz\&quot;]}}}} is not well-formatted.\n\n{optional_additional_definitions_prompt}Here is the input schema:\n```\n{input_schema}\n```\n\nHere is the output schema:\n```\n{output_schema}\n```\nNow output the results for the following inputs:\n```\n{inputs}\n```&quot;, &quot;num_retries_on_parser_failure&quot;: 3}}}, &quot;reflection&quot;: {&quot;feedback&quot;: &quot;The generated essay topics are relevant to the comedy domain and satisfy the task description and task parameters. The content is appropriate and contains relevant information.&quot;, &quot;evaluation&quot;: &quot;The output is satisfying as it provides two essay topics related to the comedy domain. There is nothing wrong or missing in the output.&quot;, &quot;hyperparameter_suggestion&quot;: &quot;The current hyperparameters seem to be working well for this task. There is no immediate need to change them.&quot;, &quot;hyperparameter_missing&quot;: &quot;There are no missing hyperparameters that need to be added for this task, as the current hyperparameters are providing satisfactory results.&quot;}}, {&quot;task_parameters&quot;: {&quot;domain&quot;: &quot;comedy&quot;, &quot;n&quot;: 2}, &quot;hyperparameters&quot;: {&quot;blackboard_pagi_prompt_optimizer_llm_function&quot;: {&quot;LLMStructuredPrompt_query&quot;: {&quot;json_dumps_kwargs&quot;: {&quot;indent&quot;: 0}, &quot;additional_definitions_prompt_template&quot;: &quot;Here is the schema for additional data types:\n```\n{additional_definitions}\n```\n\n&quot;, &quot;llm_structured_prompt_template&quot;: &quot;{docstring}\n\nThe input and output are formatted as a JSON interface that conforms to the JSON schemas below.\n\nAs an example, for the schema {{\&quot;properties\&quot;: {{\&quot;foo\&quot;: {{\&quot;description\&quot;: \&quot;a list of strings\&quot;, \&quot;type\&quot;: \&quot;array\&quot;, \&quot;items\&quot;: {{\&quot;type\&quot;: \&quot;string\&quot;}}}}}}, \&quot;required\&quot;: [\&quot;foo\&quot;]}}}} the object {{\&quot;foo\&quot;: [\&quot;bar\&quot;, \&quot;baz\&quot;]}} is a well-formatted instance of the schema. The object {{\&quot;properties\&quot;: {{\&quot;foo\&quot;: [\&quot;bar\&quot;, \&quot;baz\&quot;]}}}} is not well-formatted.\n\n{optional_additional_definitions_prompt}Here is the input schema:\n```\n{input_schema}\n```\n\nHere is the output schema:\n```\n{output_schema}\n```\nNow output the results for the following inputs:\n```\n{inputs}\n```&quot;, &quot;num_retries_on_parser_failure&quot;: 3}}}, &quot;reflection&quot;: {&quot;feedback&quot;: &quot;The generated essay topics are relevant to the comedy domain and satisfy the task description and parameters. The content is appropriate and contains relevant information.&quot;, &quot;evaluation&quot;: &quot;The output is satisfying as it provides two essay topics related to the comedy domain. There is nothing wrong or missing in the output.&quot;, &quot;hyperparameter_suggestion&quot;: &quot;The current hyperparameters seem to be working well for this task. No changes are suggested at this time.&quot;, &quot;hyperparameter_missing&quot;: &quot;There are no missing hyperparameters that need to be added for this task, as the current hyperparameters are providing satisfactory results.&quot;}}], &quot;best_hyperparameters&quot;: {&quot;blackboard_pagi_prompt_optimizer_llm_function&quot;: {&quot;LLMStructuredPrompt_query&quot;: {&quot;json_dumps_kwargs&quot;: {&quot;indent&quot;: 0}, &quot;additional_definitions_prompt_template&quot;: &quot;Here is the schema for additional data types:\n```\n{additional_definitions}\n```\n\n&quot;, &quot;llm_structured_prompt_template&quot;: &quot;{docstring}\n\nThe input and output are formatted as a JSON interface that conforms to the JSON schemas below.\n\nAs an example, for the schema {{\&quot;properties\&quot;: {{\&quot;foo\&quot;: {{\&quot;description\&quot;: \&quot;a list of strings\&quot;, \&quot;type\&quot;: \&quot;array\&quot;, \&quot;items\&quot;: {{\&quot;type\&quot;: \&quot;string\&quot;}}}}}}, \&quot;required\&quot;: [\&quot;foo\&quot;]}}}} the object {{\&quot;foo\&quot;: [\&quot;bar\&quot;, \&quot;baz\&quot;]}} is a well-formatted instance of the schema. The object {{\&quot;properties\&quot;: {{\&quot;foo\&quot;: [\&quot;bar\&quot;, \&quot;baz\&quot;]}}}} is not well-formatted.\n\n{optional_additional_definitions_prompt}Here is the input schema:\n```\n{input_schema}\n```\n\nHere is the output schema:\n```\n{output_schema}\n```\nNow output the results for the following inputs:\n```\n{inputs}\n```&quot;, &quot;num_retries_on_parser_failure&quot;: 3}}}}}, &quot;result&quot;: {&quot;best_hyperparameters&quot;: {&quot;blackboard_pagi_prompt_optimizer_llm_function&quot;: {&quot;LLMStructuredPrompt_query&quot;: {&quot;json_dumps_kwargs&quot;: {&quot;indent&quot;: 0}, &quot;additional_definitions_prompt_template&quot;: &quot;Here is the schema for additional data types:\n```\n{additional_definitions}\n```\n\n&quot;, &quot;llm_structured_prompt_template&quot;: &quot;{docstring}\n\nThe input and output are formatted as a JSON interface that conforms to the JSON schemas below.\n\nAs an example, for the schema {{\&quot;properties\&quot;: {{\&quot;foo\&quot;: {{\&quot;description\&quot;: \&quot;a list of strings\&quot;, \&quot;type\&quot;: \&quot;array\&quot;, \&quot;items\&quot;: {{\&quot;type\&quot;: \&quot;string\&quot;}}}}}}, \&quot;required\&quot;: [\&quot;foo\&quot;]}}}} the object {{\&quot;foo\&quot;: [\&quot;bar\&quot;, \&quot;baz\&quot;]}} is a well-formatted instance of the schema. The object {{\&quot;properties\&quot;: {{\&quot;foo\&quot;: [\&quot;bar\&quot;, \&quot;baz\&quot;]}}}} is not well-formatted.\n\n{optional_additional_definitions_prompt}Here is the input schema:\n```\n{input_schema}\n```\n\nHere is the output schema:\n```\n{output_schema}\n```\nNow output the results for the following inputs:\n```\n{inputs}\n```&quot;, &quot;num_retries_on_parser_failure&quot;: 3}}}, &quot;suggestion&quot;: &quot;The current hyperparameters seem to be working well for this task. No changes are suggested at this time. However, we can try different domains and number of topics to generate to further evaluate the performance.&quot;, &quot;task_parameters_suggestions&quot;: [{&quot;domain&quot;: &quot;history&quot;, &quot;n&quot;: 2}, {&quot;domain&quot;: &quot;technology&quot;, &quot;n&quot;: 3}], &quot;hyperparameter_suggestions&quot;: [{&quot;blackboard_pagi_prompt_optimizer_llm_function&quot;: {&quot;LLMStructuredPrompt_query&quot;: {&quot;json_dumps_kwargs&quot;: {&quot;indent&quot;: 0}, &quot;additional_definitions_prompt_template&quot;: &quot;Here is the schema for additional data types:\n```\n{additional_definitions}\n```\n\n&quot;, &quot;llm_structured_prompt_template&quot;: &quot;{docstring}\n\nThe input and output are formatted as a JSON interface that conforms to the JSON schemas below.\n\nAs an example, for the schema {{\&quot;properties\&quot;: {{\&quot;foo\&quot;: {{\&quot;description\&quot;: \&quot;a list of strings\&quot;, \&quot;type\&quot;: \&quot;array\&quot;, \&quot;items\&quot;: {{\&quot;type\&quot;: \&quot;string\&quot;}}}}}}, \&quot;required\&quot;: [\&quot;foo\&quot;]}}}} the object {{\&quot;foo\&quot;: [\&quot;bar\&quot;, \&quot;baz\&quot;]}} is a well-formatted instance of the schema. The object {{\&quot;properties\&quot;: {{\&quot;foo\&quot;: [\&quot;bar\&quot;, \&quot;baz\&quot;]}}}} is not well-formatted.\n\n{optional_additional_definitions_prompt}Here is the input schema:\n```\n{input_schema}\n```\n\nHere is the output schema:\n```\n{output_schema}\n```\nNow output the results for the following inputs:\n```\n{inputs}\n```&quot;, &quot;num_retries_on_parser_failure&quot;: 4}}}]}}, &quot;children&quot;: []}" id="15" width="97.51714221611194%" x="0.0007161983185534954%" y="1.8em"><defs /><rect data-id="15" fill="#2aa198" height="1.7em" id="15_box" onclick="handleClick(evt)" rx="2" ry="2" width="99.5%" x="2px" y="0" /><text clip-path="url(#15_clip)" fill="black" font-family="Arial" font-size="1em" pointer-events="none" x="4px" y="1.35em">LLMStructuredPrompt</text><svg data-raw="{&quot;kind&quot;: &quot;LLM&quot;, &quot;name&quot;: &quot;TrackedChatModel&quot;, &quot;event_id&quot;: 16, &quot;start_time_ms&quot;: 1684490887481, &quot;end_time_ms&quot;: 1684491026329, &quot;running&quot;: false, &quot;delta_frame_infos&quot;: [{&quot;module&quot;: &quot;blackboard_pagi.prompts.chat_chain&quot;, &quot;lineno&quot;: 35, &quot;function&quot;: &quot;query&quot;, &quot;code_context&quot;: null, &quot;index&quot;: null}, {&quot;module&quot;: &quot;blackboard_pagi.prompt_optimizer.llm_function&quot;, &quot;lineno&quot;: 455, &quot;function&quot;: &quot;query&quot;, &quot;code_context&quot;: null, &quot;index&quot;: null}, {&quot;module&quot;: &quot;blackboard_pagi.prompt_optimizer.track_hyperparameters&quot;, &quot;lineno&quot;: 325, &quot;function&quot;: &quot;__call__&quot;, &quot;code_context&quot;: null, &quot;index&quot;: null}, {&quot;module&quot;: &quot;blackboard_pagi.prompt_optimizer.llm_function&quot;, &quot;lineno&quot;: 377, &quot;function&quot;: &quot;__call__&quot;, &quot;code_context&quot;: null, &quot;index&quot;: null}, {&quot;module&quot;: &quot;blackboard_pagi.utils.tracer.trace_builder&quot;, &quot;lineno&quot;: 345, &quot;function&quot;: &quot;__call__&quot;, &quot;code_context&quot;: null, &quot;index&quot;: null}, {&quot;module&quot;: &quot;blackboard_pagi.prompt_optimizer.llm_function&quot;, &quot;lineno&quot;: 758, &quot;function&quot;: &quot;__call__&quot;, &quot;code_context&quot;: null, &quot;index&quot;: null}], &quot;properties&quot;: {&quot;arguments&quot;: {&quot;self&quot;: {&quot;_type&quot;: &quot;ChatOpenAI&quot;}, &quot;messages&quot;: [{&quot;content&quot;: &quot;Suggest the next optimization step.\n\nThe input and output are formatted as a JSON interface that conforms to the JSON schemas below.\n\nAs an example, for the schema {\&quot;properties\&quot;: {\&quot;foo\&quot;: {\&quot;description\&quot;: \&quot;a list of strings\&quot;, \&quot;type\&quot;: \&quot;array\&quot;, \&quot;items\&quot;: {\&quot;type\&quot;: \&quot;string\&quot;}}}, \&quot;required\&quot;: [\&quot;foo\&quot;]}} the object {\&quot;foo\&quot;: [\&quot;bar\&quot;, \&quot;baz\&quot;]} is a well-formatted instance of the schema. The object {\&quot;properties\&quot;: {\&quot;foo\&quot;: [\&quot;bar\&quot;, \&quot;baz\&quot;]}} is not well-formatted.\n\nHere is the schema for additional data types:\n```\n{\n\&quot;CreateEssayTopicsInputs\&quot;: {\n\&quot;properties\&quot;: {\n\&quot;domain\&quot;: {\n\&quot;description\&quot;: \&quot;The domain or general area of the essay topic\&quot;,\n\&quot;type\&quot;: \&quot;string\&quot;\n},\n\&quot;n\&quot;: {\n\&quot;description\&quot;: \&quot;Number of topics to generate\&quot;,\n\&quot;type\&quot;: \&quot;integer\&quot;\n}\n},\n\&quot;required\&quot;: [\n\&quot;domain\&quot;,\n\&quot;n\&quot;\n]\n},\n\&quot;QueryHyperparameters\&quot;: {\n\&quot;properties\&quot;: {\n\&quot;json_dumps_kwargs\&quot;: {\n\&quot;default\&quot;: {\n\&quot;indent\&quot;: 0\n},\n\&quot;type\&quot;: \&quot;object\&quot;\n},\n\&quot;additional_definitions_prompt_template\&quot;: {\n\&quot;default\&quot;: \&quot;Here is the schema for additional data types:\\n```\\n{additional_definitions}\\n```\\n\\n\&quot;,\n\&quot;type\&quot;: \&quot;string\&quot;\n},\n\&quot;llm_structured_prompt_template\&quot;: {\n\&quot;description\&quot;: \&quot;The general-purpose prompt for the structured prompt execution. It tells the LLM what to do and how to read function arguments and structure return values. \&quot;,\n\&quot;default\&quot;: \&quot;{docstring}\\n\\nThe input and output are formatted as a JSON interface that conforms to the JSON schemas below.\\n\\nAs an example, for the schema {{\\\&quot;properties\\\&quot;: {{\\\&quot;foo\\\&quot;: {{\\\&quot;description\\\&quot;: \\\&quot;a list of strings\\\&quot;, \\\&quot;type\\\&quot;: \\\&quot;array\\\&quot;, \\\&quot;items\\\&quot;: {{\\\&quot;type\\\&quot;: \\\&quot;string\\\&quot;}}}}}}, \\\&quot;required\\\&quot;: [\\\&quot;foo\\\&quot;]}}}} the object {{\\\&quot;foo\\\&quot;: [\\\&quot;bar\\\&quot;, \\\&quot;baz\\\&quot;]}} is a well-formatted instance of the schema. The object {{\\\&quot;properties\\\&quot;: {{\\\&quot;foo\\\&quot;: [\\\&quot;bar\\\&quot;, \\\&quot;baz\\\&quot;]}}}} is not well-formatted.\\n\\n{optional_additional_definitions_prompt}Here is the input schema:\\n```\\n{input_schema}\\n```\\n\\nHere is the output schema:\\n```\\n{output_schema}\\n```\\nNow output the results for the following inputs:\\n```\\n{inputs}\\n```\&quot;,\n\&quot;type\&quot;: \&quot;string\&quot;\n},\n\&quot;num_retries_on_parser_failure\&quot;: {\n\&quot;default\&quot;: 3,\n\&quot;type\&quot;: \&quot;integer\&quot;\n}\n}\n},\n\&quot;blackboard_pagi_prompt_optimizer_llm_functionModule\&quot;: {\n\&quot;properties\&quot;: {\n\&quot;LLMStructuredPrompt_query\&quot;: {\n\&quot;default\&quot;: {\n\&quot;json_dumps_kwargs\&quot;: {\n\&quot;indent\&quot;: 0\n},\n\&quot;additional_definitions_prompt_template\&quot;: \&quot;Here is the schema for additional data types:\\n```\\n{additional_definitions}\\n```\\n\\n\&quot;,\n\&quot;llm_structured_prompt_template\&quot;: \&quot;{docstring}\\n\\nThe input and output are formatted as a JSON interface that conforms to the JSON schemas below.\\n\\nAs an example, for the schema {{\\\&quot;properties\\\&quot;: {{\\\&quot;foo\\\&quot;: {{\\\&quot;description\\\&quot;: \\\&quot;a list of strings\\\&quot;, \\\&quot;type\\\&quot;: \\\&quot;array\\\&quot;, \\\&quot;items\\\&quot;: {{\\\&quot;type\\\&quot;: \\\&quot;string\\\&quot;}}}}}}, \\\&quot;required\\\&quot;: [\\\&quot;foo\\\&quot;]}}}} the object {{\\\&quot;foo\\\&quot;: [\\\&quot;bar\\\&quot;, \\\&quot;baz\\\&quot;]}} is a well-formatted instance of the schema. The object {{\\\&quot;properties\\\&quot;: {{\\\&quot;foo\\\&quot;: [\\\&quot;bar\\\&quot;, \\\&quot;baz\\\&quot;]}}}} is not well-formatted.\\n\\n{optional_additional_definitions_prompt}Here is the input schema:\\n```\\n{input_schema}\\n```\\n\\nHere is the output schema:\\n```\\n{output_schema}\\n```\\nNow output the results for the following inputs:\\n```\\n{inputs}\\n```\&quot;,\n\&quot;num_retries_on_parser_failure\&quot;: 3\n},\n\&quot;allOf\&quot;: [\n{\n\&quot;$ref\&quot;: \&quot;#/definitions/QueryHyperparameters\&quot;\n}\n]\n}\n}\n},\n\&quot;Hyperparameters\&quot;: {\n\&quot;properties\&quot;: {\n\&quot;blackboard_pagi_prompt_optimizer_llm_function\&quot;: {\n\&quot;default\&quot;: {\n\&quot;LLMStructuredPrompt_query\&quot;: {\n\&quot;json_dumps_kwargs\&quot;: {\n\&quot;indent\&quot;: 0\n},\n\&quot;additional_definitions_prompt_template\&quot;: \&quot;Here is the schema for additional data types:\\n```\\n{additional_definitions}\\n```\\n\\n\&quot;,\n\&quot;llm_structured_prompt_template\&quot;: \&quot;{docstring}\\n\\nThe input and output are formatted as a JSON interface that conforms to the JSON schemas below.\\n\\nAs an example, for the schema {{\\\&quot;properties\\\&quot;: {{\\\&quot;foo\\\&quot;: {{\\\&quot;description\\\&quot;: \\\&quot;a list of strings\\\&quot;, \\\&quot;type\\\&quot;: \\\&quot;array\\\&quot;, \\\&quot;items\\\&quot;: {{\\\&quot;type\\\&quot;: \\\&quot;string\\\&quot;}}}}}}, \\\&quot;required\\\&quot;: [\\\&quot;foo\\\&quot;]}}}} the object {{\\\&quot;foo\\\&quot;: [\\\&quot;bar\\\&quot;, \\\&quot;baz\\\&quot;]}} is a well-formatted instance of the schema. The object {{\\\&quot;properties\\\&quot;: {{\\\&quot;foo\\\&quot;: [\\\&quot;bar\\\&quot;, \\\&quot;baz\\\&quot;]}}}} is not well-formatted.\\n\\n{optional_additional_definitions_prompt}Here is the input schema:\\n```\\n{input_schema}\\n```\\n\\nHere is the output schema:\\n```\\n{output_schema}\\n```\\nNow output the results for the following inputs:\\n```\\n{inputs}\\n```\&quot;,\n\&quot;num_retries_on_parser_failure\&quot;: 3\n}\n},\n\&quot;allOf\&quot;: [\n{\n\&quot;$ref\&quot;: \&quot;#/definitions/blackboard_pagi_prompt_optimizer_llm_functionModule\&quot;\n}\n]\n}\n}\n},\n\&quot;TaskReflection\&quot;: {\n\&quot;description\&quot;: \&quot;The reflections on the task.\\n\\nThis contains the lessons we learn from each task run to come up with better hyperparameters to try.\&quot;,\n\&quot;properties\&quot;: {\n\&quot;feedback\&quot;: {\n\&quot;description\&quot;: \&quot;Only look at the final results field. Does its content satisfy the task description and task parameters? Does it contain all the relevant information from the all_chains and all_prompts fields? What could be improved in the results?\&quot;,\n\&quot;type\&quot;: \&quot;string\&quot;\n},\n\&quot;evaluation\&quot;: {\n\&quot;description\&quot;: \&quot;The evaluation of the outputs given the task. Is the output satisfying? What is wrong? What is missing?\&quot;,\n\&quot;type\&quot;: \&quot;string\&quot;\n},\n\&quot;hyperparameter_suggestion\&quot;: {\n\&quot;description\&quot;: \&quot;How we want to change the hyperparameters to improve the results. What could we try to change?\&quot;,\n\&quot;type\&quot;: \&quot;string\&quot;\n},\n\&quot;hyperparameter_missing\&quot;: {\n\&quot;description\&quot;: \&quot;What hyperparameters are missing to improve the results? What could be changed that is not exposed via hyperparameters?\&quot;,\n\&quot;type\&quot;: \&quot;string\&quot;\n}\n},\n\&quot;required\&quot;: [\n\&quot;feedback\&quot;,\n\&quot;evaluation\&quot;,\n\&quot;hyperparameter_suggestion\&quot;,\n\&quot;hyperparameter_missing\&quot;\n]\n},\n\&quot;TaskInfo_CreateEssayTopicsInputs__list_str___Hyperparameters_\&quot;: {\n\&quot;description\&quot;: \&quot;The task run and the reflection on the experiment.\&quot;,\n\&quot;properties\&quot;: {\n\&quot;task_parameters\&quot;: {\n\&quot;description\&quot;: \&quot;The task parameters.\&quot;,\n\&quot;allOf\&quot;: [\n{\n\&quot;$ref\&quot;: \&quot;#/definitions/CreateEssayTopicsInputs\&quot;\n}\n]\n},\n\&quot;hyperparameters\&quot;: {\n\&quot;description\&quot;: \&quot;The hyperparameters used for the task. We optimize these.\&quot;,\n\&quot;allOf\&quot;: [\n{\n\&quot;$ref\&quot;: \&quot;#/definitions/Hyperparameters\&quot;\n}\n]\n},\n\&quot;reflection\&quot;: {\n\&quot;description\&quot;: \&quot;The reflection on the task.\&quot;,\n\&quot;allOf\&quot;: [\n{\n\&quot;$ref\&quot;: \&quot;#/definitions/TaskReflection\&quot;\n}\n]\n}\n},\n\&quot;required\&quot;: [\n\&quot;task_parameters\&quot;,\n\&quot;hyperparameters\&quot;,\n\&quot;reflection\&quot;\n]\n},\n\&quot;OptimizationInfo_CreateEssayTopicsInputs__list_str___Hyperparameters_\&quot;: {\n\&quot;description\&quot;: \&quot;The optimization information. This is the data we use to optimize the hyperparameters.\&quot;,\n\&quot;properties\&quot;: {\n\&quot;older_task_summary\&quot;: {\n\&quot;description\&quot;: \&quot;A summary of previous experiments and the proposed changes with the goal of avoiding trying the same changes repeatedly.\&quot;,\n\&quot;type\&quot;: \&quot;string\&quot;\n},\n\&quot;task_infos\&quot;: {\n\&quot;description\&quot;: \&quot;The most recent tasks we have run and our reflections on them.\&quot;,\n\&quot;type\&quot;: \&quot;array\&quot;,\n\&quot;items\&quot;: {\n\&quot;$ref\&quot;: \&quot;#/definitions/TaskInfo_CreateEssayTopicsInputs__list_str___Hyperparameters_\&quot;\n}\n},\n\&quot;best_hyperparameters\&quot;: {\n\&quot;description\&quot;: \&quot;The best hyperparameters we have found so far.\&quot;,\n\&quot;allOf\&quot;: [\n{\n\&quot;$ref\&quot;: \&quot;#/definitions/Hyperparameters\&quot;\n}\n]\n}\n},\n\&quot;required\&quot;: [\n\&quot;task_infos\&quot;,\n\&quot;best_hyperparameters\&quot;\n]\n},\n\&quot;OptimizationStep_CreateEssayTopicsInputs__list_str___Hyperparameters_\&quot;: {\n\&quot;description\&quot;: \&quot;The next optimization steps. New hyperparameters we want to try given the previous experiments and\\nnew task parameters we want to evaluate on given the previous experiments.\&quot;,\n\&quot;properties\&quot;: {\n\&quot;best_hyperparameters\&quot;: {\n\&quot;description\&quot;: \&quot;The best hyperparameters we have found so far given task_infos and history.\&quot;,\n\&quot;allOf\&quot;: [\n{\n\&quot;$ref\&quot;: \&quot;#/definitions/Hyperparameters\&quot;\n}\n]\n},\n\&quot;suggestion\&quot;: {\n\&quot;description\&quot;: \&quot;The suggestions for the next experiments. What could we try to change?We will try several tasks next and several sets of hyperparameters. Let's think step by step.\&quot;,\n\&quot;type\&quot;: \&quot;string\&quot;\n},\n\&quot;task_parameters_suggestions\&quot;: {\n\&quot;description\&quot;: \&quot;The task parameters we want to try next.\&quot;,\n\&quot;hint_min_items\&quot;: 1,\n\&quot;hint_max_items\&quot;: 4,\n\&quot;type\&quot;: \&quot;array\&quot;,\n\&quot;items\&quot;: {\n\&quot;$ref\&quot;: \&quot;#/definitions/CreateEssayTopicsInputs\&quot;\n}\n},\n\&quot;hyperparameter_suggestions\&quot;: {\n\&quot;description\&quot;: \&quot;The hyperparameters we want to try next.\&quot;,\n\&quot;hint_min_items\&quot;: 1,\n\&quot;hint_max_items\&quot;: 2,\n\&quot;type\&quot;: \&quot;array\&quot;,\n\&quot;items\&quot;: {\n\&quot;$ref\&quot;: \&quot;#/definitions/Hyperparameters\&quot;\n}\n}\n},\n\&quot;required\&quot;: [\n\&quot;best_hyperparameters\&quot;,\n\&quot;suggestion\&quot;,\n\&quot;task_parameters_suggestions\&quot;,\n\&quot;hyperparameter_suggestions\&quot;\n]\n}\n}\n```\n\nHere is the input schema:\n```\n{\n\&quot;properties\&quot;: {\n\&quot;optimization_info\&quot;: {\n\&quot;$ref\&quot;: \&quot;#/definitions/OptimizationInfo_CreateEssayTopicsInputs__list_str___Hyperparameters_\&quot;\n}\n},\n\&quot;required\&quot;: [\n\&quot;optimization_info\&quot;\n]\n}\n```\n\nHere is the output schema:\n```\n{\n\&quot;properties\&quot;: {\n\&quot;return_value\&quot;: {\n\&quot;$ref\&quot;: \&quot;#/definitions/OptimizationStep_CreateEssayTopicsInputs__list_str___Hyperparameters_\&quot;\n}\n},\n\&quot;required\&quot;: [\n\&quot;return_value\&quot;\n]\n}\n```\nNow output the results for the following inputs:\n```\n{\n\&quot;optimization_info\&quot;: {\n\&quot;older_task_summary\&quot;: null,\n\&quot;task_infos\&quot;: [\n{\n\&quot;task_parameters\&quot;: {\n\&quot;domain\&quot;: \&quot;comedy\&quot;,\n\&quot;n\&quot;: 2\n},\n\&quot;hyperparameters\&quot;: {\n\&quot;blackboard_pagi_prompt_optimizer_llm_function\&quot;: {\n\&quot;LLMStructuredPrompt_query\&quot;: {\n\&quot;json_dumps_kwargs\&quot;: {\n\&quot;indent\&quot;: 0\n},\n\&quot;additional_definitions_prompt_template\&quot;: \&quot;Here is the schema for additional data types:\\n```\\n{additional_definitions}\\n```\\n\\n\&quot;,\n\&quot;llm_structured_prompt_template\&quot;: \&quot;{docstring}\\n\\nThe input and output are formatted as a JSON interface that conforms to the JSON schemas below.\\n\\nAs an example, for the schema {{\\\&quot;properties\\\&quot;: {{\\\&quot;foo\\\&quot;: {{\\\&quot;description\\\&quot;: \\\&quot;a list of strings\\\&quot;, \\\&quot;type\\\&quot;: \\\&quot;array\\\&quot;, \\\&quot;items\\\&quot;: {{\\\&quot;type\\\&quot;: \\\&quot;string\\\&quot;}}}}}}, \\\&quot;required\\\&quot;: [\\\&quot;foo\\\&quot;]}}}} the object {{\\\&quot;foo\\\&quot;: [\\\&quot;bar\\\&quot;, \\\&quot;baz\\\&quot;]}} is a well-formatted instance of the schema. The object {{\\\&quot;properties\\\&quot;: {{\\\&quot;foo\\\&quot;: [\\\&quot;bar\\\&quot;, \\\&quot;baz\\\&quot;]}}}} is not well-formatted.\\n\\n{optional_additional_definitions_prompt}Here is the input schema:\\n```\\n{input_schema}\\n```\\n\\nHere is the output schema:\\n```\\n{output_schema}\\n```\\nNow output the results for the following inputs:\\n```\\n{inputs}\\n```\&quot;,\n\&quot;num_retries_on_parser_failure\&quot;: 3\n}\n}\n},\n\&quot;reflection\&quot;: {\n\&quot;feedback\&quot;: \&quot;The generated essay topics are relevant to the comedy domain and satisfy the task description and task parameters. The content is appropriate and contains relevant information.\&quot;,\n\&quot;evaluation\&quot;: \&quot;The output is satisfying as it provides two essay topics related to the comedy domain. There is nothing wrong or missing in the output.\&quot;,\n\&quot;hyperparameter_suggestion\&quot;: \&quot;The current hyperparameters seem to be working well for this task. There is no immediate need to change them.\&quot;,\n\&quot;hyperparameter_missing\&quot;: \&quot;There are no missing hyperparameters that need to be added for this task, as the current hyperparameters are providing satisfactory results.\&quot;\n}\n},\n{\n\&quot;task_parameters\&quot;: {\n\&quot;domain\&quot;: \&quot;comedy\&quot;,\n\&quot;n\&quot;: 2\n},\n\&quot;hyperparameters\&quot;: {\n\&quot;blackboard_pagi_prompt_optimizer_llm_function\&quot;: {\n\&quot;LLMStructuredPrompt_query\&quot;: {\n\&quot;json_dumps_kwargs\&quot;: {\n\&quot;indent\&quot;: 0\n},\n\&quot;additional_definitions_prompt_template\&quot;: \&quot;Here is the schema for additional data types:\\n```\\n{additional_definitions}\\n```\\n\\n\&quot;,\n\&quot;llm_structured_prompt_template\&quot;: \&quot;{docstring}\\n\\nThe input and output are formatted as a JSON interface that conforms to the JSON schemas below.\\n\\nAs an example, for the schema {{\\\&quot;properties\\\&quot;: {{\\\&quot;foo\\\&quot;: {{\\\&quot;description\\\&quot;: \\\&quot;a list of strings\\\&quot;, \\\&quot;type\\\&quot;: \\\&quot;array\\\&quot;, \\\&quot;items\\\&quot;: {{\\\&quot;type\\\&quot;: \\\&quot;string\\\&quot;}}}}}}, \\\&quot;required\\\&quot;: [\\\&quot;foo\\\&quot;]}}}} the object {{\\\&quot;foo\\\&quot;: [\\\&quot;bar\\\&quot;, \\\&quot;baz\\\&quot;]}} is a well-formatted instance of the schema. The object {{\\\&quot;properties\\\&quot;: {{\\\&quot;foo\\\&quot;: [\\\&quot;bar\\\&quot;, \\\&quot;baz\\\&quot;]}}}} is not well-formatted.\\n\\n{optional_additional_definitions_prompt}Here is the input schema:\\n```\\n{input_schema}\\n```\\n\\nHere is the output schema:\\n```\\n{output_schema}\\n```\\nNow output the results for the following inputs:\\n```\\n{inputs}\\n```\&quot;,\n\&quot;num_retries_on_parser_failure\&quot;: 3\n}\n}\n},\n\&quot;reflection\&quot;: {\n\&quot;feedback\&quot;: \&quot;The generated essay topics are relevant to the comedy domain and satisfy the task description and parameters. The content is appropriate and contains relevant information.\&quot;,\n\&quot;evaluation\&quot;: \&quot;The output is satisfying as it provides two essay topics related to the comedy domain. There is nothing wrong or missing in the output.\&quot;,\n\&quot;hyperparameter_suggestion\&quot;: \&quot;The current hyperparameters seem to be working well for this task. No changes are suggested at this time.\&quot;,\n\&quot;hyperparameter_missing\&quot;: \&quot;There are no missing hyperparameters that need to be added for this task, as the current hyperparameters are providing satisfactory results.\&quot;\n}\n}\n],\n\&quot;best_hyperparameters\&quot;: {\n\&quot;blackboard_pagi_prompt_optimizer_llm_function\&quot;: {\n\&quot;LLMStructuredPrompt_query\&quot;: {\n\&quot;json_dumps_kwargs\&quot;: {\n\&quot;indent\&quot;: 0\n},\n\&quot;additional_definitions_prompt_template\&quot;: \&quot;Here is the schema for additional data types:\\n```\\n{additional_definitions}\\n```\\n\\n\&quot;,\n\&quot;llm_structured_prompt_template\&quot;: \&quot;{docstring}\\n\\nThe input and output are formatted as a JSON interface that conforms to the JSON schemas below.\\n\\nAs an example, for the schema {{\\\&quot;properties\\\&quot;: {{\\\&quot;foo\\\&quot;: {{\\\&quot;description\\\&quot;: \\\&quot;a list of strings\\\&quot;, \\\&quot;type\\\&quot;: \\\&quot;array\\\&quot;, \\\&quot;items\\\&quot;: {{\\\&quot;type\\\&quot;: \\\&quot;string\\\&quot;}}}}}}, \\\&quot;required\\\&quot;: [\\\&quot;foo\\\&quot;]}}}} the object {{\\\&quot;foo\\\&quot;: [\\\&quot;bar\\\&quot;, \\\&quot;baz\\\&quot;]}} is a well-formatted instance of the schema. The object {{\\\&quot;properties\\\&quot;: {{\\\&quot;foo\\\&quot;: [\\\&quot;bar\\\&quot;, \\\&quot;baz\\\&quot;]}}}} is not well-formatted.\\n\\n{optional_additional_definitions_prompt}Here is the input schema:\\n```\\n{input_schema}\\n```\\n\\nHere is the output schema:\\n```\\n{output_schema}\\n```\\nNow output the results for the following inputs:\\n```\\n{inputs}\\n```\&quot;,\n\&quot;num_retries_on_parser_failure\&quot;: 3\n}\n}\n}\n}\n}\n```&quot;, &quot;additional_kwargs&quot;: {}}]}, &quot;result&quot;: {&quot;content&quot;: &quot;{\n  \&quot;return_value\&quot;: {\n    \&quot;best_hyperparameters\&quot;: {\n      \&quot;blackboard_pagi_prompt_optimizer_llm_function\&quot;: {\n        \&quot;LLMStructuredPrompt_query\&quot;: {\n          \&quot;json_dumps_kwargs\&quot;: {\n            \&quot;indent\&quot;: 0\n          },\n          \&quot;additional_definitions_prompt_template\&quot;: \&quot;Here is the schema for additional data types:\\n```\\n{additional_definitions}\\n```\\n\\n\&quot;,\n          \&quot;llm_structured_prompt_template\&quot;: \&quot;{docstring}\\n\\nThe input and output are formatted as a JSON interface that conforms to the JSON schemas below.\\n\\nAs an example, for the schema {{\\\&quot;properties\\\&quot;: {{\\\&quot;foo\\\&quot;: {{\\\&quot;description\\\&quot;: \\\&quot;a list of strings\\\&quot;, \\\&quot;type\\\&quot;: \\\&quot;array\\\&quot;, \\\&quot;items\\\&quot;: {{\\\&quot;type\\\&quot;: \\\&quot;string\\\&quot;}}}}}}, \\\&quot;required\\\&quot;: [\\\&quot;foo\\\&quot;]}}}} the object {{\\\&quot;foo\\\&quot;: [\\\&quot;bar\\\&quot;, \\\&quot;baz\\\&quot;]}} is a well-formatted instance of the schema. The object {{\\\&quot;properties\\\&quot;: {{\\\&quot;foo\\\&quot;: [\\\&quot;bar\\\&quot;, \\\&quot;baz\\\&quot;]}}}} is not well-formatted.\\n\\n{optional_additional_definitions_prompt}Here is the input schema:\\n```\\n{input_schema}\\n```\\n\\nHere is the output schema:\\n```\\n{output_schema}\\n```\\nNow output the results for the following inputs:\\n```\\n{inputs}\\n```\&quot;,\n          \&quot;num_retries_on_parser_failure\&quot;: 3\n        }\n      }\n    },\n    \&quot;suggestion\&quot;: \&quot;The current hyperparameters seem to be working well for this task. No changes are suggested at this time. However, we can try different domains and number of topics to generate to further evaluate the performance.\&quot;,\n    \&quot;task_parameters_suggestions\&quot;: [\n      {\n        \&quot;domain\&quot;: \&quot;history\&quot;,\n        \&quot;n\&quot;: 2\n      },\n      {\n        \&quot;domain\&quot;: \&quot;technology\&quot;,\n        \&quot;n\&quot;: 3\n      }\n    ],\n    \&quot;hyperparameter_suggestions\&quot;: [\n      {\n        \&quot;blackboard_pagi_prompt_optimizer_llm_function\&quot;: {\n          \&quot;LLMStructuredPrompt_query\&quot;: {\n            \&quot;json_dumps_kwargs\&quot;: {\n              \&quot;indent\&quot;: 0\n            },\n            \&quot;additional_definitions_prompt_template\&quot;: \&quot;Here is the schema for additional data types:\\n```\\n{additional_definitions}\\n```\\n\\n\&quot;,\n            \&quot;llm_structured_prompt_template\&quot;: \&quot;{docstring}\\n\\nThe input and output are formatted as a JSON interface that conforms to the JSON schemas below.\\n\\nAs an example, for the schema {{\\\&quot;properties\\\&quot;: {{\\\&quot;foo\\\&quot;: {{\\\&quot;description\\\&quot;: \\\&quot;a list of strings\\\&quot;, \\\&quot;type\\\&quot;: \\\&quot;array\\\&quot;, \\\&quot;items\\\&quot;: {{\\\&quot;type\\\&quot;: \\\&quot;string\\\&quot;}}}}}}, \\\&quot;required\\\&quot;: [\\\&quot;foo\\\&quot;]}}}} the object {{\\\&quot;foo\\\&quot;: [\\\&quot;bar\\\&quot;, \\\&quot;baz\\\&quot;]}} is a well-formatted instance of the schema. The object {{\\\&quot;properties\\\&quot;: {{\\\&quot;foo\\\&quot;: [\\\&quot;bar\\\&quot;, \\\&quot;baz\\\&quot;]}}}} is not well-formatted.\\n\\n{optional_additional_definitions_prompt}Here is the input schema:\\n```\\n{input_schema}\\n```\\n\\nHere is the output schema:\\n```\\n{output_schema}\\n```\\nNow output the results for the following inputs:\\n```\\n{inputs}\\n```\&quot;,\n            \&quot;num_retries_on_parser_failure\&quot;: 4\n          }\n        }\n      }\n    ]\n  }\n}&quot;, &quot;additional_kwargs&quot;: {}}}, &quot;children&quot;: []}" id="16" width="96.49193456439492%" x="0.001432437879704011%" y="1.8em"><defs /><rect data-id="16" fill="#268bd2" height="1.7em" id="16_box" onclick="handleClick(evt)" rx="2" ry="2" width="99.5%" x="2px" y="0" /><text clip-path="url(#16_clip)" fill="black" font-family="Arial" font-size="1em" pointer-events="none" x="4px" y="1.35em">TrackedChatModel</text></svg></svg></svg><svg data-raw="{&quot;kind&quot;: &quot;CHAIN&quot;, &quot;name&quot;: &quot;create_essay_topics&quot;, &quot;event_id&quot;: 17, &quot;start_time_ms&quot;: 1684491026411, &quot;end_time_ms&quot;: 1684491030373, &quot;running&quot;: false, &quot;delta_frame_infos&quot;: [{&quot;module&quot;: &quot;blackboard_pagi.prompt_optimizer.llm_function&quot;, &quot;lineno&quot;: 732, &quot;function&quot;: &quot;explicit&quot;, &quot;code_context&quot;: null, &quot;index&quot;: null}], &quot;properties&quot;: {&quot;arguments&quot;: {&quot;self&quot;: &quot;&lt;blackboard_pagi.prompt_optimizer.llm_function.LLMFunction object at 0x169e21fd0&gt;&quot;, &quot;language_model_or_chat_chain&quot;: {&quot;chat_model&quot;: {&quot;_type&quot;: &quot;ChatOpenAI&quot;}, &quot;messages&quot;: []}, &quot;kwargs&quot;: {&quot;domain&quot;: &quot;history&quot;, &quot;n&quot;: 2}}, &quot;result&quot;: [&quot;The impact of the Industrial Revolution on society&quot;, &quot;The causes and consequences of World War I&quot;]}, &quot;children&quot;: []}" id="17" width="0.6973238362058184%" x="35.39491189576864%" y="1.8em"><defs /><rect data-id="17" fill="#2aa198" height="1.7em" id="17_box" onclick="handleClick(evt)" rx="2" ry="2" width="99.5%" x="2px" y="0" /><text clip-path="url(#17_clip)" fill="black" font-family="Arial" font-size="1em" pointer-events="none" x="4px" y="1.35em">create_essay_topics</text><svg data-raw="{&quot;kind&quot;: &quot;CHAIN&quot;, &quot;name&quot;: &quot;LLMStructuredPrompt&quot;, &quot;event_id&quot;: 18, &quot;start_time_ms&quot;: 1684491026412, &quot;end_time_ms&quot;: 1684491030370, &quot;running&quot;: false, &quot;delta_frame_infos&quot;: [{&quot;module&quot;: &quot;blackboard_pagi.prompt_optimizer.llm_function&quot;, &quot;lineno&quot;: 758, &quot;function&quot;: &quot;__call__&quot;, &quot;code_context&quot;: null, &quot;index&quot;: null}, {&quot;module&quot;: &quot;blackboard_pagi.utils.tracer.trace_builder&quot;, &quot;lineno&quot;: 345, &quot;function&quot;: &quot;__call__&quot;, &quot;code_context&quot;: null, &quot;index&quot;: null}, {&quot;module&quot;: &quot;blackboard_pagi.prompt_optimizer.llm_function&quot;, &quot;lineno&quot;: 732, &quot;function&quot;: &quot;explicit&quot;, &quot;code_context&quot;: null, &quot;index&quot;: null}], &quot;properties&quot;: {&quot;arguments&quot;: {&quot;domain&quot;: &quot;history&quot;, &quot;n&quot;: 2}, &quot;result&quot;: [&quot;The impact of the Industrial Revolution on society&quot;, &quot;The causes and consequences of World War I&quot;]}, &quot;children&quot;: []}" id="18" width="97.42149472488641%" x="0.025113579000504795%" y="1.8em"><defs /><rect data-id="18" fill="#2aa198" height="1.7em" id="18_box" onclick="handleClick(evt)" rx="2" ry="2" width="99.5%" x="2px" y="0" /><text clip-path="url(#18_clip)" fill="black" font-family="Arial" font-size="1em" pointer-events="none" x="4px" y="1.35em">LLMStructuredPrompt</text><svg data-raw="{&quot;kind&quot;: &quot;LLM&quot;, &quot;name&quot;: &quot;TrackedChatModel&quot;, &quot;event_id&quot;: 19, &quot;start_time_ms&quot;: 1684491026413, &quot;end_time_ms&quot;: 1684491030358, &quot;running&quot;: false, &quot;delta_frame_infos&quot;: [{&quot;module&quot;: &quot;blackboard_pagi.prompts.chat_chain&quot;, &quot;lineno&quot;: 35, &quot;function&quot;: &quot;query&quot;, &quot;code_context&quot;: null, &quot;index&quot;: null}, {&quot;module&quot;: &quot;blackboard_pagi.prompt_optimizer.llm_function&quot;, &quot;lineno&quot;: 455, &quot;function&quot;: &quot;query&quot;, &quot;code_context&quot;: null, &quot;index&quot;: null}, {&quot;module&quot;: &quot;blackboard_pagi.prompt_optimizer.track_hyperparameters&quot;, &quot;lineno&quot;: 328, &quot;function&quot;: &quot;__call__&quot;, &quot;code_context&quot;: null, &quot;index&quot;: null}, {&quot;module&quot;: &quot;blackboard_pagi.prompt_optimizer.llm_function&quot;, &quot;lineno&quot;: 377, &quot;function&quot;: &quot;__call__&quot;, &quot;code_context&quot;: null, &quot;index&quot;: null}, {&quot;module&quot;: &quot;blackboard_pagi.utils.tracer.trace_builder&quot;, &quot;lineno&quot;: 345, &quot;function&quot;: &quot;__call__&quot;, &quot;code_context&quot;: null, &quot;index&quot;: null}, {&quot;module&quot;: &quot;blackboard_pagi.prompt_optimizer.llm_function&quot;, &quot;lineno&quot;: 758, &quot;function&quot;: &quot;__call__&quot;, &quot;code_context&quot;: null, &quot;index&quot;: null}], &quot;properties&quot;: {&quot;arguments&quot;: {&quot;self&quot;: {&quot;_type&quot;: &quot;ChatOpenAI&quot;}, &quot;messages&quot;: [{&quot;content&quot;: &quot;Create a list of essay topics.\n\nThe input and output are formatted as a JSON interface that conforms to the JSON schemas below.\n\nAs an example, for the schema {\&quot;properties\&quot;: {\&quot;foo\&quot;: {\&quot;description\&quot;: \&quot;a list of strings\&quot;, \&quot;type\&quot;: \&quot;array\&quot;, \&quot;items\&quot;: {\&quot;type\&quot;: \&quot;string\&quot;}}}, \&quot;required\&quot;: [\&quot;foo\&quot;]}} the object {\&quot;foo\&quot;: [\&quot;bar\&quot;, \&quot;baz\&quot;]} is a well-formatted instance of the schema. The object {\&quot;properties\&quot;: {\&quot;foo\&quot;: [\&quot;bar\&quot;, \&quot;baz\&quot;]}} is not well-formatted.\n\nHere is the input schema:\n```\n{\n\&quot;properties\&quot;: {\n\&quot;domain\&quot;: {\n\&quot;description\&quot;: \&quot;The domain or general area of the essay topic\&quot;,\n\&quot;type\&quot;: \&quot;string\&quot;\n},\n\&quot;n\&quot;: {\n\&quot;description\&quot;: \&quot;Number of topics to generate\&quot;,\n\&quot;type\&quot;: \&quot;integer\&quot;\n}\n},\n\&quot;required\&quot;: [\n\&quot;domain\&quot;,\n\&quot;n\&quot;\n]\n}\n```\n\nHere is the output schema:\n```\n{\n\&quot;properties\&quot;: {\n\&quot;return_value\&quot;: {\n\&quot;type\&quot;: \&quot;array\&quot;,\n\&quot;items\&quot;: {\n\&quot;type\&quot;: \&quot;string\&quot;\n}\n}\n},\n\&quot;required\&quot;: [\n\&quot;return_value\&quot;\n]\n}\n```\nNow output the results for the following inputs:\n```\n{\n\&quot;domain\&quot;: \&quot;history\&quot;,\n\&quot;n\&quot;: 2\n}\n```&quot;, &quot;additional_kwargs&quot;: {}}]}, &quot;result&quot;: {&quot;content&quot;: &quot;{\n\&quot;return_value\&quot;: [\n\&quot;The impact of the Industrial Revolution on society\&quot;,\n\&quot;The causes and consequences of World War I\&quot;\n]\n}&quot;, &quot;additional_kwargs&quot;: {}}}, &quot;children&quot;: []}" id="19" width="96.2276505109904%" x="0.025138959070237495%" y="1.8em"><defs /><rect data-id="19" fill="#268bd2" height="1.7em" id="19_box" onclick="handleClick(evt)" rx="2" ry="2" width="99.5%" x="2px" y="0" /><text clip-path="url(#19_clip)" fill="black" font-family="Arial" font-size="1em" pointer-events="none" x="4px" y="1.35em">TrackedChatModel</text></svg></svg></svg><svg data-raw="{&quot;kind&quot;: &quot;CHAIN&quot;, &quot;name&quot;: &quot;reflect_on_task_run&quot;, &quot;event_id&quot;: 20, &quot;start_time_ms&quot;: 1684491030382, &quot;end_time_ms&quot;: 1684491059509, &quot;running&quot;: false, &quot;delta_frame_infos&quot;: [{&quot;module&quot;: &quot;blackboard_pagi.prompt_optimizer.track_hyperparameters&quot;, &quot;lineno&quot;: 325, &quot;function&quot;: &quot;__call__&quot;, &quot;code_context&quot;: null, &quot;index&quot;: null}], &quot;properties&quot;: {&quot;arguments&quot;: {&quot;self&quot;: &quot;&lt;blackboard_pagi.prompt_optimizer.llm_function.LLMFunction object at 0x169c74210&gt;&quot;, &quot;language_model_or_chat_chain&quot;: {&quot;chat_model&quot;: {&quot;_type&quot;: &quot;ChatOpenAI&quot;}, &quot;messages&quot;: []}, &quot;args&quot;: [{&quot;task_parameters&quot;: {&quot;domain&quot;: &quot;history&quot;, &quot;n&quot;: 2}, &quot;hyperparameters&quot;: {&quot;blackboard_pagi_prompt_optimizer_llm_function&quot;: {&quot;LLMStructuredPrompt_query&quot;: {&quot;json_dumps_kwargs&quot;: {&quot;indent&quot;: 0}, &quot;additional_definitions_prompt_template&quot;: &quot;Here is the schema for additional data types:\n```\n{additional_definitions}\n```\n\n&quot;, &quot;llm_structured_prompt_template&quot;: &quot;{docstring}\n\nThe input and output are formatted as a JSON interface that conforms to the JSON schemas below.\n\nAs an example, for the schema {{\&quot;properties\&quot;: {{\&quot;foo\&quot;: {{\&quot;description\&quot;: \&quot;a list of strings\&quot;, \&quot;type\&quot;: \&quot;array\&quot;, \&quot;items\&quot;: {{\&quot;type\&quot;: \&quot;string\&quot;}}}}}}, \&quot;required\&quot;: [\&quot;foo\&quot;]}}}} the object {{\&quot;foo\&quot;: [\&quot;bar\&quot;, \&quot;baz\&quot;]}} is a well-formatted instance of the schema. The object {{\&quot;properties\&quot;: {{\&quot;foo\&quot;: [\&quot;bar\&quot;, \&quot;baz\&quot;]}}}} is not well-formatted.\n\n{optional_additional_definitions_prompt}Here is the input schema:\n```\n{input_schema}\n```\n\nHere is the output schema:\n```\n{output_schema}\n```\nNow output the results for the following inputs:\n```\n{inputs}\n```&quot;, &quot;num_retries_on_parser_failure&quot;: 4}}}, &quot;all_chat_chains&quot;: [], &quot;return_value&quot;: [&quot;The impact of the Industrial Revolution on society&quot;, &quot;The causes and consequences of World War I&quot;], &quot;exception&quot;: null}]}, &quot;result&quot;: {&quot;feedback&quot;: &quot;The generated essay topics are relevant to the history domain and satisfy the task description and task parameters. The content is appropriate, and no relevant information is missing from the all_chains and all_prompts fields.&quot;, &quot;evaluation&quot;: &quot;The output is satisfying as it provides two essay topics related to the history domain. There is nothing wrong or missing in the output.&quot;, &quot;hyperparameter_suggestion&quot;: &quot;The current hyperparameters seem to be working well for this task. No changes are needed at the moment.&quot;, &quot;hyperparameter_missing&quot;: &quot;There are no missing hyperparameters that need to be added for this task, as the current hyperparameters are providing satisfactory results.&quot;}}, &quot;children&quot;: []}" id="20" width="5.126439014933586%" x="36.10087943424612%" y="1.8em"><defs /><rect data-id="20" fill="#2aa198" height="1.7em" id="20_box" onclick="handleClick(evt)" rx="2" ry="2" width="99.5%" x="2px" y="0" /><text clip-path="url(#20_clip)" fill="black" font-family="Arial" font-size="1em" pointer-events="none" x="4px" y="1.35em">reflect_on_task_run</text><svg data-raw="{&quot;kind&quot;: &quot;CHAIN&quot;, &quot;name&quot;: &quot;LLMStructuredPrompt&quot;, &quot;event_id&quot;: 21, &quot;start_time_ms&quot;: 1684491030383, &quot;end_time_ms&quot;: 1684491059503, &quot;running&quot;: false, &quot;delta_frame_infos&quot;: [{&quot;module&quot;: &quot;blackboard_pagi.prompt_optimizer.llm_function&quot;, &quot;lineno&quot;: 758, &quot;function&quot;: &quot;__call__&quot;, &quot;code_context&quot;: null, &quot;index&quot;: null}, {&quot;module&quot;: &quot;blackboard_pagi.utils.tracer.trace_builder&quot;, &quot;lineno&quot;: 345, &quot;function&quot;: &quot;__call__&quot;, &quot;code_context&quot;: null, &quot;index&quot;: null}, {&quot;module&quot;: &quot;blackboard_pagi.prompt_optimizer.track_hyperparameters&quot;, &quot;lineno&quot;: 325, &quot;function&quot;: &quot;__call__&quot;, &quot;code_context&quot;: null, &quot;index&quot;: null}], &quot;properties&quot;: {&quot;arguments&quot;: {&quot;task_run&quot;: {&quot;task_parameters&quot;: {&quot;domain&quot;: &quot;history&quot;, &quot;n&quot;: 2}, &quot;hyperparameters&quot;: {&quot;blackboard_pagi_prompt_optimizer_llm_function&quot;: {&quot;LLMStructuredPrompt_query&quot;: {&quot;json_dumps_kwargs&quot;: {&quot;indent&quot;: 0}, &quot;additional_definitions_prompt_template&quot;: &quot;Here is the schema for additional data types:\n```\n{additional_definitions}\n```\n\n&quot;, &quot;llm_structured_prompt_template&quot;: &quot;{docstring}\n\nThe input and output are formatted as a JSON interface that conforms to the JSON schemas below.\n\nAs an example, for the schema {{\&quot;properties\&quot;: {{\&quot;foo\&quot;: {{\&quot;description\&quot;: \&quot;a list of strings\&quot;, \&quot;type\&quot;: \&quot;array\&quot;, \&quot;items\&quot;: {{\&quot;type\&quot;: \&quot;string\&quot;}}}}}}, \&quot;required\&quot;: [\&quot;foo\&quot;]}}}} the object {{\&quot;foo\&quot;: [\&quot;bar\&quot;, \&quot;baz\&quot;]}} is a well-formatted instance of the schema. The object {{\&quot;properties\&quot;: {{\&quot;foo\&quot;: [\&quot;bar\&quot;, \&quot;baz\&quot;]}}}} is not well-formatted.\n\n{optional_additional_definitions_prompt}Here is the input schema:\n```\n{input_schema}\n```\n\nHere is the output schema:\n```\n{output_schema}\n```\nNow output the results for the following inputs:\n```\n{inputs}\n```&quot;, &quot;num_retries_on_parser_failure&quot;: 4}}}, &quot;all_chat_chains&quot;: [], &quot;return_value&quot;: [&quot;The impact of the Industrial Revolution on society&quot;, &quot;The causes and consequences of World War I&quot;], &quot;exception&quot;: null}}, &quot;result&quot;: {&quot;feedback&quot;: &quot;The generated essay topics are relevant to the history domain and satisfy the task description and task parameters. The content is appropriate, and no relevant information is missing from the all_chains and all_prompts fields.&quot;, &quot;evaluation&quot;: &quot;The output is satisfying as it provides two essay topics related to the history domain. There is nothing wrong or missing in the output.&quot;, &quot;hyperparameter_suggestion&quot;: &quot;The current hyperparameters seem to be working well for this task. No changes are needed at the moment.&quot;, &quot;hyperparameter_missing&quot;: &quot;There are no missing hyperparameters that need to be added for this task, as the current hyperparameters are providing satisfactory results.&quot;}}, &quot;children&quot;: []}" id="21" width="97.49651333813986%" x="0.0034160744326569847%" y="1.8em"><defs /><rect data-id="21" fill="#2aa198" height="1.7em" id="21_box" onclick="handleClick(evt)" rx="2" ry="2" width="99.5%" x="2px" y="0" /><text clip-path="url(#21_clip)" fill="black" font-family="Arial" font-size="1em" pointer-events="none" x="4px" y="1.35em">LLMStructuredPrompt</text><svg data-raw="{&quot;kind&quot;: &quot;LLM&quot;, &quot;name&quot;: &quot;TrackedChatModel&quot;, &quot;event_id&quot;: 22, &quot;start_time_ms&quot;: 1684491030384, &quot;end_time_ms&quot;: 1684491059486, &quot;running&quot;: false, &quot;delta_frame_infos&quot;: [{&quot;module&quot;: &quot;blackboard_pagi.prompts.chat_chain&quot;, &quot;lineno&quot;: 35, &quot;function&quot;: &quot;query&quot;, &quot;code_context&quot;: null, &quot;index&quot;: null}, {&quot;module&quot;: &quot;blackboard_pagi.prompt_optimizer.llm_function&quot;, &quot;lineno&quot;: 455, &quot;function&quot;: &quot;query&quot;, &quot;code_context&quot;: null, &quot;index&quot;: null}, {&quot;module&quot;: &quot;blackboard_pagi.prompt_optimizer.track_hyperparameters&quot;, &quot;lineno&quot;: 325, &quot;function&quot;: &quot;__call__&quot;, &quot;code_context&quot;: null, &quot;index&quot;: null}, {&quot;module&quot;: &quot;blackboard_pagi.prompt_optimizer.llm_function&quot;, &quot;lineno&quot;: 377, &quot;function&quot;: &quot;__call__&quot;, &quot;code_context&quot;: null, &quot;index&quot;: null}, {&quot;module&quot;: &quot;blackboard_pagi.utils.tracer.trace_builder&quot;, &quot;lineno&quot;: 345, &quot;function&quot;: &quot;__call__&quot;, &quot;code_context&quot;: null, &quot;index&quot;: null}, {&quot;module&quot;: &quot;blackboard_pagi.prompt_optimizer.llm_function&quot;, &quot;lineno&quot;: 758, &quot;function&quot;: &quot;__call__&quot;, &quot;code_context&quot;: null, &quot;index&quot;: null}], &quot;properties&quot;: {&quot;arguments&quot;: {&quot;self&quot;: {&quot;_type&quot;: &quot;ChatOpenAI&quot;}, &quot;messages&quot;: [{&quot;content&quot;: &quot;Reflect on the results given the task parameters and hyperparameters.\n\nThis contains the lessons we learn from each task run to come up with better hyperparameters to try.\n\nThe input and output are formatted as a JSON interface that conforms to the JSON schemas below.\n\nAs an example, for the schema {\&quot;properties\&quot;: {\&quot;foo\&quot;: {\&quot;description\&quot;: \&quot;a list of strings\&quot;, \&quot;type\&quot;: \&quot;array\&quot;, \&quot;items\&quot;: {\&quot;type\&quot;: \&quot;string\&quot;}}}, \&quot;required\&quot;: [\&quot;foo\&quot;]}} the object {\&quot;foo\&quot;: [\&quot;bar\&quot;, \&quot;baz\&quot;]} is a well-formatted instance of the schema. The object {\&quot;properties\&quot;: {\&quot;foo\&quot;: [\&quot;bar\&quot;, \&quot;baz\&quot;]}} is not well-formatted.\n\nHere is the schema for additional data types:\n```\n{\n\&quot;CreateEssayTopicsInputs\&quot;: {\n\&quot;properties\&quot;: {\n\&quot;domain\&quot;: {\n\&quot;description\&quot;: \&quot;The domain or general area of the essay topic\&quot;,\n\&quot;type\&quot;: \&quot;string\&quot;\n},\n\&quot;n\&quot;: {\n\&quot;description\&quot;: \&quot;Number of topics to generate\&quot;,\n\&quot;type\&quot;: \&quot;integer\&quot;\n}\n},\n\&quot;required\&quot;: [\n\&quot;domain\&quot;,\n\&quot;n\&quot;\n]\n},\n\&quot;QueryHyperparameters\&quot;: {\n\&quot;properties\&quot;: {\n\&quot;json_dumps_kwargs\&quot;: {\n\&quot;default\&quot;: {\n\&quot;indent\&quot;: 0\n},\n\&quot;type\&quot;: \&quot;object\&quot;\n},\n\&quot;additional_definitions_prompt_template\&quot;: {\n\&quot;default\&quot;: \&quot;Here is the schema for additional data types:\\n```\\n{additional_definitions}\\n```\\n\\n\&quot;,\n\&quot;type\&quot;: \&quot;string\&quot;\n},\n\&quot;llm_structured_prompt_template\&quot;: {\n\&quot;description\&quot;: \&quot;The general-purpose prompt for the structured prompt execution. It tells the LLM what to do and how to read function arguments and structure return values. \&quot;,\n\&quot;default\&quot;: \&quot;{docstring}\\n\\nThe input and output are formatted as a JSON interface that conforms to the JSON schemas below.\\n\\nAs an example, for the schema {{\\\&quot;properties\\\&quot;: {{\\\&quot;foo\\\&quot;: {{\\\&quot;description\\\&quot;: \\\&quot;a list of strings\\\&quot;, \\\&quot;type\\\&quot;: \\\&quot;array\\\&quot;, \\\&quot;items\\\&quot;: {{\\\&quot;type\\\&quot;: \\\&quot;string\\\&quot;}}}}}}, \\\&quot;required\\\&quot;: [\\\&quot;foo\\\&quot;]}}}} the object {{\\\&quot;foo\\\&quot;: [\\\&quot;bar\\\&quot;, \\\&quot;baz\\\&quot;]}} is a well-formatted instance of the schema. The object {{\\\&quot;properties\\\&quot;: {{\\\&quot;foo\\\&quot;: [\\\&quot;bar\\\&quot;, \\\&quot;baz\\\&quot;]}}}} is not well-formatted.\\n\\n{optional_additional_definitions_prompt}Here is the input schema:\\n```\\n{input_schema}\\n```\\n\\nHere is the output schema:\\n```\\n{output_schema}\\n```\\nNow output the results for the following inputs:\\n```\\n{inputs}\\n```\&quot;,\n\&quot;type\&quot;: \&quot;string\&quot;\n},\n\&quot;num_retries_on_parser_failure\&quot;: {\n\&quot;default\&quot;: 3,\n\&quot;type\&quot;: \&quot;integer\&quot;\n}\n}\n},\n\&quot;blackboard_pagi_prompt_optimizer_llm_functionModule\&quot;: {\n\&quot;properties\&quot;: {\n\&quot;LLMStructuredPrompt_query\&quot;: {\n\&quot;default\&quot;: {\n\&quot;json_dumps_kwargs\&quot;: {\n\&quot;indent\&quot;: 0\n},\n\&quot;additional_definitions_prompt_template\&quot;: \&quot;Here is the schema for additional data types:\\n```\\n{additional_definitions}\\n```\\n\\n\&quot;,\n\&quot;llm_structured_prompt_template\&quot;: \&quot;{docstring}\\n\\nThe input and output are formatted as a JSON interface that conforms to the JSON schemas below.\\n\\nAs an example, for the schema {{\\\&quot;properties\\\&quot;: {{\\\&quot;foo\\\&quot;: {{\\\&quot;description\\\&quot;: \\\&quot;a list of strings\\\&quot;, \\\&quot;type\\\&quot;: \\\&quot;array\\\&quot;, \\\&quot;items\\\&quot;: {{\\\&quot;type\\\&quot;: \\\&quot;string\\\&quot;}}}}}}, \\\&quot;required\\\&quot;: [\\\&quot;foo\\\&quot;]}}}} the object {{\\\&quot;foo\\\&quot;: [\\\&quot;bar\\\&quot;, \\\&quot;baz\\\&quot;]}} is a well-formatted instance of the schema. The object {{\\\&quot;properties\\\&quot;: {{\\\&quot;foo\\\&quot;: [\\\&quot;bar\\\&quot;, \\\&quot;baz\\\&quot;]}}}} is not well-formatted.\\n\\n{optional_additional_definitions_prompt}Here is the input schema:\\n```\\n{input_schema}\\n```\\n\\nHere is the output schema:\\n```\\n{output_schema}\\n```\\nNow output the results for the following inputs:\\n```\\n{inputs}\\n```\&quot;,\n\&quot;num_retries_on_parser_failure\&quot;: 4\n},\n\&quot;allOf\&quot;: [\n{\n\&quot;$ref\&quot;: \&quot;#/definitions/QueryHyperparameters\&quot;\n}\n]\n}\n}\n},\n\&quot;Hyperparameters\&quot;: {\n\&quot;properties\&quot;: {\n\&quot;blackboard_pagi_prompt_optimizer_llm_function\&quot;: {\n\&quot;default\&quot;: {\n\&quot;LLMStructuredPrompt_query\&quot;: {\n\&quot;json_dumps_kwargs\&quot;: {\n\&quot;indent\&quot;: 0\n},\n\&quot;additional_definitions_prompt_template\&quot;: \&quot;Here is the schema for additional data types:\\n```\\n{additional_definitions}\\n```\\n\\n\&quot;,\n\&quot;llm_structured_prompt_template\&quot;: \&quot;{docstring}\\n\\nThe input and output are formatted as a JSON interface that conforms to the JSON schemas below.\\n\\nAs an example, for the schema {{\\\&quot;properties\\\&quot;: {{\\\&quot;foo\\\&quot;: {{\\\&quot;description\\\&quot;: \\\&quot;a list of strings\\\&quot;, \\\&quot;type\\\&quot;: \\\&quot;array\\\&quot;, \\\&quot;items\\\&quot;: {{\\\&quot;type\\\&quot;: \\\&quot;string\\\&quot;}}}}}}, \\\&quot;required\\\&quot;: [\\\&quot;foo\\\&quot;]}}}} the object {{\\\&quot;foo\\\&quot;: [\\\&quot;bar\\\&quot;, \\\&quot;baz\\\&quot;]}} is a well-formatted instance of the schema. The object {{\\\&quot;properties\\\&quot;: {{\\\&quot;foo\\\&quot;: [\\\&quot;bar\\\&quot;, \\\&quot;baz\\\&quot;]}}}} is not well-formatted.\\n\\n{optional_additional_definitions_prompt}Here is the input schema:\\n```\\n{input_schema}\\n```\\n\\nHere is the output schema:\\n```\\n{output_schema}\\n```\\nNow output the results for the following inputs:\\n```\\n{inputs}\\n```\&quot;,\n\&quot;num_retries_on_parser_failure\&quot;: 4\n}\n},\n\&quot;allOf\&quot;: [\n{\n\&quot;$ref\&quot;: \&quot;#/definitions/blackboard_pagi_prompt_optimizer_llm_functionModule\&quot;\n}\n]\n}\n}\n},\n\&quot;TaskRun_CreateEssayTopicsInputs__list_str___Hyperparameters_\&quot;: {\n\&quot;description\&quot;: \&quot;The task run. This is the 'data' we use to optimize the hyperparameters.\&quot;,\n\&quot;properties\&quot;: {\n\&quot;task_parameters\&quot;: {\n\&quot;description\&quot;: \&quot;The task parameters.\&quot;,\n\&quot;allOf\&quot;: [\n{\n\&quot;$ref\&quot;: \&quot;#/definitions/CreateEssayTopicsInputs\&quot;\n}\n]\n},\n\&quot;hyperparameters\&quot;: {\n\&quot;description\&quot;: \&quot;The hyperparameters used for the task. We optimize these.\&quot;,\n\&quot;allOf\&quot;: [\n{\n\&quot;$ref\&quot;: \&quot;#/definitions/Hyperparameters\&quot;\n}\n]\n},\n\&quot;all_chat_chains\&quot;: {\n\&quot;description\&quot;: \&quot;The chat chains from the task execution.\&quot;,\n\&quot;type\&quot;: \&quot;array\&quot;,\n\&quot;items\&quot;: {\n\&quot;type\&quot;: \&quot;object\&quot;\n}\n},\n\&quot;return_value\&quot;: {\n\&quot;description\&quot;: \&quot;The results of the task. (None for exceptions/failure.)\&quot;,\n\&quot;type\&quot;: \&quot;array\&quot;,\n\&quot;items\&quot;: {\n\&quot;type\&quot;: \&quot;string\&quot;\n}\n},\n\&quot;exception\&quot;: {\n\&quot;description\&quot;: \&quot;Exception that occurred during the task execution.\&quot;,\n\&quot;type\&quot;: \&quot;string\&quot;\n}\n},\n\&quot;required\&quot;: [\n\&quot;task_parameters\&quot;,\n\&quot;hyperparameters\&quot;,\n\&quot;all_chat_chains\&quot;,\n\&quot;return_value\&quot;,\n\&quot;exception\&quot;\n]\n},\n\&quot;TaskReflection\&quot;: {\n\&quot;description\&quot;: \&quot;The reflections on the task.\\n\\nThis contains the lessons we learn from each task run to come up with better hyperparameters to try.\&quot;,\n\&quot;properties\&quot;: {\n\&quot;feedback\&quot;: {\n\&quot;description\&quot;: \&quot;Only look at the final results field. Does its content satisfy the task description and task parameters? Does it contain all the relevant information from the all_chains and all_prompts fields? What could be improved in the results?\&quot;,\n\&quot;type\&quot;: \&quot;string\&quot;\n},\n\&quot;evaluation\&quot;: {\n\&quot;description\&quot;: \&quot;The evaluation of the outputs given the task. Is the output satisfying? What is wrong? What is missing?\&quot;,\n\&quot;type\&quot;: \&quot;string\&quot;\n},\n\&quot;hyperparameter_suggestion\&quot;: {\n\&quot;description\&quot;: \&quot;How we want to change the hyperparameters to improve the results. What could we try to change?\&quot;,\n\&quot;type\&quot;: \&quot;string\&quot;\n},\n\&quot;hyperparameter_missing\&quot;: {\n\&quot;description\&quot;: \&quot;What hyperparameters are missing to improve the results? What could be changed that is not exposed via hyperparameters?\&quot;,\n\&quot;type\&quot;: \&quot;string\&quot;\n}\n},\n\&quot;required\&quot;: [\n\&quot;feedback\&quot;,\n\&quot;evaluation\&quot;,\n\&quot;hyperparameter_suggestion\&quot;,\n\&quot;hyperparameter_missing\&quot;\n]\n}\n}\n```\n\nHere is the input schema:\n```\n{\n\&quot;properties\&quot;: {\n\&quot;task_run\&quot;: {\n\&quot;$ref\&quot;: \&quot;#/definitions/TaskRun_CreateEssayTopicsInputs__list_str___Hyperparameters_\&quot;\n}\n},\n\&quot;required\&quot;: [\n\&quot;task_run\&quot;\n]\n}\n```\n\nHere is the output schema:\n```\n{\n\&quot;properties\&quot;: {\n\&quot;return_value\&quot;: {\n\&quot;$ref\&quot;: \&quot;#/definitions/TaskReflection\&quot;\n}\n},\n\&quot;required\&quot;: [\n\&quot;return_value\&quot;\n]\n}\n```\nNow output the results for the following inputs:\n```\n{\n\&quot;task_run\&quot;: {\n\&quot;task_parameters\&quot;: {\n\&quot;domain\&quot;: \&quot;history\&quot;,\n\&quot;n\&quot;: 2\n},\n\&quot;hyperparameters\&quot;: {\n\&quot;blackboard_pagi_prompt_optimizer_llm_function\&quot;: {\n\&quot;LLMStructuredPrompt_query\&quot;: {\n\&quot;json_dumps_kwargs\&quot;: {\n\&quot;indent\&quot;: 0\n},\n\&quot;additional_definitions_prompt_template\&quot;: \&quot;Here is the schema for additional data types:\\n```\\n{additional_definitions}\\n```\\n\\n\&quot;,\n\&quot;llm_structured_prompt_template\&quot;: \&quot;{docstring}\\n\\nThe input and output are formatted as a JSON interface that conforms to the JSON schemas below.\\n\\nAs an example, for the schema {{\\\&quot;properties\\\&quot;: {{\\\&quot;foo\\\&quot;: {{\\\&quot;description\\\&quot;: \\\&quot;a list of strings\\\&quot;, \\\&quot;type\\\&quot;: \\\&quot;array\\\&quot;, \\\&quot;items\\\&quot;: {{\\\&quot;type\\\&quot;: \\\&quot;string\\\&quot;}}}}}}, \\\&quot;required\\\&quot;: [\\\&quot;foo\\\&quot;]}}}} the object {{\\\&quot;foo\\\&quot;: [\\\&quot;bar\\\&quot;, \\\&quot;baz\\\&quot;]}} is a well-formatted instance of the schema. The object {{\\\&quot;properties\\\&quot;: {{\\\&quot;foo\\\&quot;: [\\\&quot;bar\\\&quot;, \\\&quot;baz\\\&quot;]}}}} is not well-formatted.\\n\\n{optional_additional_definitions_prompt}Here is the input schema:\\n```\\n{input_schema}\\n```\\n\\nHere is the output schema:\\n```\\n{output_schema}\\n```\\nNow output the results for the following inputs:\\n```\\n{inputs}\\n```\&quot;,\n\&quot;num_retries_on_parser_failure\&quot;: 4\n}\n}\n},\n\&quot;all_chat_chains\&quot;: [],\n\&quot;return_value\&quot;: [\n\&quot;The impact of the Industrial Revolution on society\&quot;,\n\&quot;The causes and consequences of World War I\&quot;\n],\n\&quot;exception\&quot;: null\n}\n}\n```&quot;, &quot;additional_kwargs&quot;: {}}]}, &quot;result&quot;: {&quot;content&quot;: &quot;{\n\&quot;return_value\&quot;: {\n\&quot;feedback\&quot;: \&quot;The generated essay topics are relevant to the history domain and satisfy the task description and task parameters. The content is appropriate, and no relevant information is missing from the all_chains and all_prompts fields.\&quot;,\n\&quot;evaluation\&quot;: \&quot;The output is satisfying as it provides two essay topics related to the history domain. There is nothing wrong or missing in the output.\&quot;,\n\&quot;hyperparameter_suggestion\&quot;: \&quot;The current hyperparameters seem to be working well for this task. No changes are needed at the moment.\&quot;,\n\&quot;hyperparameter_missing\&quot;: \&quot;There are no missing hyperparameters that need to be added for this task, as the current hyperparameters are providing satisfactory results.\&quot;\n}\n}&quot;, &quot;additional_kwargs&quot;: {}}}, &quot;children&quot;: []}" id="22" width="96.4850731130151%" x="0.0034168956043956044%" y="1.8em"><defs /><rect data-id="22" fill="#268bd2" height="1.7em" id="22_box" onclick="handleClick(evt)" rx="2" ry="2" width="99.5%" x="2px" y="0" /><text clip-path="url(#22_clip)" fill="black" font-family="Arial" font-size="1em" pointer-events="none" x="4px" y="1.35em">TrackedChatModel</text></svg></svg></svg><svg data-raw="{&quot;kind&quot;: &quot;CHAIN&quot;, &quot;name&quot;: &quot;create_essay_topics&quot;, &quot;event_id&quot;: 23, &quot;start_time_ms&quot;: 1684491059516, &quot;end_time_ms&quot;: 1684491063442, &quot;running&quot;: false, &quot;delta_frame_infos&quot;: [{&quot;module&quot;: &quot;blackboard_pagi.prompt_optimizer.llm_function&quot;, &quot;lineno&quot;: 732, &quot;function&quot;: &quot;explicit&quot;, &quot;code_context&quot;: null, &quot;index&quot;: null}], &quot;properties&quot;: {&quot;arguments&quot;: {&quot;self&quot;: &quot;&lt;blackboard_pagi.prompt_optimizer.llm_function.LLMFunction object at 0x169e21fd0&gt;&quot;, &quot;language_model_or_chat_chain&quot;: {&quot;chat_model&quot;: {&quot;_type&quot;: &quot;ChatOpenAI&quot;}, &quot;messages&quot;: []}, &quot;kwargs&quot;: {&quot;domain&quot;: &quot;technology&quot;, &quot;n&quot;: 3}}, &quot;result&quot;: [&quot;The impact of social media on communication technology&quot;, &quot;The future of artificial intelligence in the field of technology&quot;, &quot;The ethical implications of technology advancements&quot;]}, &quot;children&quot;: []}" id="23" width="0.6909877286582642%" x="41.280345127019466%" y="1.8em"><defs /><rect data-id="23" fill="#2aa198" height="1.7em" id="23_box" onclick="handleClick(evt)" rx="2" ry="2" width="99.5%" x="2px" y="0" /><text clip-path="url(#23_clip)" fill="black" font-family="Arial" font-size="1em" pointer-events="none" x="4px" y="1.35em">create_essay_topics</text><svg data-raw="{&quot;kind&quot;: &quot;CHAIN&quot;, &quot;name&quot;: &quot;LLMStructuredPrompt&quot;, &quot;event_id&quot;: 24, &quot;start_time_ms&quot;: 1684491059520, &quot;end_time_ms&quot;: 1684491063437, &quot;running&quot;: false, &quot;delta_frame_infos&quot;: [{&quot;module&quot;: &quot;blackboard_pagi.prompt_optimizer.llm_function&quot;, &quot;lineno&quot;: 758, &quot;function&quot;: &quot;__call__&quot;, &quot;code_context&quot;: null, &quot;index&quot;: null}, {&quot;module&quot;: &quot;blackboard_pagi.utils.tracer.trace_builder&quot;, &quot;lineno&quot;: 345, &quot;function&quot;: &quot;__call__&quot;, &quot;code_context&quot;: null, &quot;index&quot;: null}, {&quot;module&quot;: &quot;blackboard_pagi.prompt_optimizer.llm_function&quot;, &quot;lineno&quot;: 732, &quot;function&quot;: &quot;explicit&quot;, &quot;code_context&quot;: null, &quot;index&quot;: null}], &quot;properties&quot;: {&quot;arguments&quot;: {&quot;domain&quot;: &quot;technology&quot;, &quot;n&quot;: 3}, &quot;result&quot;: [&quot;The impact of social media on communication technology&quot;, &quot;The future of artificial intelligence in the field of technology&quot;, &quot;The ethical implications of technology advancements&quot;]}, &quot;children&quot;: []}" id="24" width="97.2963943326541%" x="0.10137544574630668%" y="1.8em"><defs /><rect data-id="24" fill="#2aa198" height="1.7em" id="24_box" onclick="handleClick(evt)" rx="2" ry="2" width="99.5%" x="2px" y="0" /><text clip-path="url(#24_clip)" fill="black" font-family="Arial" font-size="1em" pointer-events="none" x="4px" y="1.35em">LLMStructuredPrompt</text><svg data-raw="{&quot;kind&quot;: &quot;LLM&quot;, &quot;name&quot;: &quot;TrackedChatModel&quot;, &quot;event_id&quot;: 25, &quot;start_time_ms&quot;: 1684491059521, &quot;end_time_ms&quot;: 1684491063421, &quot;running&quot;: false, &quot;delta_frame_infos&quot;: [{&quot;module&quot;: &quot;blackboard_pagi.prompts.chat_chain&quot;, &quot;lineno&quot;: 35, &quot;function&quot;: &quot;query&quot;, &quot;code_context&quot;: null, &quot;index&quot;: null}, {&quot;module&quot;: &quot;blackboard_pagi.prompt_optimizer.llm_function&quot;, &quot;lineno&quot;: 455, &quot;function&quot;: &quot;query&quot;, &quot;code_context&quot;: null, &quot;index&quot;: null}, {&quot;module&quot;: &quot;blackboard_pagi.prompt_optimizer.track_hyperparameters&quot;, &quot;lineno&quot;: 328, &quot;function&quot;: &quot;__call__&quot;, &quot;code_context&quot;: null, &quot;index&quot;: null}, {&quot;module&quot;: &quot;blackboard_pagi.prompt_optimizer.llm_function&quot;, &quot;lineno&quot;: 377, &quot;function&quot;: &quot;__call__&quot;, &quot;code_context&quot;: null, &quot;index&quot;: null}, {&quot;module&quot;: &quot;blackboard_pagi.utils.tracer.trace_builder&quot;, &quot;lineno&quot;: 345, &quot;function&quot;: &quot;__call__&quot;, &quot;code_context&quot;: null, &quot;index&quot;: null}, {&quot;module&quot;: &quot;blackboard_pagi.prompt_optimizer.llm_function&quot;, &quot;lineno&quot;: 758, &quot;function&quot;: &quot;__call__&quot;, &quot;code_context&quot;: null, &quot;index&quot;: null}], &quot;properties&quot;: {&quot;arguments&quot;: {&quot;self&quot;: {&quot;_type&quot;: &quot;ChatOpenAI&quot;}, &quot;messages&quot;: [{&quot;content&quot;: &quot;Create a list of essay topics.\n\nThe input and output are formatted as a JSON interface that conforms to the JSON schemas below.\n\nAs an example, for the schema {\&quot;properties\&quot;: {\&quot;foo\&quot;: {\&quot;description\&quot;: \&quot;a list of strings\&quot;, \&quot;type\&quot;: \&quot;array\&quot;, \&quot;items\&quot;: {\&quot;type\&quot;: \&quot;string\&quot;}}}, \&quot;required\&quot;: [\&quot;foo\&quot;]}} the object {\&quot;foo\&quot;: [\&quot;bar\&quot;, \&quot;baz\&quot;]} is a well-formatted instance of the schema. The object {\&quot;properties\&quot;: {\&quot;foo\&quot;: [\&quot;bar\&quot;, \&quot;baz\&quot;]}} is not well-formatted.\n\nHere is the input schema:\n```\n{\n\&quot;properties\&quot;: {\n\&quot;domain\&quot;: {\n\&quot;description\&quot;: \&quot;The domain or general area of the essay topic\&quot;,\n\&quot;type\&quot;: \&quot;string\&quot;\n},\n\&quot;n\&quot;: {\n\&quot;description\&quot;: \&quot;Number of topics to generate\&quot;,\n\&quot;type\&quot;: \&quot;integer\&quot;\n}\n},\n\&quot;required\&quot;: [\n\&quot;domain\&quot;,\n\&quot;n\&quot;\n]\n}\n```\n\nHere is the output schema:\n```\n{\n\&quot;properties\&quot;: {\n\&quot;return_value\&quot;: {\n\&quot;type\&quot;: \&quot;array\&quot;,\n\&quot;items\&quot;: {\n\&quot;type\&quot;: \&quot;string\&quot;\n}\n}\n},\n\&quot;required\&quot;: [\n\&quot;return_value\&quot;\n]\n}\n```\nNow output the results for the following inputs:\n```\n{\n\&quot;domain\&quot;: \&quot;technology\&quot;,\n\&quot;n\&quot;: 3\n}\n```&quot;, &quot;additional_kwargs&quot;: {}}]}, &quot;result&quot;: {&quot;content&quot;: &quot;{\n\&quot;return_value\&quot;: [\n\&quot;The impact of social media on communication technology\&quot;,\n\&quot;The future of artificial intelligence in the field of technology\&quot;,\n\&quot;The ethical implications of technology advancements\&quot;\n]\n}&quot;, &quot;additional_kwargs&quot;: {}}}, &quot;children&quot;: []}" id="25" width="96.12574086035231%" x="0.025402093438856268%" y="1.8em"><defs /><rect data-id="25" fill="#268bd2" height="1.7em" id="25_box" onclick="handleClick(evt)" rx="2" ry="2" width="99.5%" x="2px" y="0" /><text clip-path="url(#25_clip)" fill="black" font-family="Arial" font-size="1em" pointer-events="none" x="4px" y="1.35em">TrackedChatModel</text></svg></svg></svg><svg data-raw="{&quot;kind&quot;: &quot;CHAIN&quot;, &quot;name&quot;: &quot;reflect_on_task_run&quot;, &quot;event_id&quot;: 26, &quot;start_time_ms&quot;: 1684491063449, &quot;end_time_ms&quot;: 1684491091165, &quot;running&quot;: false, &quot;delta_frame_infos&quot;: [{&quot;module&quot;: &quot;blackboard_pagi.prompt_optimizer.track_hyperparameters&quot;, &quot;lineno&quot;: 325, &quot;function&quot;: &quot;__call__&quot;, &quot;code_context&quot;: null, &quot;index&quot;: null}], &quot;properties&quot;: {&quot;arguments&quot;: {&quot;self&quot;: &quot;&lt;blackboard_pagi.prompt_optimizer.llm_function.LLMFunction object at 0x169c74210&gt;&quot;, &quot;language_model_or_chat_chain&quot;: {&quot;chat_model&quot;: {&quot;_type&quot;: &quot;ChatOpenAI&quot;}, &quot;messages&quot;: []}, &quot;args&quot;: [{&quot;task_parameters&quot;: {&quot;domain&quot;: &quot;technology&quot;, &quot;n&quot;: 3}, &quot;hyperparameters&quot;: {&quot;blackboard_pagi_prompt_optimizer_llm_function&quot;: {&quot;LLMStructuredPrompt_query&quot;: {&quot;json_dumps_kwargs&quot;: {&quot;indent&quot;: 0}, &quot;additional_definitions_prompt_template&quot;: &quot;Here is the schema for additional data types:\n```\n{additional_definitions}\n```\n\n&quot;, &quot;llm_structured_prompt_template&quot;: &quot;{docstring}\n\nThe input and output are formatted as a JSON interface that conforms to the JSON schemas below.\n\nAs an example, for the schema {{\&quot;properties\&quot;: {{\&quot;foo\&quot;: {{\&quot;description\&quot;: \&quot;a list of strings\&quot;, \&quot;type\&quot;: \&quot;array\&quot;, \&quot;items\&quot;: {{\&quot;type\&quot;: \&quot;string\&quot;}}}}}}, \&quot;required\&quot;: [\&quot;foo\&quot;]}}}} the object {{\&quot;foo\&quot;: [\&quot;bar\&quot;, \&quot;baz\&quot;]}} is a well-formatted instance of the schema. The object {{\&quot;properties\&quot;: {{\&quot;foo\&quot;: [\&quot;bar\&quot;, \&quot;baz\&quot;]}}}} is not well-formatted.\n\n{optional_additional_definitions_prompt}Here is the input schema:\n```\n{input_schema}\n```\n\nHere is the output schema:\n```\n{output_schema}\n```\nNow output the results for the following inputs:\n```\n{inputs}\n```&quot;, &quot;num_retries_on_parser_failure&quot;: 4}}}, &quot;all_chat_chains&quot;: [], &quot;return_value&quot;: [&quot;The impact of social media on communication technology&quot;, &quot;The future of artificial intelligence in the field of technology&quot;, &quot;The ethical implications of technology advancements&quot;], &quot;exception&quot;: null}]}, &quot;result&quot;: {&quot;feedback&quot;: &quot;The generated essay topics are relevant to the technology domain and satisfy the task description and task parameters. The content is appropriate and does not require any additional information from the all_chains and all_prompts fields.&quot;, &quot;evaluation&quot;: &quot;The output is satisfying as it provides three distinct essay topics related to the technology domain. There is no apparent issue or missing information.&quot;, &quot;hyperparameter_suggestion&quot;: &quot;The current hyperparameters seem to be working well for this task. No immediate changes are necessary.&quot;, &quot;hyperparameter_missing&quot;: &quot;There are no missing hyperparameters that need to be added for this task, as the current hyperparameters are producing satisfactory results.&quot;}}, &quot;children&quot;: []}" id="26" width="4.878098799666952%" x="41.97955699527228%" y="1.8em"><defs /><rect data-id="26" fill="#2aa198" height="1.7em" id="26_box" onclick="handleClick(evt)" rx="2" ry="2" width="99.5%" x="2px" y="0" /><text clip-path="url(#26_clip)" fill="black" font-family="Arial" font-size="1em" pointer-events="none" x="4px" y="1.35em">reflect_on_task_run</text><svg data-raw="{&quot;kind&quot;: &quot;CHAIN&quot;, &quot;name&quot;: &quot;LLMStructuredPrompt&quot;, &quot;event_id&quot;: 27, &quot;start_time_ms&quot;: 1684491063450, &quot;end_time_ms&quot;: 1684491091158, &quot;running&quot;: false, &quot;delta_frame_infos&quot;: [{&quot;module&quot;: &quot;blackboard_pagi.prompt_optimizer.llm_function&quot;, &quot;lineno&quot;: 758, &quot;function&quot;: &quot;__call__&quot;, &quot;code_context&quot;: null, &quot;index&quot;: null}, {&quot;module&quot;: &quot;blackboard_pagi.utils.tracer.trace_builder&quot;, &quot;lineno&quot;: 345, &quot;function&quot;: &quot;__call__&quot;, &quot;code_context&quot;: null, &quot;index&quot;: null}, {&quot;module&quot;: &quot;blackboard_pagi.prompt_optimizer.track_hyperparameters&quot;, &quot;lineno&quot;: 325, &quot;function&quot;: &quot;__call__&quot;, &quot;code_context&quot;: null, &quot;index&quot;: null}], &quot;properties&quot;: {&quot;arguments&quot;: {&quot;task_run&quot;: {&quot;task_parameters&quot;: {&quot;domain&quot;: &quot;technology&quot;, &quot;n&quot;: 3}, &quot;hyperparameters&quot;: {&quot;blackboard_pagi_prompt_optimizer_llm_function&quot;: {&quot;LLMStructuredPrompt_query&quot;: {&quot;json_dumps_kwargs&quot;: {&quot;indent&quot;: 0}, &quot;additional_definitions_prompt_template&quot;: &quot;Here is the schema for additional data types:\n```\n{additional_definitions}\n```\n\n&quot;, &quot;llm_structured_prompt_template&quot;: &quot;{docstring}\n\nThe input and output are formatted as a JSON interface that conforms to the JSON schemas below.\n\nAs an example, for the schema {{\&quot;properties\&quot;: {{\&quot;foo\&quot;: {{\&quot;description\&quot;: \&quot;a list of strings\&quot;, \&quot;type\&quot;: \&quot;array\&quot;, \&quot;items\&quot;: {{\&quot;type\&quot;: \&quot;string\&quot;}}}}}}, \&quot;required\&quot;: [\&quot;foo\&quot;]}}}} the object {{\&quot;foo\&quot;: [\&quot;bar\&quot;, \&quot;baz\&quot;]}} is a well-formatted instance of the schema. The object {{\&quot;properties\&quot;: {{\&quot;foo\&quot;: [\&quot;bar\&quot;, \&quot;baz\&quot;]}}}} is not well-formatted.\n\n{optional_additional_definitions_prompt}Here is the input schema:\n```\n{input_schema}\n```\n\nHere is the output schema:\n```\n{output_schema}\n```\nNow output the results for the following inputs:\n```\n{inputs}\n```&quot;, &quot;num_retries_on_parser_failure&quot;: 4}}}, &quot;all_chat_chains&quot;: [], &quot;return_value&quot;: [&quot;The impact of social media on communication technology&quot;, &quot;The future of artificial intelligence in the field of technology&quot;, &quot;The ethical implications of technology advancements&quot;], &quot;exception&quot;: null}}, &quot;result&quot;: {&quot;feedback&quot;: &quot;The generated essay topics are relevant to the technology domain and satisfy the task description and task parameters. The content is appropriate and does not require any additional information from the all_chains and all_prompts fields.&quot;, &quot;evaluation&quot;: &quot;The output is satisfying as it provides three distinct essay topics related to the technology domain. There is no apparent issue or missing information.&quot;, &quot;hyperparameter_suggestion&quot;: &quot;The current hyperparameters seem to be working well for this task. No immediate changes are necessary.&quot;, &quot;hyperparameter_missing&quot;: &quot;There are no missing hyperparameters that need to be added for this task, as the current hyperparameters are producing satisfactory results.&quot;}}, &quot;children&quot;: []}" id="27" width="97.4918016524751%" x="0.003589984124693318%" y="1.8em"><defs /><rect data-id="27" fill="#2aa198" height="1.7em" id="27_box" onclick="handleClick(evt)" rx="2" ry="2" width="99.5%" x="2px" y="0" /><text clip-path="url(#27_clip)" fill="black" font-family="Arial" font-size="1em" pointer-events="none" x="4px" y="1.35em">LLMStructuredPrompt</text><svg data-raw="{&quot;kind&quot;: &quot;LLM&quot;, &quot;name&quot;: &quot;TrackedChatModel&quot;, &quot;event_id&quot;: 28, &quot;start_time_ms&quot;: 1684491063451, &quot;end_time_ms&quot;: 1684491091110, &quot;running&quot;: false, &quot;delta_frame_infos&quot;: [{&quot;module&quot;: &quot;blackboard_pagi.prompts.chat_chain&quot;, &quot;lineno&quot;: 35, &quot;function&quot;: &quot;query&quot;, &quot;code_context&quot;: null, &quot;index&quot;: null}, {&quot;module&quot;: &quot;blackboard_pagi.prompt_optimizer.llm_function&quot;, &quot;lineno&quot;: 455, &quot;function&quot;: &quot;query&quot;, &quot;code_context&quot;: null, &quot;index&quot;: null}, {&quot;module&quot;: &quot;blackboard_pagi.prompt_optimizer.track_hyperparameters&quot;, &quot;lineno&quot;: 325, &quot;function&quot;: &quot;__call__&quot;, &quot;code_context&quot;: null, &quot;index&quot;: null}, {&quot;module&quot;: &quot;blackboard_pagi.prompt_optimizer.llm_function&quot;, &quot;lineno&quot;: 377, &quot;function&quot;: &quot;__call__&quot;, &quot;code_context&quot;: null, &quot;index&quot;: null}, {&quot;module&quot;: &quot;blackboard_pagi.utils.tracer.trace_builder&quot;, &quot;lineno&quot;: 345, &quot;function&quot;: &quot;__call__&quot;, &quot;code_context&quot;: null, &quot;index&quot;: null}, {&quot;module&quot;: &quot;blackboard_pagi.prompt_optimizer.llm_function&quot;, &quot;lineno&quot;: 758, &quot;function&quot;: &quot;__call__&quot;, &quot;code_context&quot;: null, &quot;index&quot;: null}], &quot;properties&quot;: {&quot;arguments&quot;: {&quot;self&quot;: {&quot;_type&quot;: &quot;ChatOpenAI&quot;}, &quot;messages&quot;: [{&quot;content&quot;: &quot;Reflect on the results given the task parameters and hyperparameters.\n\nThis contains the lessons we learn from each task run to come up with better hyperparameters to try.\n\nThe input and output are formatted as a JSON interface that conforms to the JSON schemas below.\n\nAs an example, for the schema {\&quot;properties\&quot;: {\&quot;foo\&quot;: {\&quot;description\&quot;: \&quot;a list of strings\&quot;, \&quot;type\&quot;: \&quot;array\&quot;, \&quot;items\&quot;: {\&quot;type\&quot;: \&quot;string\&quot;}}}, \&quot;required\&quot;: [\&quot;foo\&quot;]}} the object {\&quot;foo\&quot;: [\&quot;bar\&quot;, \&quot;baz\&quot;]} is a well-formatted instance of the schema. The object {\&quot;properties\&quot;: {\&quot;foo\&quot;: [\&quot;bar\&quot;, \&quot;baz\&quot;]}} is not well-formatted.\n\nHere is the schema for additional data types:\n```\n{\n\&quot;CreateEssayTopicsInputs\&quot;: {\n\&quot;properties\&quot;: {\n\&quot;domain\&quot;: {\n\&quot;description\&quot;: \&quot;The domain or general area of the essay topic\&quot;,\n\&quot;type\&quot;: \&quot;string\&quot;\n},\n\&quot;n\&quot;: {\n\&quot;description\&quot;: \&quot;Number of topics to generate\&quot;,\n\&quot;type\&quot;: \&quot;integer\&quot;\n}\n},\n\&quot;required\&quot;: [\n\&quot;domain\&quot;,\n\&quot;n\&quot;\n]\n},\n\&quot;QueryHyperparameters\&quot;: {\n\&quot;properties\&quot;: {\n\&quot;json_dumps_kwargs\&quot;: {\n\&quot;default\&quot;: {\n\&quot;indent\&quot;: 0\n},\n\&quot;type\&quot;: \&quot;object\&quot;\n},\n\&quot;additional_definitions_prompt_template\&quot;: {\n\&quot;default\&quot;: \&quot;Here is the schema for additional data types:\\n```\\n{additional_definitions}\\n```\\n\\n\&quot;,\n\&quot;type\&quot;: \&quot;string\&quot;\n},\n\&quot;llm_structured_prompt_template\&quot;: {\n\&quot;description\&quot;: \&quot;The general-purpose prompt for the structured prompt execution. It tells the LLM what to do and how to read function arguments and structure return values. \&quot;,\n\&quot;default\&quot;: \&quot;{docstring}\\n\\nThe input and output are formatted as a JSON interface that conforms to the JSON schemas below.\\n\\nAs an example, for the schema {{\\\&quot;properties\\\&quot;: {{\\\&quot;foo\\\&quot;: {{\\\&quot;description\\\&quot;: \\\&quot;a list of strings\\\&quot;, \\\&quot;type\\\&quot;: \\\&quot;array\\\&quot;, \\\&quot;items\\\&quot;: {{\\\&quot;type\\\&quot;: \\\&quot;string\\\&quot;}}}}}}, \\\&quot;required\\\&quot;: [\\\&quot;foo\\\&quot;]}}}} the object {{\\\&quot;foo\\\&quot;: [\\\&quot;bar\\\&quot;, \\\&quot;baz\\\&quot;]}} is a well-formatted instance of the schema. The object {{\\\&quot;properties\\\&quot;: {{\\\&quot;foo\\\&quot;: [\\\&quot;bar\\\&quot;, \\\&quot;baz\\\&quot;]}}}} is not well-formatted.\\n\\n{optional_additional_definitions_prompt}Here is the input schema:\\n```\\n{input_schema}\\n```\\n\\nHere is the output schema:\\n```\\n{output_schema}\\n```\\nNow output the results for the following inputs:\\n```\\n{inputs}\\n```\&quot;,\n\&quot;type\&quot;: \&quot;string\&quot;\n},\n\&quot;num_retries_on_parser_failure\&quot;: {\n\&quot;default\&quot;: 3,\n\&quot;type\&quot;: \&quot;integer\&quot;\n}\n}\n},\n\&quot;blackboard_pagi_prompt_optimizer_llm_functionModule\&quot;: {\n\&quot;properties\&quot;: {\n\&quot;LLMStructuredPrompt_query\&quot;: {\n\&quot;default\&quot;: {\n\&quot;json_dumps_kwargs\&quot;: {\n\&quot;indent\&quot;: 0\n},\n\&quot;additional_definitions_prompt_template\&quot;: \&quot;Here is the schema for additional data types:\\n```\\n{additional_definitions}\\n```\\n\\n\&quot;,\n\&quot;llm_structured_prompt_template\&quot;: \&quot;{docstring}\\n\\nThe input and output are formatted as a JSON interface that conforms to the JSON schemas below.\\n\\nAs an example, for the schema {{\\\&quot;properties\\\&quot;: {{\\\&quot;foo\\\&quot;: {{\\\&quot;description\\\&quot;: \\\&quot;a list of strings\\\&quot;, \\\&quot;type\\\&quot;: \\\&quot;array\\\&quot;, \\\&quot;items\\\&quot;: {{\\\&quot;type\\\&quot;: \\\&quot;string\\\&quot;}}}}}}, \\\&quot;required\\\&quot;: [\\\&quot;foo\\\&quot;]}}}} the object {{\\\&quot;foo\\\&quot;: [\\\&quot;bar\\\&quot;, \\\&quot;baz\\\&quot;]}} is a well-formatted instance of the schema. The object {{\\\&quot;properties\\\&quot;: {{\\\&quot;foo\\\&quot;: [\\\&quot;bar\\\&quot;, \\\&quot;baz\\\&quot;]}}}} is not well-formatted.\\n\\n{optional_additional_definitions_prompt}Here is the input schema:\\n```\\n{input_schema}\\n```\\n\\nHere is the output schema:\\n```\\n{output_schema}\\n```\\nNow output the results for the following inputs:\\n```\\n{inputs}\\n```\&quot;,\n\&quot;num_retries_on_parser_failure\&quot;: 4\n},\n\&quot;allOf\&quot;: [\n{\n\&quot;$ref\&quot;: \&quot;#/definitions/QueryHyperparameters\&quot;\n}\n]\n}\n}\n},\n\&quot;Hyperparameters\&quot;: {\n\&quot;properties\&quot;: {\n\&quot;blackboard_pagi_prompt_optimizer_llm_function\&quot;: {\n\&quot;default\&quot;: {\n\&quot;LLMStructuredPrompt_query\&quot;: {\n\&quot;json_dumps_kwargs\&quot;: {\n\&quot;indent\&quot;: 0\n},\n\&quot;additional_definitions_prompt_template\&quot;: \&quot;Here is the schema for additional data types:\\n```\\n{additional_definitions}\\n```\\n\\n\&quot;,\n\&quot;llm_structured_prompt_template\&quot;: \&quot;{docstring}\\n\\nThe input and output are formatted as a JSON interface that conforms to the JSON schemas below.\\n\\nAs an example, for the schema {{\\\&quot;properties\\\&quot;: {{\\\&quot;foo\\\&quot;: {{\\\&quot;description\\\&quot;: \\\&quot;a list of strings\\\&quot;, \\\&quot;type\\\&quot;: \\\&quot;array\\\&quot;, \\\&quot;items\\\&quot;: {{\\\&quot;type\\\&quot;: \\\&quot;string\\\&quot;}}}}}}, \\\&quot;required\\\&quot;: [\\\&quot;foo\\\&quot;]}}}} the object {{\\\&quot;foo\\\&quot;: [\\\&quot;bar\\\&quot;, \\\&quot;baz\\\&quot;]}} is a well-formatted instance of the schema. The object {{\\\&quot;properties\\\&quot;: {{\\\&quot;foo\\\&quot;: [\\\&quot;bar\\\&quot;, \\\&quot;baz\\\&quot;]}}}} is not well-formatted.\\n\\n{optional_additional_definitions_prompt}Here is the input schema:\\n```\\n{input_schema}\\n```\\n\\nHere is the output schema:\\n```\\n{output_schema}\\n```\\nNow output the results for the following inputs:\\n```\\n{inputs}\\n```\&quot;,\n\&quot;num_retries_on_parser_failure\&quot;: 4\n}\n},\n\&quot;allOf\&quot;: [\n{\n\&quot;$ref\&quot;: \&quot;#/definitions/blackboard_pagi_prompt_optimizer_llm_functionModule\&quot;\n}\n]\n}\n}\n},\n\&quot;TaskRun_CreateEssayTopicsInputs__list_str___Hyperparameters_\&quot;: {\n\&quot;description\&quot;: \&quot;The task run. This is the 'data' we use to optimize the hyperparameters.\&quot;,\n\&quot;properties\&quot;: {\n\&quot;task_parameters\&quot;: {\n\&quot;description\&quot;: \&quot;The task parameters.\&quot;,\n\&quot;allOf\&quot;: [\n{\n\&quot;$ref\&quot;: \&quot;#/definitions/CreateEssayTopicsInputs\&quot;\n}\n]\n},\n\&quot;hyperparameters\&quot;: {\n\&quot;description\&quot;: \&quot;The hyperparameters used for the task. We optimize these.\&quot;,\n\&quot;allOf\&quot;: [\n{\n\&quot;$ref\&quot;: \&quot;#/definitions/Hyperparameters\&quot;\n}\n]\n},\n\&quot;all_chat_chains\&quot;: {\n\&quot;description\&quot;: \&quot;The chat chains from the task execution.\&quot;,\n\&quot;type\&quot;: \&quot;array\&quot;,\n\&quot;items\&quot;: {\n\&quot;type\&quot;: \&quot;object\&quot;\n}\n},\n\&quot;return_value\&quot;: {\n\&quot;description\&quot;: \&quot;The results of the task. (None for exceptions/failure.)\&quot;,\n\&quot;type\&quot;: \&quot;array\&quot;,\n\&quot;items\&quot;: {\n\&quot;type\&quot;: \&quot;string\&quot;\n}\n},\n\&quot;exception\&quot;: {\n\&quot;description\&quot;: \&quot;Exception that occurred during the task execution.\&quot;,\n\&quot;type\&quot;: \&quot;string\&quot;\n}\n},\n\&quot;required\&quot;: [\n\&quot;task_parameters\&quot;,\n\&quot;hyperparameters\&quot;,\n\&quot;all_chat_chains\&quot;,\n\&quot;return_value\&quot;,\n\&quot;exception\&quot;\n]\n},\n\&quot;TaskReflection\&quot;: {\n\&quot;description\&quot;: \&quot;The reflections on the task.\\n\\nThis contains the lessons we learn from each task run to come up with better hyperparameters to try.\&quot;,\n\&quot;properties\&quot;: {\n\&quot;feedback\&quot;: {\n\&quot;description\&quot;: \&quot;Only look at the final results field. Does its content satisfy the task description and task parameters? Does it contain all the relevant information from the all_chains and all_prompts fields? What could be improved in the results?\&quot;,\n\&quot;type\&quot;: \&quot;string\&quot;\n},\n\&quot;evaluation\&quot;: {\n\&quot;description\&quot;: \&quot;The evaluation of the outputs given the task. Is the output satisfying? What is wrong? What is missing?\&quot;,\n\&quot;type\&quot;: \&quot;string\&quot;\n},\n\&quot;hyperparameter_suggestion\&quot;: {\n\&quot;description\&quot;: \&quot;How we want to change the hyperparameters to improve the results. What could we try to change?\&quot;,\n\&quot;type\&quot;: \&quot;string\&quot;\n},\n\&quot;hyperparameter_missing\&quot;: {\n\&quot;description\&quot;: \&quot;What hyperparameters are missing to improve the results? What could be changed that is not exposed via hyperparameters?\&quot;,\n\&quot;type\&quot;: \&quot;string\&quot;\n}\n},\n\&quot;required\&quot;: [\n\&quot;feedback\&quot;,\n\&quot;evaluation\&quot;,\n\&quot;hyperparameter_suggestion\&quot;,\n\&quot;hyperparameter_missing\&quot;\n]\n}\n}\n```\n\nHere is the input schema:\n```\n{\n\&quot;properties\&quot;: {\n\&quot;task_run\&quot;: {\n\&quot;$ref\&quot;: \&quot;#/definitions/TaskRun_CreateEssayTopicsInputs__list_str___Hyperparameters_\&quot;\n}\n},\n\&quot;required\&quot;: [\n\&quot;task_run\&quot;\n]\n}\n```\n\nHere is the output schema:\n```\n{\n\&quot;properties\&quot;: {\n\&quot;return_value\&quot;: {\n\&quot;$ref\&quot;: \&quot;#/definitions/TaskReflection\&quot;\n}\n},\n\&quot;required\&quot;: [\n\&quot;return_value\&quot;\n]\n}\n```\nNow output the results for the following inputs:\n```\n{\n\&quot;task_run\&quot;: {\n\&quot;task_parameters\&quot;: {\n\&quot;domain\&quot;: \&quot;technology\&quot;,\n\&quot;n\&quot;: 3\n},\n\&quot;hyperparameters\&quot;: {\n\&quot;blackboard_pagi_prompt_optimizer_llm_function\&quot;: {\n\&quot;LLMStructuredPrompt_query\&quot;: {\n\&quot;json_dumps_kwargs\&quot;: {\n\&quot;indent\&quot;: 0\n},\n\&quot;additional_definitions_prompt_template\&quot;: \&quot;Here is the schema for additional data types:\\n```\\n{additional_definitions}\\n```\\n\\n\&quot;,\n\&quot;llm_structured_prompt_template\&quot;: \&quot;{docstring}\\n\\nThe input and output are formatted as a JSON interface that conforms to the JSON schemas below.\\n\\nAs an example, for the schema {{\\\&quot;properties\\\&quot;: {{\\\&quot;foo\\\&quot;: {{\\\&quot;description\\\&quot;: \\\&quot;a list of strings\\\&quot;, \\\&quot;type\\\&quot;: \\\&quot;array\\\&quot;, \\\&quot;items\\\&quot;: {{\\\&quot;type\\\&quot;: \\\&quot;string\\\&quot;}}}}}}, \\\&quot;required\\\&quot;: [\\\&quot;foo\\\&quot;]}}}} the object {{\\\&quot;foo\\\&quot;: [\\\&quot;bar\\\&quot;, \\\&quot;baz\\\&quot;]}} is a well-formatted instance of the schema. The object {{\\\&quot;properties\\\&quot;: {{\\\&quot;foo\\\&quot;: [\\\&quot;bar\\\&quot;, \\\&quot;baz\\\&quot;]}}}} is not well-formatted.\\n\\n{optional_additional_definitions_prompt}Here is the input schema:\\n```\\n{input_schema}\\n```\\n\\nHere is the output schema:\\n```\\n{output_schema}\\n```\\nNow output the results for the following inputs:\\n```\\n{inputs}\\n```\&quot;,\n\&quot;num_retries_on_parser_failure\&quot;: 4\n}\n}\n},\n\&quot;all_chat_chains\&quot;: [],\n\&quot;return_value\&quot;: [\n\&quot;The impact of social media on communication technology\&quot;,\n\&quot;The future of artificial intelligence in the field of technology\&quot;,\n\&quot;The ethical implications of technology advancements\&quot;\n],\n\&quot;exception\&quot;: null\n}\n}\n```&quot;, &quot;additional_kwargs&quot;: {}}]}, &quot;result&quot;: {&quot;content&quot;: &quot;{\n\&quot;return_value\&quot;: {\n\&quot;feedback\&quot;: \&quot;The generated essay topics are relevant to the technology domain and satisfy the task description and task parameters. The content is appropriate and does not require any additional information from the all_chains and all_prompts fields.\&quot;,\n\&quot;evaluation\&quot;: \&quot;The output is satisfying as it provides three distinct essay topics related to the technology domain. There is no apparent issue or missing information.\&quot;,\n\&quot;hyperparameter_suggestion\&quot;: \&quot;The current hyperparameters seem to be working well for this task. No immediate changes are necessary.\&quot;,\n\&quot;hyperparameter_missing\&quot;: \&quot;There are no missing hyperparameters that need to be added for this task, as the current hyperparameters are producing satisfactory results.\&quot;\n}\n}&quot;, &quot;additional_kwargs&quot;: {}}}, &quot;children&quot;: []}" id="28" width="96.374016676754%" x="0.0035910206438573697%" y="1.8em"><defs /><rect data-id="28" fill="#268bd2" height="1.7em" id="28_box" onclick="handleClick(evt)" rx="2" ry="2" width="99.5%" x="2px" y="0" /><text clip-path="url(#28_clip)" fill="black" font-family="Arial" font-size="1em" pointer-events="none" x="4px" y="1.35em">TrackedChatModel</text></svg></svg></svg><svg data-raw="{&quot;kind&quot;: &quot;CHAIN&quot;, &quot;name&quot;: &quot;probability_for_improvement&quot;, &quot;event_id&quot;: 29, &quot;start_time_ms&quot;: 1684491091176, &quot;end_time_ms&quot;: 1684491104810, &quot;running&quot;: false, &quot;delta_frame_infos&quot;: [{&quot;module&quot;: &quot;blackboard_pagi.prompt_optimizer.track_hyperparameters&quot;, &quot;lineno&quot;: 325, &quot;function&quot;: &quot;__call__&quot;, &quot;code_context&quot;: null, &quot;index&quot;: null}], &quot;properties&quot;: {&quot;arguments&quot;: {&quot;self&quot;: &quot;&lt;blackboard_pagi.prompt_optimizer.llm_function.LLMFunction object at 0x169e21990&gt;&quot;, &quot;language_model_or_chat_chain&quot;: {&quot;chat_model&quot;: {&quot;_type&quot;: &quot;ChatOpenAI&quot;}, &quot;messages&quot;: []}, &quot;args&quot;: [{&quot;older_task_summary&quot;: null, &quot;task_infos&quot;: [{&quot;task_parameters&quot;: {&quot;domain&quot;: &quot;comedy&quot;, &quot;n&quot;: 2}, &quot;hyperparameters&quot;: {&quot;blackboard_pagi_prompt_optimizer_llm_function&quot;: {&quot;LLMStructuredPrompt_query&quot;: {&quot;json_dumps_kwargs&quot;: {&quot;indent&quot;: 0}, &quot;additional_definitions_prompt_template&quot;: &quot;Here is the schema for additional data types:\n```\n{additional_definitions}\n```\n\n&quot;, &quot;llm_structured_prompt_template&quot;: &quot;{docstring}\n\nThe input and output are formatted as a JSON interface that conforms to the JSON schemas below.\n\nAs an example, for the schema {{\&quot;properties\&quot;: {{\&quot;foo\&quot;: {{\&quot;description\&quot;: \&quot;a list of strings\&quot;, \&quot;type\&quot;: \&quot;array\&quot;, \&quot;items\&quot;: {{\&quot;type\&quot;: \&quot;string\&quot;}}}}}}, \&quot;required\&quot;: [\&quot;foo\&quot;]}}}} the object {{\&quot;foo\&quot;: [\&quot;bar\&quot;, \&quot;baz\&quot;]}} is a well-formatted instance of the schema. The object {{\&quot;properties\&quot;: {{\&quot;foo\&quot;: [\&quot;bar\&quot;, \&quot;baz\&quot;]}}}} is not well-formatted.\n\n{optional_additional_definitions_prompt}Here is the input schema:\n```\n{input_schema}\n```\n\nHere is the output schema:\n```\n{output_schema}\n```\nNow output the results for the following inputs:\n```\n{inputs}\n```&quot;, &quot;num_retries_on_parser_failure&quot;: 3}}}, &quot;reflection&quot;: {&quot;feedback&quot;: &quot;The generated essay topics are relevant to the comedy domain and satisfy the task description and task parameters. The content is appropriate and contains relevant information.&quot;, &quot;evaluation&quot;: &quot;The output is satisfying as it provides two essay topics related to the comedy domain. There is nothing wrong or missing in the output.&quot;, &quot;hyperparameter_suggestion&quot;: &quot;The current hyperparameters seem to be working well for this task. There is no immediate need to change them.&quot;, &quot;hyperparameter_missing&quot;: &quot;There are no missing hyperparameters that need to be added for this task, as the current hyperparameters are providing satisfactory results.&quot;}}, {&quot;task_parameters&quot;: {&quot;domain&quot;: &quot;comedy&quot;, &quot;n&quot;: 2}, &quot;hyperparameters&quot;: {&quot;blackboard_pagi_prompt_optimizer_llm_function&quot;: {&quot;LLMStructuredPrompt_query&quot;: {&quot;json_dumps_kwargs&quot;: {&quot;indent&quot;: 0}, &quot;additional_definitions_prompt_template&quot;: &quot;Here is the schema for additional data types:\n```\n{additional_definitions}\n```\n\n&quot;, &quot;llm_structured_prompt_template&quot;: &quot;{docstring}\n\nThe input and output are formatted as a JSON interface that conforms to the JSON schemas below.\n\nAs an example, for the schema {{\&quot;properties\&quot;: {{\&quot;foo\&quot;: {{\&quot;description\&quot;: \&quot;a list of strings\&quot;, \&quot;type\&quot;: \&quot;array\&quot;, \&quot;items\&quot;: {{\&quot;type\&quot;: \&quot;string\&quot;}}}}}}, \&quot;required\&quot;: [\&quot;foo\&quot;]}}}} the object {{\&quot;foo\&quot;: [\&quot;bar\&quot;, \&quot;baz\&quot;]}} is a well-formatted instance of the schema. The object {{\&quot;properties\&quot;: {{\&quot;foo\&quot;: [\&quot;bar\&quot;, \&quot;baz\&quot;]}}}} is not well-formatted.\n\n{optional_additional_definitions_prompt}Here is the input schema:\n```\n{input_schema}\n```\n\nHere is the output schema:\n```\n{output_schema}\n```\nNow output the results for the following inputs:\n```\n{inputs}\n```&quot;, &quot;num_retries_on_parser_failure&quot;: 3}}}, &quot;reflection&quot;: {&quot;feedback&quot;: &quot;The generated essay topics are relevant to the comedy domain and satisfy the task description and parameters. The content is appropriate and contains relevant information.&quot;, &quot;evaluation&quot;: &quot;The output is satisfying as it provides two essay topics related to the comedy domain. There is nothing wrong or missing in the output.&quot;, &quot;hyperparameter_suggestion&quot;: &quot;The current hyperparameters seem to be working well for this task. No changes are suggested at this time.&quot;, &quot;hyperparameter_missing&quot;: &quot;There are no missing hyperparameters that need to be added for this task, as the current hyperparameters are providing satisfactory results.&quot;}}, {&quot;task_parameters&quot;: {&quot;domain&quot;: &quot;history&quot;, &quot;n&quot;: 2}, &quot;hyperparameters&quot;: {&quot;blackboard_pagi_prompt_optimizer_llm_function&quot;: {&quot;LLMStructuredPrompt_query&quot;: {&quot;json_dumps_kwargs&quot;: {&quot;indent&quot;: 0}, &quot;additional_definitions_prompt_template&quot;: &quot;Here is the schema for additional data types:\n```\n{additional_definitions}\n```\n\n&quot;, &quot;llm_structured_prompt_template&quot;: &quot;{docstring}\n\nThe input and output are formatted as a JSON interface that conforms to the JSON schemas below.\n\nAs an example, for the schema {{\&quot;properties\&quot;: {{\&quot;foo\&quot;: {{\&quot;description\&quot;: \&quot;a list of strings\&quot;, \&quot;type\&quot;: \&quot;array\&quot;, \&quot;items\&quot;: {{\&quot;type\&quot;: \&quot;string\&quot;}}}}}}, \&quot;required\&quot;: [\&quot;foo\&quot;]}}}} the object {{\&quot;foo\&quot;: [\&quot;bar\&quot;, \&quot;baz\&quot;]}} is a well-formatted instance of the schema. The object {{\&quot;properties\&quot;: {{\&quot;foo\&quot;: [\&quot;bar\&quot;, \&quot;baz\&quot;]}}}} is not well-formatted.\n\n{optional_additional_definitions_prompt}Here is the input schema:\n```\n{input_schema}\n```\n\nHere is the output schema:\n```\n{output_schema}\n```\nNow output the results for the following inputs:\n```\n{inputs}\n```&quot;, &quot;num_retries_on_parser_failure&quot;: 4}}}, &quot;reflection&quot;: {&quot;feedback&quot;: &quot;The generated essay topics are relevant to the history domain and satisfy the task description and task parameters. The content is appropriate, and no relevant information is missing from the all_chains and all_prompts fields.&quot;, &quot;evaluation&quot;: &quot;The output is satisfying as it provides two essay topics related to the history domain. There is nothing wrong or missing in the output.&quot;, &quot;hyperparameter_suggestion&quot;: &quot;The current hyperparameters seem to be working well for this task. No changes are needed at the moment.&quot;, &quot;hyperparameter_missing&quot;: &quot;There are no missing hyperparameters that need to be added for this task, as the current hyperparameters are providing satisfactory results.&quot;}}, {&quot;task_parameters&quot;: {&quot;domain&quot;: &quot;technology&quot;, &quot;n&quot;: 3}, &quot;hyperparameters&quot;: {&quot;blackboard_pagi_prompt_optimizer_llm_function&quot;: {&quot;LLMStructuredPrompt_query&quot;: {&quot;json_dumps_kwargs&quot;: {&quot;indent&quot;: 0}, &quot;additional_definitions_prompt_template&quot;: &quot;Here is the schema for additional data types:\n```\n{additional_definitions}\n```\n\n&quot;, &quot;llm_structured_prompt_template&quot;: &quot;{docstring}\n\nThe input and output are formatted as a JSON interface that conforms to the JSON schemas below.\n\nAs an example, for the schema {{\&quot;properties\&quot;: {{\&quot;foo\&quot;: {{\&quot;description\&quot;: \&quot;a list of strings\&quot;, \&quot;type\&quot;: \&quot;array\&quot;, \&quot;items\&quot;: {{\&quot;type\&quot;: \&quot;string\&quot;}}}}}}, \&quot;required\&quot;: [\&quot;foo\&quot;]}}}} the object {{\&quot;foo\&quot;: [\&quot;bar\&quot;, \&quot;baz\&quot;]}} is a well-formatted instance of the schema. The object {{\&quot;properties\&quot;: {{\&quot;foo\&quot;: [\&quot;bar\&quot;, \&quot;baz\&quot;]}}}} is not well-formatted.\n\n{optional_additional_definitions_prompt}Here is the input schema:\n```\n{input_schema}\n```\n\nHere is the output schema:\n```\n{output_schema}\n```\nNow output the results for the following inputs:\n```\n{inputs}\n```&quot;, &quot;num_retries_on_parser_failure&quot;: 4}}}, &quot;reflection&quot;: {&quot;feedback&quot;: &quot;The generated essay topics are relevant to the technology domain and satisfy the task description and task parameters. The content is appropriate and does not require any additional information from the all_chains and all_prompts fields.&quot;, &quot;evaluation&quot;: &quot;The output is satisfying as it provides three distinct essay topics related to the technology domain. There is no apparent issue or missing information.&quot;, &quot;hyperparameter_suggestion&quot;: &quot;The current hyperparameters seem to be working well for this task. No immediate changes are necessary.&quot;, &quot;hyperparameter_missing&quot;: &quot;There are no missing hyperparameters that need to be added for this task, as the current hyperparameters are producing satisfactory results.&quot;}}], &quot;best_hyperparameters&quot;: {&quot;blackboard_pagi_prompt_optimizer_llm_function&quot;: {&quot;LLMStructuredPrompt_query&quot;: {&quot;json_dumps_kwargs&quot;: {&quot;indent&quot;: 0}, &quot;additional_definitions_prompt_template&quot;: &quot;Here is the schema for additional data types:\n```\n{additional_definitions}\n```\n\n&quot;, &quot;llm_structured_prompt_template&quot;: &quot;{docstring}\n\nThe input and output are formatted as a JSON interface that conforms to the JSON schemas below.\n\nAs an example, for the schema {{\&quot;properties\&quot;: {{\&quot;foo\&quot;: {{\&quot;description\&quot;: \&quot;a list of strings\&quot;, \&quot;type\&quot;: \&quot;array\&quot;, \&quot;items\&quot;: {{\&quot;type\&quot;: \&quot;string\&quot;}}}}}}, \&quot;required\&quot;: [\&quot;foo\&quot;]}}}} the object {{\&quot;foo\&quot;: [\&quot;bar\&quot;, \&quot;baz\&quot;]}} is a well-formatted instance of the schema. The object {{\&quot;properties\&quot;: {{\&quot;foo\&quot;: [\&quot;bar\&quot;, \&quot;baz\&quot;]}}}} is not well-formatted.\n\n{optional_additional_definitions_prompt}Here is the input schema:\n```\n{input_schema}\n```\n\nHere is the output schema:\n```\n{output_schema}\n```\nNow output the results for the following inputs:\n```\n{inputs}\n```&quot;, &quot;num_retries_on_parser_failure&quot;: 3}}}}]}, &quot;result&quot;: {&quot;considerations&quot;: [&quot;The generated essay topics are relevant and satisfy the task description and parameters.&quot;, &quot;The current hyperparameters are providing satisfactory results.&quot;, &quot;No immediate changes are necessary.&quot;], &quot;probability&quot;: 0.9}}, &quot;children&quot;: []}" id="29" width="2.3996247306486946%" x="46.90888510893764%" y="1.8em"><defs /><rect data-id="29" fill="#2aa198" height="1.7em" id="29_box" onclick="handleClick(evt)" rx="2" ry="2" width="99.5%" x="2px" y="0" /><text clip-path="url(#29_clip)" fill="black" font-family="Arial" font-size="1em" pointer-events="none" x="4px" y="1.35em">probability_for_improvement</text><svg data-raw="{&quot;kind&quot;: &quot;CHAIN&quot;, &quot;name&quot;: &quot;LLMStructuredPrompt&quot;, &quot;event_id&quot;: 30, &quot;start_time_ms&quot;: 1684491091181, &quot;end_time_ms&quot;: 1684491104804, &quot;running&quot;: false, &quot;delta_frame_infos&quot;: [{&quot;module&quot;: &quot;blackboard_pagi.prompt_optimizer.llm_function&quot;, &quot;lineno&quot;: 758, &quot;function&quot;: &quot;__call__&quot;, &quot;code_context&quot;: null, &quot;index&quot;: null}, {&quot;module&quot;: &quot;blackboard_pagi.utils.tracer.trace_builder&quot;, &quot;lineno&quot;: 345, &quot;function&quot;: &quot;__call__&quot;, &quot;code_context&quot;: null, &quot;index&quot;: null}, {&quot;module&quot;: &quot;blackboard_pagi.prompt_optimizer.track_hyperparameters&quot;, &quot;lineno&quot;: 325, &quot;function&quot;: &quot;__call__&quot;, &quot;code_context&quot;: null, &quot;index&quot;: null}], &quot;properties&quot;: {&quot;arguments&quot;: {&quot;optimization_info&quot;: {&quot;older_task_summary&quot;: null, &quot;task_infos&quot;: [{&quot;task_parameters&quot;: {&quot;domain&quot;: &quot;comedy&quot;, &quot;n&quot;: 2}, &quot;hyperparameters&quot;: {&quot;blackboard_pagi_prompt_optimizer_llm_function&quot;: {&quot;LLMStructuredPrompt_query&quot;: {&quot;json_dumps_kwargs&quot;: {&quot;indent&quot;: 0}, &quot;additional_definitions_prompt_template&quot;: &quot;Here is the schema for additional data types:\n```\n{additional_definitions}\n```\n\n&quot;, &quot;llm_structured_prompt_template&quot;: &quot;{docstring}\n\nThe input and output are formatted as a JSON interface that conforms to the JSON schemas below.\n\nAs an example, for the schema {{\&quot;properties\&quot;: {{\&quot;foo\&quot;: {{\&quot;description\&quot;: \&quot;a list of strings\&quot;, \&quot;type\&quot;: \&quot;array\&quot;, \&quot;items\&quot;: {{\&quot;type\&quot;: \&quot;string\&quot;}}}}}}, \&quot;required\&quot;: [\&quot;foo\&quot;]}}}} the object {{\&quot;foo\&quot;: [\&quot;bar\&quot;, \&quot;baz\&quot;]}} is a well-formatted instance of the schema. The object {{\&quot;properties\&quot;: {{\&quot;foo\&quot;: [\&quot;bar\&quot;, \&quot;baz\&quot;]}}}} is not well-formatted.\n\n{optional_additional_definitions_prompt}Here is the input schema:\n```\n{input_schema}\n```\n\nHere is the output schema:\n```\n{output_schema}\n```\nNow output the results for the following inputs:\n```\n{inputs}\n```&quot;, &quot;num_retries_on_parser_failure&quot;: 3}}}, &quot;reflection&quot;: {&quot;feedback&quot;: &quot;The generated essay topics are relevant to the comedy domain and satisfy the task description and task parameters. The content is appropriate and contains relevant information.&quot;, &quot;evaluation&quot;: &quot;The output is satisfying as it provides two essay topics related to the comedy domain. There is nothing wrong or missing in the output.&quot;, &quot;hyperparameter_suggestion&quot;: &quot;The current hyperparameters seem to be working well for this task. There is no immediate need to change them.&quot;, &quot;hyperparameter_missing&quot;: &quot;There are no missing hyperparameters that need to be added for this task, as the current hyperparameters are providing satisfactory results.&quot;}}, {&quot;task_parameters&quot;: {&quot;domain&quot;: &quot;comedy&quot;, &quot;n&quot;: 2}, &quot;hyperparameters&quot;: {&quot;blackboard_pagi_prompt_optimizer_llm_function&quot;: {&quot;LLMStructuredPrompt_query&quot;: {&quot;json_dumps_kwargs&quot;: {&quot;indent&quot;: 0}, &quot;additional_definitions_prompt_template&quot;: &quot;Here is the schema for additional data types:\n```\n{additional_definitions}\n```\n\n&quot;, &quot;llm_structured_prompt_template&quot;: &quot;{docstring}\n\nThe input and output are formatted as a JSON interface that conforms to the JSON schemas below.\n\nAs an example, for the schema {{\&quot;properties\&quot;: {{\&quot;foo\&quot;: {{\&quot;description\&quot;: \&quot;a list of strings\&quot;, \&quot;type\&quot;: \&quot;array\&quot;, \&quot;items\&quot;: {{\&quot;type\&quot;: \&quot;string\&quot;}}}}}}, \&quot;required\&quot;: [\&quot;foo\&quot;]}}}} the object {{\&quot;foo\&quot;: [\&quot;bar\&quot;, \&quot;baz\&quot;]}} is a well-formatted instance of the schema. The object {{\&quot;properties\&quot;: {{\&quot;foo\&quot;: [\&quot;bar\&quot;, \&quot;baz\&quot;]}}}} is not well-formatted.\n\n{optional_additional_definitions_prompt}Here is the input schema:\n```\n{input_schema}\n```\n\nHere is the output schema:\n```\n{output_schema}\n```\nNow output the results for the following inputs:\n```\n{inputs}\n```&quot;, &quot;num_retries_on_parser_failure&quot;: 3}}}, &quot;reflection&quot;: {&quot;feedback&quot;: &quot;The generated essay topics are relevant to the comedy domain and satisfy the task description and parameters. The content is appropriate and contains relevant information.&quot;, &quot;evaluation&quot;: &quot;The output is satisfying as it provides two essay topics related to the comedy domain. There is nothing wrong or missing in the output.&quot;, &quot;hyperparameter_suggestion&quot;: &quot;The current hyperparameters seem to be working well for this task. No changes are suggested at this time.&quot;, &quot;hyperparameter_missing&quot;: &quot;There are no missing hyperparameters that need to be added for this task, as the current hyperparameters are providing satisfactory results.&quot;}}, {&quot;task_parameters&quot;: {&quot;domain&quot;: &quot;history&quot;, &quot;n&quot;: 2}, &quot;hyperparameters&quot;: {&quot;blackboard_pagi_prompt_optimizer_llm_function&quot;: {&quot;LLMStructuredPrompt_query&quot;: {&quot;json_dumps_kwargs&quot;: {&quot;indent&quot;: 0}, &quot;additional_definitions_prompt_template&quot;: &quot;Here is the schema for additional data types:\n```\n{additional_definitions}\n```\n\n&quot;, &quot;llm_structured_prompt_template&quot;: &quot;{docstring}\n\nThe input and output are formatted as a JSON interface that conforms to the JSON schemas below.\n\nAs an example, for the schema {{\&quot;properties\&quot;: {{\&quot;foo\&quot;: {{\&quot;description\&quot;: \&quot;a list of strings\&quot;, \&quot;type\&quot;: \&quot;array\&quot;, \&quot;items\&quot;: {{\&quot;type\&quot;: \&quot;string\&quot;}}}}}}, \&quot;required\&quot;: [\&quot;foo\&quot;]}}}} the object {{\&quot;foo\&quot;: [\&quot;bar\&quot;, \&quot;baz\&quot;]}} is a well-formatted instance of the schema. The object {{\&quot;properties\&quot;: {{\&quot;foo\&quot;: [\&quot;bar\&quot;, \&quot;baz\&quot;]}}}} is not well-formatted.\n\n{optional_additional_definitions_prompt}Here is the input schema:\n```\n{input_schema}\n```\n\nHere is the output schema:\n```\n{output_schema}\n```\nNow output the results for the following inputs:\n```\n{inputs}\n```&quot;, &quot;num_retries_on_parser_failure&quot;: 4}}}, &quot;reflection&quot;: {&quot;feedback&quot;: &quot;The generated essay topics are relevant to the history domain and satisfy the task description and task parameters. The content is appropriate, and no relevant information is missing from the all_chains and all_prompts fields.&quot;, &quot;evaluation&quot;: &quot;The output is satisfying as it provides two essay topics related to the history domain. There is nothing wrong or missing in the output.&quot;, &quot;hyperparameter_suggestion&quot;: &quot;The current hyperparameters seem to be working well for this task. No changes are needed at the moment.&quot;, &quot;hyperparameter_missing&quot;: &quot;There are no missing hyperparameters that need to be added for this task, as the current hyperparameters are providing satisfactory results.&quot;}}, {&quot;task_parameters&quot;: {&quot;domain&quot;: &quot;technology&quot;, &quot;n&quot;: 3}, &quot;hyperparameters&quot;: {&quot;blackboard_pagi_prompt_optimizer_llm_function&quot;: {&quot;LLMStructuredPrompt_query&quot;: {&quot;json_dumps_kwargs&quot;: {&quot;indent&quot;: 0}, &quot;additional_definitions_prompt_template&quot;: &quot;Here is the schema for additional data types:\n```\n{additional_definitions}\n```\n\n&quot;, &quot;llm_structured_prompt_template&quot;: &quot;{docstring}\n\nThe input and output are formatted as a JSON interface that conforms to the JSON schemas below.\n\nAs an example, for the schema {{\&quot;properties\&quot;: {{\&quot;foo\&quot;: {{\&quot;description\&quot;: \&quot;a list of strings\&quot;, \&quot;type\&quot;: \&quot;array\&quot;, \&quot;items\&quot;: {{\&quot;type\&quot;: \&quot;string\&quot;}}}}}}, \&quot;required\&quot;: [\&quot;foo\&quot;]}}}} the object {{\&quot;foo\&quot;: [\&quot;bar\&quot;, \&quot;baz\&quot;]}} is a well-formatted instance of the schema. The object {{\&quot;properties\&quot;: {{\&quot;foo\&quot;: [\&quot;bar\&quot;, \&quot;baz\&quot;]}}}} is not well-formatted.\n\n{optional_additional_definitions_prompt}Here is the input schema:\n```\n{input_schema}\n```\n\nHere is the output schema:\n```\n{output_schema}\n```\nNow output the results for the following inputs:\n```\n{inputs}\n```&quot;, &quot;num_retries_on_parser_failure&quot;: 4}}}, &quot;reflection&quot;: {&quot;feedback&quot;: &quot;The generated essay topics are relevant to the technology domain and satisfy the task description and task parameters. The content is appropriate and does not require any additional information from the all_chains and all_prompts fields.&quot;, &quot;evaluation&quot;: &quot;The output is satisfying as it provides three distinct essay topics related to the technology domain. There is no apparent issue or missing information.&quot;, &quot;hyperparameter_suggestion&quot;: &quot;The current hyperparameters seem to be working well for this task. No immediate changes are necessary.&quot;, &quot;hyperparameter_missing&quot;: &quot;There are no missing hyperparameters that need to be added for this task, as the current hyperparameters are producing satisfactory results.&quot;}}], &quot;best_hyperparameters&quot;: {&quot;blackboard_pagi_prompt_optimizer_llm_function&quot;: {&quot;LLMStructuredPrompt_query&quot;: {&quot;json_dumps_kwargs&quot;: {&quot;indent&quot;: 0}, &quot;additional_definitions_prompt_template&quot;: &quot;Here is the schema for additional data types:\n```\n{additional_definitions}\n```\n\n&quot;, &quot;llm_structured_prompt_template&quot;: &quot;{docstring}\n\nThe input and output are formatted as a JSON interface that conforms to the JSON schemas below.\n\nAs an example, for the schema {{\&quot;properties\&quot;: {{\&quot;foo\&quot;: {{\&quot;description\&quot;: \&quot;a list of strings\&quot;, \&quot;type\&quot;: \&quot;array\&quot;, \&quot;items\&quot;: {{\&quot;type\&quot;: \&quot;string\&quot;}}}}}}, \&quot;required\&quot;: [\&quot;foo\&quot;]}}}} the object {{\&quot;foo\&quot;: [\&quot;bar\&quot;, \&quot;baz\&quot;]}} is a well-formatted instance of the schema. The object {{\&quot;properties\&quot;: {{\&quot;foo\&quot;: [\&quot;bar\&quot;, \&quot;baz\&quot;]}}}} is not well-formatted.\n\n{optional_additional_definitions_prompt}Here is the input schema:\n```\n{input_schema}\n```\n\nHere is the output schema:\n```\n{output_schema}\n```\nNow output the results for the following inputs:\n```\n{inputs}\n```&quot;, &quot;num_retries_on_parser_failure&quot;: 3}}}}}, &quot;result&quot;: {&quot;considerations&quot;: [&quot;The generated essay topics are relevant and satisfy the task description and parameters.&quot;, &quot;The current hyperparameters are providing satisfactory results.&quot;, &quot;No immediate changes are necessary.&quot;], &quot;probability&quot;: 0.9}}, &quot;children&quot;: []}" id="30" width="97.44127026918%" x="0.03648965820742262%" y="1.8em"><defs /><rect data-id="30" fill="#2aa198" height="1.7em" id="30_box" onclick="handleClick(evt)" rx="2" ry="2" width="99.5%" x="2px" y="0" /><text clip-path="url(#30_clip)" fill="black" font-family="Arial" font-size="1em" pointer-events="none" x="4px" y="1.35em">LLMStructuredPrompt</text><svg data-raw="{&quot;kind&quot;: &quot;LLM&quot;, &quot;name&quot;: &quot;TrackedChatModel&quot;, &quot;event_id&quot;: 31, &quot;start_time_ms&quot;: 1684491091193, &quot;end_time_ms&quot;: 1684491104762, &quot;running&quot;: false, &quot;delta_frame_infos&quot;: [{&quot;module&quot;: &quot;blackboard_pagi.prompts.chat_chain&quot;, &quot;lineno&quot;: 35, &quot;function&quot;: &quot;query&quot;, &quot;code_context&quot;: null, &quot;index&quot;: null}, {&quot;module&quot;: &quot;blackboard_pagi.prompt_optimizer.llm_function&quot;, &quot;lineno&quot;: 455, &quot;function&quot;: &quot;query&quot;, &quot;code_context&quot;: null, &quot;index&quot;: null}, {&quot;module&quot;: &quot;blackboard_pagi.prompt_optimizer.track_hyperparameters&quot;, &quot;lineno&quot;: 325, &quot;function&quot;: &quot;__call__&quot;, &quot;code_context&quot;: null, &quot;index&quot;: null}, {&quot;module&quot;: &quot;blackboard_pagi.prompt_optimizer.llm_function&quot;, &quot;lineno&quot;: 377, &quot;function&quot;: &quot;__call__&quot;, &quot;code_context&quot;: null, &quot;index&quot;: null}, {&quot;module&quot;: &quot;blackboard_pagi.utils.tracer.trace_builder&quot;, &quot;lineno&quot;: 345, &quot;function&quot;: &quot;__call__&quot;, &quot;code_context&quot;: null, &quot;index&quot;: null}, {&quot;module&quot;: &quot;blackboard_pagi.prompt_optimizer.llm_function&quot;, &quot;lineno&quot;: 758, &quot;function&quot;: &quot;__call__&quot;, &quot;code_context&quot;: null, &quot;index&quot;: null}], &quot;properties&quot;: {&quot;arguments&quot;: {&quot;self&quot;: {&quot;_type&quot;: &quot;ChatOpenAI&quot;}, &quot;messages&quot;: [{&quot;content&quot;: &quot;Return the probability for improvement (between 0 and 1).\n\nThis is your confidence that your next optimization steps will improve the hyperparameters given the information\nprovided. If you think that the information available is unlikely to lead to better hyperparameters, return 0.\nIf you think that the information available is very likely to lead to better hyperparameters, return 1.\nBe concise.\n\nThe input and output are formatted as a JSON interface that conforms to the JSON schemas below.\n\nAs an example, for the schema {\&quot;properties\&quot;: {\&quot;foo\&quot;: {\&quot;description\&quot;: \&quot;a list of strings\&quot;, \&quot;type\&quot;: \&quot;array\&quot;, \&quot;items\&quot;: {\&quot;type\&quot;: \&quot;string\&quot;}}}, \&quot;required\&quot;: [\&quot;foo\&quot;]}} the object {\&quot;foo\&quot;: [\&quot;bar\&quot;, \&quot;baz\&quot;]} is a well-formatted instance of the schema. The object {\&quot;properties\&quot;: {\&quot;foo\&quot;: [\&quot;bar\&quot;, \&quot;baz\&quot;]}} is not well-formatted.\n\nHere is the schema for additional data types:\n```\n{\n\&quot;CreateEssayTopicsInputs\&quot;: {\n\&quot;properties\&quot;: {\n\&quot;domain\&quot;: {\n\&quot;description\&quot;: \&quot;The domain or general area of the essay topic\&quot;,\n\&quot;type\&quot;: \&quot;string\&quot;\n},\n\&quot;n\&quot;: {\n\&quot;description\&quot;: \&quot;Number of topics to generate\&quot;,\n\&quot;type\&quot;: \&quot;integer\&quot;\n}\n},\n\&quot;required\&quot;: [\n\&quot;domain\&quot;,\n\&quot;n\&quot;\n]\n},\n\&quot;QueryHyperparameters\&quot;: {\n\&quot;properties\&quot;: {\n\&quot;json_dumps_kwargs\&quot;: {\n\&quot;default\&quot;: {\n\&quot;indent\&quot;: 0\n},\n\&quot;type\&quot;: \&quot;object\&quot;\n},\n\&quot;additional_definitions_prompt_template\&quot;: {\n\&quot;default\&quot;: \&quot;Here is the schema for additional data types:\\n```\\n{additional_definitions}\\n```\\n\\n\&quot;,\n\&quot;type\&quot;: \&quot;string\&quot;\n},\n\&quot;llm_structured_prompt_template\&quot;: {\n\&quot;description\&quot;: \&quot;The general-purpose prompt for the structured prompt execution. It tells the LLM what to do and how to read function arguments and structure return values. \&quot;,\n\&quot;default\&quot;: \&quot;{docstring}\\n\\nThe input and output are formatted as a JSON interface that conforms to the JSON schemas below.\\n\\nAs an example, for the schema {{\\\&quot;properties\\\&quot;: {{\\\&quot;foo\\\&quot;: {{\\\&quot;description\\\&quot;: \\\&quot;a list of strings\\\&quot;, \\\&quot;type\\\&quot;: \\\&quot;array\\\&quot;, \\\&quot;items\\\&quot;: {{\\\&quot;type\\\&quot;: \\\&quot;string\\\&quot;}}}}}}, \\\&quot;required\\\&quot;: [\\\&quot;foo\\\&quot;]}}}} the object {{\\\&quot;foo\\\&quot;: [\\\&quot;bar\\\&quot;, \\\&quot;baz\\\&quot;]}} is a well-formatted instance of the schema. The object {{\\\&quot;properties\\\&quot;: {{\\\&quot;foo\\\&quot;: [\\\&quot;bar\\\&quot;, \\\&quot;baz\\\&quot;]}}}} is not well-formatted.\\n\\n{optional_additional_definitions_prompt}Here is the input schema:\\n```\\n{input_schema}\\n```\\n\\nHere is the output schema:\\n```\\n{output_schema}\\n```\\nNow output the results for the following inputs:\\n```\\n{inputs}\\n```\&quot;,\n\&quot;type\&quot;: \&quot;string\&quot;\n},\n\&quot;num_retries_on_parser_failure\&quot;: {\n\&quot;default\&quot;: 3,\n\&quot;type\&quot;: \&quot;integer\&quot;\n}\n}\n},\n\&quot;blackboard_pagi_prompt_optimizer_llm_functionModule\&quot;: {\n\&quot;properties\&quot;: {\n\&quot;LLMStructuredPrompt_query\&quot;: {\n\&quot;default\&quot;: {\n\&quot;json_dumps_kwargs\&quot;: {\n\&quot;indent\&quot;: 0\n},\n\&quot;additional_definitions_prompt_template\&quot;: \&quot;Here is the schema for additional data types:\\n```\\n{additional_definitions}\\n```\\n\\n\&quot;,\n\&quot;llm_structured_prompt_template\&quot;: \&quot;{docstring}\\n\\nThe input and output are formatted as a JSON interface that conforms to the JSON schemas below.\\n\\nAs an example, for the schema {{\\\&quot;properties\\\&quot;: {{\\\&quot;foo\\\&quot;: {{\\\&quot;description\\\&quot;: \\\&quot;a list of strings\\\&quot;, \\\&quot;type\\\&quot;: \\\&quot;array\\\&quot;, \\\&quot;items\\\&quot;: {{\\\&quot;type\\\&quot;: \\\&quot;string\\\&quot;}}}}}}, \\\&quot;required\\\&quot;: [\\\&quot;foo\\\&quot;]}}}} the object {{\\\&quot;foo\\\&quot;: [\\\&quot;bar\\\&quot;, \\\&quot;baz\\\&quot;]}} is a well-formatted instance of the schema. The object {{\\\&quot;properties\\\&quot;: {{\\\&quot;foo\\\&quot;: [\\\&quot;bar\\\&quot;, \\\&quot;baz\\\&quot;]}}}} is not well-formatted.\\n\\n{optional_additional_definitions_prompt}Here is the input schema:\\n```\\n{input_schema}\\n```\\n\\nHere is the output schema:\\n```\\n{output_schema}\\n```\\nNow output the results for the following inputs:\\n```\\n{inputs}\\n```\&quot;,\n\&quot;num_retries_on_parser_failure\&quot;: 3\n},\n\&quot;allOf\&quot;: [\n{\n\&quot;$ref\&quot;: \&quot;#/definitions/QueryHyperparameters\&quot;\n}\n]\n}\n}\n},\n\&quot;Hyperparameters\&quot;: {\n\&quot;properties\&quot;: {\n\&quot;blackboard_pagi_prompt_optimizer_llm_function\&quot;: {\n\&quot;default\&quot;: {\n\&quot;LLMStructuredPrompt_query\&quot;: {\n\&quot;json_dumps_kwargs\&quot;: {\n\&quot;indent\&quot;: 0\n},\n\&quot;additional_definitions_prompt_template\&quot;: \&quot;Here is the schema for additional data types:\\n```\\n{additional_definitions}\\n```\\n\\n\&quot;,\n\&quot;llm_structured_prompt_template\&quot;: \&quot;{docstring}\\n\\nThe input and output are formatted as a JSON interface that conforms to the JSON schemas below.\\n\\nAs an example, for the schema {{\\\&quot;properties\\\&quot;: {{\\\&quot;foo\\\&quot;: {{\\\&quot;description\\\&quot;: \\\&quot;a list of strings\\\&quot;, \\\&quot;type\\\&quot;: \\\&quot;array\\\&quot;, \\\&quot;items\\\&quot;: {{\\\&quot;type\\\&quot;: \\\&quot;string\\\&quot;}}}}}}, \\\&quot;required\\\&quot;: [\\\&quot;foo\\\&quot;]}}}} the object {{\\\&quot;foo\\\&quot;: [\\\&quot;bar\\\&quot;, \\\&quot;baz\\\&quot;]}} is a well-formatted instance of the schema. The object {{\\\&quot;properties\\\&quot;: {{\\\&quot;foo\\\&quot;: [\\\&quot;bar\\\&quot;, \\\&quot;baz\\\&quot;]}}}} is not well-formatted.\\n\\n{optional_additional_definitions_prompt}Here is the input schema:\\n```\\n{input_schema}\\n```\\n\\nHere is the output schema:\\n```\\n{output_schema}\\n```\\nNow output the results for the following inputs:\\n```\\n{inputs}\\n```\&quot;,\n\&quot;num_retries_on_parser_failure\&quot;: 3\n}\n},\n\&quot;allOf\&quot;: [\n{\n\&quot;$ref\&quot;: \&quot;#/definitions/blackboard_pagi_prompt_optimizer_llm_functionModule\&quot;\n}\n]\n}\n}\n},\n\&quot;TaskReflection\&quot;: {\n\&quot;description\&quot;: \&quot;The reflections on the task.\\n\\nThis contains the lessons we learn from each task run to come up with better hyperparameters to try.\&quot;,\n\&quot;properties\&quot;: {\n\&quot;feedback\&quot;: {\n\&quot;description\&quot;: \&quot;Only look at the final results field. Does its content satisfy the task description and task parameters? Does it contain all the relevant information from the all_chains and all_prompts fields? What could be improved in the results?\&quot;,\n\&quot;type\&quot;: \&quot;string\&quot;\n},\n\&quot;evaluation\&quot;: {\n\&quot;description\&quot;: \&quot;The evaluation of the outputs given the task. Is the output satisfying? What is wrong? What is missing?\&quot;,\n\&quot;type\&quot;: \&quot;string\&quot;\n},\n\&quot;hyperparameter_suggestion\&quot;: {\n\&quot;description\&quot;: \&quot;How we want to change the hyperparameters to improve the results. What could we try to change?\&quot;,\n\&quot;type\&quot;: \&quot;string\&quot;\n},\n\&quot;hyperparameter_missing\&quot;: {\n\&quot;description\&quot;: \&quot;What hyperparameters are missing to improve the results? What could be changed that is not exposed via hyperparameters?\&quot;,\n\&quot;type\&quot;: \&quot;string\&quot;\n}\n},\n\&quot;required\&quot;: [\n\&quot;feedback\&quot;,\n\&quot;evaluation\&quot;,\n\&quot;hyperparameter_suggestion\&quot;,\n\&quot;hyperparameter_missing\&quot;\n]\n},\n\&quot;TaskInfo_CreateEssayTopicsInputs__list_str___Hyperparameters_\&quot;: {\n\&quot;description\&quot;: \&quot;The task run and the reflection on the experiment.\&quot;,\n\&quot;properties\&quot;: {\n\&quot;task_parameters\&quot;: {\n\&quot;description\&quot;: \&quot;The task parameters.\&quot;,\n\&quot;allOf\&quot;: [\n{\n\&quot;$ref\&quot;: \&quot;#/definitions/CreateEssayTopicsInputs\&quot;\n}\n]\n},\n\&quot;hyperparameters\&quot;: {\n\&quot;description\&quot;: \&quot;The hyperparameters used for the task. We optimize these.\&quot;,\n\&quot;allOf\&quot;: [\n{\n\&quot;$ref\&quot;: \&quot;#/definitions/Hyperparameters\&quot;\n}\n]\n},\n\&quot;reflection\&quot;: {\n\&quot;description\&quot;: \&quot;The reflection on the task.\&quot;,\n\&quot;allOf\&quot;: [\n{\n\&quot;$ref\&quot;: \&quot;#/definitions/TaskReflection\&quot;\n}\n]\n}\n},\n\&quot;required\&quot;: [\n\&quot;task_parameters\&quot;,\n\&quot;hyperparameters\&quot;,\n\&quot;reflection\&quot;\n]\n},\n\&quot;OptimizationInfo_CreateEssayTopicsInputs__list_str___Hyperparameters_\&quot;: {\n\&quot;description\&quot;: \&quot;The optimization information. This is the data we use to optimize the hyperparameters.\&quot;,\n\&quot;properties\&quot;: {\n\&quot;older_task_summary\&quot;: {\n\&quot;description\&quot;: \&quot;A summary of previous experiments and the proposed changes with the goal of avoiding trying the same changes repeatedly.\&quot;,\n\&quot;type\&quot;: \&quot;string\&quot;\n},\n\&quot;task_infos\&quot;: {\n\&quot;description\&quot;: \&quot;The most recent tasks we have run and our reflections on them.\&quot;,\n\&quot;type\&quot;: \&quot;array\&quot;,\n\&quot;items\&quot;: {\n\&quot;$ref\&quot;: \&quot;#/definitions/TaskInfo_CreateEssayTopicsInputs__list_str___Hyperparameters_\&quot;\n}\n},\n\&quot;best_hyperparameters\&quot;: {\n\&quot;description\&quot;: \&quot;The best hyperparameters we have found so far.\&quot;,\n\&quot;allOf\&quot;: [\n{\n\&quot;$ref\&quot;: \&quot;#/definitions/Hyperparameters\&quot;\n}\n]\n}\n},\n\&quot;required\&quot;: [\n\&quot;task_infos\&quot;,\n\&quot;best_hyperparameters\&quot;\n]\n},\n\&quot;ImprovementProbability\&quot;: {\n\&quot;properties\&quot;: {\n\&quot;considerations\&quot;: {\n\&quot;description\&quot;: \&quot;The considerations for potential improvements.\&quot;,\n\&quot;type\&quot;: \&quot;array\&quot;,\n\&quot;items\&quot;: {\n\&quot;type\&quot;: \&quot;string\&quot;\n}\n},\n\&quot;probability\&quot;: {\n\&quot;description\&quot;: \&quot;The probability of improvement.\&quot;,\n\&quot;type\&quot;: \&quot;number\&quot;\n}\n},\n\&quot;required\&quot;: [\n\&quot;considerations\&quot;,\n\&quot;probability\&quot;\n]\n}\n}\n```\n\nHere is the input schema:\n```\n{\n\&quot;properties\&quot;: {\n\&quot;optimization_info\&quot;: {\n\&quot;$ref\&quot;: \&quot;#/definitions/OptimizationInfo_CreateEssayTopicsInputs__list_str___Hyperparameters_\&quot;\n}\n},\n\&quot;required\&quot;: [\n\&quot;optimization_info\&quot;\n]\n}\n```\n\nHere is the output schema:\n```\n{\n\&quot;properties\&quot;: {\n\&quot;return_value\&quot;: {\n\&quot;$ref\&quot;: \&quot;#/definitions/ImprovementProbability\&quot;\n}\n},\n\&quot;required\&quot;: [\n\&quot;return_value\&quot;\n]\n}\n```\nNow output the results for the following inputs:\n```\n{\n\&quot;optimization_info\&quot;: {\n\&quot;older_task_summary\&quot;: null,\n\&quot;task_infos\&quot;: [\n{\n\&quot;task_parameters\&quot;: {\n\&quot;domain\&quot;: \&quot;comedy\&quot;,\n\&quot;n\&quot;: 2\n},\n\&quot;hyperparameters\&quot;: {\n\&quot;blackboard_pagi_prompt_optimizer_llm_function\&quot;: {\n\&quot;LLMStructuredPrompt_query\&quot;: {\n\&quot;json_dumps_kwargs\&quot;: {\n\&quot;indent\&quot;: 0\n},\n\&quot;additional_definitions_prompt_template\&quot;: \&quot;Here is the schema for additional data types:\\n```\\n{additional_definitions}\\n```\\n\\n\&quot;,\n\&quot;llm_structured_prompt_template\&quot;: \&quot;{docstring}\\n\\nThe input and output are formatted as a JSON interface that conforms to the JSON schemas below.\\n\\nAs an example, for the schema {{\\\&quot;properties\\\&quot;: {{\\\&quot;foo\\\&quot;: {{\\\&quot;description\\\&quot;: \\\&quot;a list of strings\\\&quot;, \\\&quot;type\\\&quot;: \\\&quot;array\\\&quot;, \\\&quot;items\\\&quot;: {{\\\&quot;type\\\&quot;: \\\&quot;string\\\&quot;}}}}}}, \\\&quot;required\\\&quot;: [\\\&quot;foo\\\&quot;]}}}} the object {{\\\&quot;foo\\\&quot;: [\\\&quot;bar\\\&quot;, \\\&quot;baz\\\&quot;]}} is a well-formatted instance of the schema. The object {{\\\&quot;properties\\\&quot;: {{\\\&quot;foo\\\&quot;: [\\\&quot;bar\\\&quot;, \\\&quot;baz\\\&quot;]}}}} is not well-formatted.\\n\\n{optional_additional_definitions_prompt}Here is the input schema:\\n```\\n{input_schema}\\n```\\n\\nHere is the output schema:\\n```\\n{output_schema}\\n```\\nNow output the results for the following inputs:\\n```\\n{inputs}\\n```\&quot;,\n\&quot;num_retries_on_parser_failure\&quot;: 3\n}\n}\n},\n\&quot;reflection\&quot;: {\n\&quot;feedback\&quot;: \&quot;The generated essay topics are relevant to the comedy domain and satisfy the task description and task parameters. The content is appropriate and contains relevant information.\&quot;,\n\&quot;evaluation\&quot;: \&quot;The output is satisfying as it provides two essay topics related to the comedy domain. There is nothing wrong or missing in the output.\&quot;,\n\&quot;hyperparameter_suggestion\&quot;: \&quot;The current hyperparameters seem to be working well for this task. There is no immediate need to change them.\&quot;,\n\&quot;hyperparameter_missing\&quot;: \&quot;There are no missing hyperparameters that need to be added for this task, as the current hyperparameters are providing satisfactory results.\&quot;\n}\n},\n{\n\&quot;task_parameters\&quot;: {\n\&quot;domain\&quot;: \&quot;comedy\&quot;,\n\&quot;n\&quot;: 2\n},\n\&quot;hyperparameters\&quot;: {\n\&quot;blackboard_pagi_prompt_optimizer_llm_function\&quot;: {\n\&quot;LLMStructuredPrompt_query\&quot;: {\n\&quot;json_dumps_kwargs\&quot;: {\n\&quot;indent\&quot;: 0\n},\n\&quot;additional_definitions_prompt_template\&quot;: \&quot;Here is the schema for additional data types:\\n```\\n{additional_definitions}\\n```\\n\\n\&quot;,\n\&quot;llm_structured_prompt_template\&quot;: \&quot;{docstring}\\n\\nThe input and output are formatted as a JSON interface that conforms to the JSON schemas below.\\n\\nAs an example, for the schema {{\\\&quot;properties\\\&quot;: {{\\\&quot;foo\\\&quot;: {{\\\&quot;description\\\&quot;: \\\&quot;a list of strings\\\&quot;, \\\&quot;type\\\&quot;: \\\&quot;array\\\&quot;, \\\&quot;items\\\&quot;: {{\\\&quot;type\\\&quot;: \\\&quot;string\\\&quot;}}}}}}, \\\&quot;required\\\&quot;: [\\\&quot;foo\\\&quot;]}}}} the object {{\\\&quot;foo\\\&quot;: [\\\&quot;bar\\\&quot;, \\\&quot;baz\\\&quot;]}} is a well-formatted instance of the schema. The object {{\\\&quot;properties\\\&quot;: {{\\\&quot;foo\\\&quot;: [\\\&quot;bar\\\&quot;, \\\&quot;baz\\\&quot;]}}}} is not well-formatted.\\n\\n{optional_additional_definitions_prompt}Here is the input schema:\\n```\\n{input_schema}\\n```\\n\\nHere is the output schema:\\n```\\n{output_schema}\\n```\\nNow output the results for the following inputs:\\n```\\n{inputs}\\n```\&quot;,\n\&quot;num_retries_on_parser_failure\&quot;: 3\n}\n}\n},\n\&quot;reflection\&quot;: {\n\&quot;feedback\&quot;: \&quot;The generated essay topics are relevant to the comedy domain and satisfy the task description and parameters. The content is appropriate and contains relevant information.\&quot;,\n\&quot;evaluation\&quot;: \&quot;The output is satisfying as it provides two essay topics related to the comedy domain. There is nothing wrong or missing in the output.\&quot;,\n\&quot;hyperparameter_suggestion\&quot;: \&quot;The current hyperparameters seem to be working well for this task. No changes are suggested at this time.\&quot;,\n\&quot;hyperparameter_missing\&quot;: \&quot;There are no missing hyperparameters that need to be added for this task, as the current hyperparameters are providing satisfactory results.\&quot;\n}\n},\n{\n\&quot;task_parameters\&quot;: {\n\&quot;domain\&quot;: \&quot;history\&quot;,\n\&quot;n\&quot;: 2\n},\n\&quot;hyperparameters\&quot;: {\n\&quot;blackboard_pagi_prompt_optimizer_llm_function\&quot;: {\n\&quot;LLMStructuredPrompt_query\&quot;: {\n\&quot;json_dumps_kwargs\&quot;: {\n\&quot;indent\&quot;: 0\n},\n\&quot;additional_definitions_prompt_template\&quot;: \&quot;Here is the schema for additional data types:\\n```\\n{additional_definitions}\\n```\\n\\n\&quot;,\n\&quot;llm_structured_prompt_template\&quot;: \&quot;{docstring}\\n\\nThe input and output are formatted as a JSON interface that conforms to the JSON schemas below.\\n\\nAs an example, for the schema {{\\\&quot;properties\\\&quot;: {{\\\&quot;foo\\\&quot;: {{\\\&quot;description\\\&quot;: \\\&quot;a list of strings\\\&quot;, \\\&quot;type\\\&quot;: \\\&quot;array\\\&quot;, \\\&quot;items\\\&quot;: {{\\\&quot;type\\\&quot;: \\\&quot;string\\\&quot;}}}}}}, \\\&quot;required\\\&quot;: [\\\&quot;foo\\\&quot;]}}}} the object {{\\\&quot;foo\\\&quot;: [\\\&quot;bar\\\&quot;, \\\&quot;baz\\\&quot;]}} is a well-formatted instance of the schema. The object {{\\\&quot;properties\\\&quot;: {{\\\&quot;foo\\\&quot;: [\\\&quot;bar\\\&quot;, \\\&quot;baz\\\&quot;]}}}} is not well-formatted.\\n\\n{optional_additional_definitions_prompt}Here is the input schema:\\n```\\n{input_schema}\\n```\\n\\nHere is the output schema:\\n```\\n{output_schema}\\n```\\nNow output the results for the following inputs:\\n```\\n{inputs}\\n```\&quot;,\n\&quot;num_retries_on_parser_failure\&quot;: 4\n}\n}\n},\n\&quot;reflection\&quot;: {\n\&quot;feedback\&quot;: \&quot;The generated essay topics are relevant to the history domain and satisfy the task description and task parameters. The content is appropriate, and no relevant information is missing from the all_chains and all_prompts fields.\&quot;,\n\&quot;evaluation\&quot;: \&quot;The output is satisfying as it provides two essay topics related to the history domain. There is nothing wrong or missing in the output.\&quot;,\n\&quot;hyperparameter_suggestion\&quot;: \&quot;The current hyperparameters seem to be working well for this task. No changes are needed at the moment.\&quot;,\n\&quot;hyperparameter_missing\&quot;: \&quot;There are no missing hyperparameters that need to be added for this task, as the current hyperparameters are providing satisfactory results.\&quot;\n}\n},\n{\n\&quot;task_parameters\&quot;: {\n\&quot;domain\&quot;: \&quot;technology\&quot;,\n\&quot;n\&quot;: 3\n},\n\&quot;hyperparameters\&quot;: {\n\&quot;blackboard_pagi_prompt_optimizer_llm_function\&quot;: {\n\&quot;LLMStructuredPrompt_query\&quot;: {\n\&quot;json_dumps_kwargs\&quot;: {\n\&quot;indent\&quot;: 0\n},\n\&quot;additional_definitions_prompt_template\&quot;: \&quot;Here is the schema for additional data types:\\n```\\n{additional_definitions}\\n```\\n\\n\&quot;,\n\&quot;llm_structured_prompt_template\&quot;: \&quot;{docstring}\\n\\nThe input and output are formatted as a JSON interface that conforms to the JSON schemas below.\\n\\nAs an example, for the schema {{\\\&quot;properties\\\&quot;: {{\\\&quot;foo\\\&quot;: {{\\\&quot;description\\\&quot;: \\\&quot;a list of strings\\\&quot;, \\\&quot;type\\\&quot;: \\\&quot;array\\\&quot;, \\\&quot;items\\\&quot;: {{\\\&quot;type\\\&quot;: \\\&quot;string\\\&quot;}}}}}}, \\\&quot;required\\\&quot;: [\\\&quot;foo\\\&quot;]}}}} the object {{\\\&quot;foo\\\&quot;: [\\\&quot;bar\\\&quot;, \\\&quot;baz\\\&quot;]}} is a well-formatted instance of the schema. The object {{\\\&quot;properties\\\&quot;: {{\\\&quot;foo\\\&quot;: [\\\&quot;bar\\\&quot;, \\\&quot;baz\\\&quot;]}}}} is not well-formatted.\\n\\n{optional_additional_definitions_prompt}Here is the input schema:\\n```\\n{input_schema}\\n```\\n\\nHere is the output schema:\\n```\\n{output_schema}\\n```\\nNow output the results for the following inputs:\\n```\\n{inputs}\\n```\&quot;,\n\&quot;num_retries_on_parser_failure\&quot;: 4\n}\n}\n},\n\&quot;reflection\&quot;: {\n\&quot;feedback\&quot;: \&quot;The generated essay topics are relevant to the technology domain and satisfy the task description and task parameters. The content is appropriate and does not require any additional information from the all_chains and all_prompts fields.\&quot;,\n\&quot;evaluation\&quot;: \&quot;The output is satisfying as it provides three distinct essay topics related to the technology domain. There is no apparent issue or missing information.\&quot;,\n\&quot;hyperparameter_suggestion\&quot;: \&quot;The current hyperparameters seem to be working well for this task. No immediate changes are necessary.\&quot;,\n\&quot;hyperparameter_missing\&quot;: \&quot;There are no missing hyperparameters that need to be added for this task, as the current hyperparameters are producing satisfactory results.\&quot;\n}\n}\n],\n\&quot;best_hyperparameters\&quot;: {\n\&quot;blackboard_pagi_prompt_optimizer_llm_function\&quot;: {\n\&quot;LLMStructuredPrompt_query\&quot;: {\n\&quot;json_dumps_kwargs\&quot;: {\n\&quot;indent\&quot;: 0\n},\n\&quot;additional_definitions_prompt_template\&quot;: \&quot;Here is the schema for additional data types:\\n```\\n{additional_definitions}\\n```\\n\\n\&quot;,\n\&quot;llm_structured_prompt_template\&quot;: \&quot;{docstring}\\n\\nThe input and output are formatted as a JSON interface that conforms to the JSON schemas below.\\n\\nAs an example, for the schema {{\\\&quot;properties\\\&quot;: {{\\\&quot;foo\\\&quot;: {{\\\&quot;description\\\&quot;: \\\&quot;a list of strings\\\&quot;, \\\&quot;type\\\&quot;: \\\&quot;array\\\&quot;, \\\&quot;items\\\&quot;: {{\\\&quot;type\\\&quot;: \\\&quot;string\\\&quot;}}}}}}, \\\&quot;required\\\&quot;: [\\\&quot;foo\\\&quot;]}}}} the object {{\\\&quot;foo\\\&quot;: [\\\&quot;bar\\\&quot;, \\\&quot;baz\\\&quot;]}} is a well-formatted instance of the schema. The object {{\\\&quot;properties\\\&quot;: {{\\\&quot;foo\\\&quot;: [\\\&quot;bar\\\&quot;, \\\&quot;baz\\\&quot;]}}}} is not well-formatted.\\n\\n{optional_additional_definitions_prompt}Here is the input schema:\\n```\\n{input_schema}\\n```\\n\\nHere is the output schema:\\n```\\n{output_schema}\\n```\\nNow output the results for the following inputs:\\n```\\n{inputs}\\n```\&quot;,\n\&quot;num_retries_on_parser_failure\&quot;: 3\n}\n}\n}\n}\n}\n```&quot;, &quot;additional_kwargs&quot;: {}}]}, &quot;result&quot;: {&quot;content&quot;: &quot;{\n  \&quot;return_value\&quot;: {\n    \&quot;considerations\&quot;: [\n      \&quot;The generated essay topics are relevant and satisfy the task description and parameters.\&quot;,\n      \&quot;The current hyperparameters are providing satisfactory results.\&quot;,\n      \&quot;No immediate changes are necessary.\&quot;\n    ],\n    \&quot;probability\&quot;: 0.9\n  }\n}&quot;, &quot;additional_kwargs&quot;: {}}}, &quot;children&quot;: []}" id="31" width="96.16205824961462%" x="0.08764589297511562%" y="1.8em"><defs /><rect data-id="31" fill="#268bd2" height="1.7em" id="31_box" onclick="handleClick(evt)" rx="2" ry="2" width="99.5%" x="2px" y="0" /><text clip-path="url(#31_clip)" fill="black" font-family="Arial" font-size="1em" pointer-events="none" x="4px" y="1.35em">TrackedChatModel</text></svg></svg></svg><svg data-raw="{&quot;kind&quot;: &quot;CHAIN&quot;, &quot;name&quot;: &quot;suggest_next_optimization_step&quot;, &quot;event_id&quot;: 32, &quot;start_time_ms&quot;: 1684491104818, &quot;end_time_ms&quot;: 1684491239365, &quot;running&quot;: false, &quot;delta_frame_infos&quot;: [{&quot;module&quot;: &quot;blackboard_pagi.prompt_optimizer.track_hyperparameters&quot;, &quot;lineno&quot;: 325, &quot;function&quot;: &quot;__call__&quot;, &quot;code_context&quot;: null, &quot;index&quot;: null}], &quot;properties&quot;: {&quot;arguments&quot;: {&quot;self&quot;: &quot;&lt;blackboard_pagi.prompt_optimizer.llm_function.LLMFunction object at 0x169e21810&gt;&quot;, &quot;language_model_or_chat_chain&quot;: {&quot;chat_model&quot;: {&quot;_type&quot;: &quot;ChatOpenAI&quot;}, &quot;messages&quot;: []}, &quot;args&quot;: [{&quot;older_task_summary&quot;: null, &quot;task_infos&quot;: [{&quot;task_parameters&quot;: {&quot;domain&quot;: &quot;comedy&quot;, &quot;n&quot;: 2}, &quot;hyperparameters&quot;: {&quot;blackboard_pagi_prompt_optimizer_llm_function&quot;: {&quot;LLMStructuredPrompt_query&quot;: {&quot;json_dumps_kwargs&quot;: {&quot;indent&quot;: 0}, &quot;additional_definitions_prompt_template&quot;: &quot;Here is the schema for additional data types:\n```\n{additional_definitions}\n```\n\n&quot;, &quot;llm_structured_prompt_template&quot;: &quot;{docstring}\n\nThe input and output are formatted as a JSON interface that conforms to the JSON schemas below.\n\nAs an example, for the schema {{\&quot;properties\&quot;: {{\&quot;foo\&quot;: {{\&quot;description\&quot;: \&quot;a list of strings\&quot;, \&quot;type\&quot;: \&quot;array\&quot;, \&quot;items\&quot;: {{\&quot;type\&quot;: \&quot;string\&quot;}}}}}}, \&quot;required\&quot;: [\&quot;foo\&quot;]}}}} the object {{\&quot;foo\&quot;: [\&quot;bar\&quot;, \&quot;baz\&quot;]}} is a well-formatted instance of the schema. The object {{\&quot;properties\&quot;: {{\&quot;foo\&quot;: [\&quot;bar\&quot;, \&quot;baz\&quot;]}}}} is not well-formatted.\n\n{optional_additional_definitions_prompt}Here is the input schema:\n```\n{input_schema}\n```\n\nHere is the output schema:\n```\n{output_schema}\n```\nNow output the results for the following inputs:\n```\n{inputs}\n```&quot;, &quot;num_retries_on_parser_failure&quot;: 3}}}, &quot;reflection&quot;: {&quot;feedback&quot;: &quot;The generated essay topics are relevant to the comedy domain and satisfy the task description and task parameters. The content is appropriate and contains relevant information.&quot;, &quot;evaluation&quot;: &quot;The output is satisfying as it provides two essay topics related to the comedy domain. There is nothing wrong or missing in the output.&quot;, &quot;hyperparameter_suggestion&quot;: &quot;The current hyperparameters seem to be working well for this task. There is no immediate need to change them.&quot;, &quot;hyperparameter_missing&quot;: &quot;There are no missing hyperparameters that need to be added for this task, as the current hyperparameters are providing satisfactory results.&quot;}}, {&quot;task_parameters&quot;: {&quot;domain&quot;: &quot;comedy&quot;, &quot;n&quot;: 2}, &quot;hyperparameters&quot;: {&quot;blackboard_pagi_prompt_optimizer_llm_function&quot;: {&quot;LLMStructuredPrompt_query&quot;: {&quot;json_dumps_kwargs&quot;: {&quot;indent&quot;: 0}, &quot;additional_definitions_prompt_template&quot;: &quot;Here is the schema for additional data types:\n```\n{additional_definitions}\n```\n\n&quot;, &quot;llm_structured_prompt_template&quot;: &quot;{docstring}\n\nThe input and output are formatted as a JSON interface that conforms to the JSON schemas below.\n\nAs an example, for the schema {{\&quot;properties\&quot;: {{\&quot;foo\&quot;: {{\&quot;description\&quot;: \&quot;a list of strings\&quot;, \&quot;type\&quot;: \&quot;array\&quot;, \&quot;items\&quot;: {{\&quot;type\&quot;: \&quot;string\&quot;}}}}}}, \&quot;required\&quot;: [\&quot;foo\&quot;]}}}} the object {{\&quot;foo\&quot;: [\&quot;bar\&quot;, \&quot;baz\&quot;]}} is a well-formatted instance of the schema. The object {{\&quot;properties\&quot;: {{\&quot;foo\&quot;: [\&quot;bar\&quot;, \&quot;baz\&quot;]}}}} is not well-formatted.\n\n{optional_additional_definitions_prompt}Here is the input schema:\n```\n{input_schema}\n```\n\nHere is the output schema:\n```\n{output_schema}\n```\nNow output the results for the following inputs:\n```\n{inputs}\n```&quot;, &quot;num_retries_on_parser_failure&quot;: 3}}}, &quot;reflection&quot;: {&quot;feedback&quot;: &quot;The generated essay topics are relevant to the comedy domain and satisfy the task description and parameters. The content is appropriate and contains relevant information.&quot;, &quot;evaluation&quot;: &quot;The output is satisfying as it provides two essay topics related to the comedy domain. There is nothing wrong or missing in the output.&quot;, &quot;hyperparameter_suggestion&quot;: &quot;The current hyperparameters seem to be working well for this task. No changes are suggested at this time.&quot;, &quot;hyperparameter_missing&quot;: &quot;There are no missing hyperparameters that need to be added for this task, as the current hyperparameters are providing satisfactory results.&quot;}}, {&quot;task_parameters&quot;: {&quot;domain&quot;: &quot;history&quot;, &quot;n&quot;: 2}, &quot;hyperparameters&quot;: {&quot;blackboard_pagi_prompt_optimizer_llm_function&quot;: {&quot;LLMStructuredPrompt_query&quot;: {&quot;json_dumps_kwargs&quot;: {&quot;indent&quot;: 0}, &quot;additional_definitions_prompt_template&quot;: &quot;Here is the schema for additional data types:\n```\n{additional_definitions}\n```\n\n&quot;, &quot;llm_structured_prompt_template&quot;: &quot;{docstring}\n\nThe input and output are formatted as a JSON interface that conforms to the JSON schemas below.\n\nAs an example, for the schema {{\&quot;properties\&quot;: {{\&quot;foo\&quot;: {{\&quot;description\&quot;: \&quot;a list of strings\&quot;, \&quot;type\&quot;: \&quot;array\&quot;, \&quot;items\&quot;: {{\&quot;type\&quot;: \&quot;string\&quot;}}}}}}, \&quot;required\&quot;: [\&quot;foo\&quot;]}}}} the object {{\&quot;foo\&quot;: [\&quot;bar\&quot;, \&quot;baz\&quot;]}} is a well-formatted instance of the schema. The object {{\&quot;properties\&quot;: {{\&quot;foo\&quot;: [\&quot;bar\&quot;, \&quot;baz\&quot;]}}}} is not well-formatted.\n\n{optional_additional_definitions_prompt}Here is the input schema:\n```\n{input_schema}\n```\n\nHere is the output schema:\n```\n{output_schema}\n```\nNow output the results for the following inputs:\n```\n{inputs}\n```&quot;, &quot;num_retries_on_parser_failure&quot;: 4}}}, &quot;reflection&quot;: {&quot;feedback&quot;: &quot;The generated essay topics are relevant to the history domain and satisfy the task description and task parameters. The content is appropriate, and no relevant information is missing from the all_chains and all_prompts fields.&quot;, &quot;evaluation&quot;: &quot;The output is satisfying as it provides two essay topics related to the history domain. There is nothing wrong or missing in the output.&quot;, &quot;hyperparameter_suggestion&quot;: &quot;The current hyperparameters seem to be working well for this task. No changes are needed at the moment.&quot;, &quot;hyperparameter_missing&quot;: &quot;There are no missing hyperparameters that need to be added for this task, as the current hyperparameters are providing satisfactory results.&quot;}}, {&quot;task_parameters&quot;: {&quot;domain&quot;: &quot;technology&quot;, &quot;n&quot;: 3}, &quot;hyperparameters&quot;: {&quot;blackboard_pagi_prompt_optimizer_llm_function&quot;: {&quot;LLMStructuredPrompt_query&quot;: {&quot;json_dumps_kwargs&quot;: {&quot;indent&quot;: 0}, &quot;additional_definitions_prompt_template&quot;: &quot;Here is the schema for additional data types:\n```\n{additional_definitions}\n```\n\n&quot;, &quot;llm_structured_prompt_template&quot;: &quot;{docstring}\n\nThe input and output are formatted as a JSON interface that conforms to the JSON schemas below.\n\nAs an example, for the schema {{\&quot;properties\&quot;: {{\&quot;foo\&quot;: {{\&quot;description\&quot;: \&quot;a list of strings\&quot;, \&quot;type\&quot;: \&quot;array\&quot;, \&quot;items\&quot;: {{\&quot;type\&quot;: \&quot;string\&quot;}}}}}}, \&quot;required\&quot;: [\&quot;foo\&quot;]}}}} the object {{\&quot;foo\&quot;: [\&quot;bar\&quot;, \&quot;baz\&quot;]}} is a well-formatted instance of the schema. The object {{\&quot;properties\&quot;: {{\&quot;foo\&quot;: [\&quot;bar\&quot;, \&quot;baz\&quot;]}}}} is not well-formatted.\n\n{optional_additional_definitions_prompt}Here is the input schema:\n```\n{input_schema}\n```\n\nHere is the output schema:\n```\n{output_schema}\n```\nNow output the results for the following inputs:\n```\n{inputs}\n```&quot;, &quot;num_retries_on_parser_failure&quot;: 4}}}, &quot;reflection&quot;: {&quot;feedback&quot;: &quot;The generated essay topics are relevant to the technology domain and satisfy the task description and task parameters. The content is appropriate and does not require any additional information from the all_chains and all_prompts fields.&quot;, &quot;evaluation&quot;: &quot;The output is satisfying as it provides three distinct essay topics related to the technology domain. There is no apparent issue or missing information.&quot;, &quot;hyperparameter_suggestion&quot;: &quot;The current hyperparameters seem to be working well for this task. No immediate changes are necessary.&quot;, &quot;hyperparameter_missing&quot;: &quot;There are no missing hyperparameters that need to be added for this task, as the current hyperparameters are producing satisfactory results.&quot;}}], &quot;best_hyperparameters&quot;: {&quot;blackboard_pagi_prompt_optimizer_llm_function&quot;: {&quot;LLMStructuredPrompt_query&quot;: {&quot;json_dumps_kwargs&quot;: {&quot;indent&quot;: 0}, &quot;additional_definitions_prompt_template&quot;: &quot;Here is the schema for additional data types:\n```\n{additional_definitions}\n```\n\n&quot;, &quot;llm_structured_prompt_template&quot;: &quot;{docstring}\n\nThe input and output are formatted as a JSON interface that conforms to the JSON schemas below.\n\nAs an example, for the schema {{\&quot;properties\&quot;: {{\&quot;foo\&quot;: {{\&quot;description\&quot;: \&quot;a list of strings\&quot;, \&quot;type\&quot;: \&quot;array\&quot;, \&quot;items\&quot;: {{\&quot;type\&quot;: \&quot;string\&quot;}}}}}}, \&quot;required\&quot;: [\&quot;foo\&quot;]}}}} the object {{\&quot;foo\&quot;: [\&quot;bar\&quot;, \&quot;baz\&quot;]}} is a well-formatted instance of the schema. The object {{\&quot;properties\&quot;: {{\&quot;foo\&quot;: [\&quot;bar\&quot;, \&quot;baz\&quot;]}}}} is not well-formatted.\n\n{optional_additional_definitions_prompt}Here is the input schema:\n```\n{input_schema}\n```\n\nHere is the output schema:\n```\n{output_schema}\n```\nNow output the results for the following inputs:\n```\n{inputs}\n```&quot;, &quot;num_retries_on_parser_failure&quot;: 3}}}}]}, &quot;result&quot;: {&quot;best_hyperparameters&quot;: {&quot;blackboard_pagi_prompt_optimizer_llm_function&quot;: {&quot;LLMStructuredPrompt_query&quot;: {&quot;json_dumps_kwargs&quot;: {&quot;indent&quot;: 0}, &quot;additional_definitions_prompt_template&quot;: &quot;Here is the schema for additional data types:\n```\n{additional_definitions}\n```\n\n&quot;, &quot;llm_structured_prompt_template&quot;: &quot;{docstring}\n\nThe input and output are formatted as a JSON interface that conforms to the JSON schemas below.\n\nAs an example, for the schema {{\&quot;properties\&quot;: {{\&quot;foo\&quot;: {{\&quot;description\&quot;: \&quot;a list of strings\&quot;, \&quot;type\&quot;: \&quot;array\&quot;, \&quot;items\&quot;: {{\&quot;type\&quot;: \&quot;string\&quot;}}}}}}, \&quot;required\&quot;: [\&quot;foo\&quot;]}}}} the object {{\&quot;foo\&quot;: [\&quot;bar\&quot;, \&quot;baz\&quot;]}} is a well-formatted instance of the schema. The object {{\&quot;properties\&quot;: {{\&quot;foo\&quot;: [\&quot;bar\&quot;, \&quot;baz\&quot;]}}}} is not well-formatted.\n\n{optional_additional_definitions_prompt}Here is the input schema:\n```\n{input_schema}\n```\n\nHere is the output schema:\n```\n{output_schema}\n```\nNow output the results for the following inputs:\n```\n{inputs}\n```&quot;, &quot;num_retries_on_parser_failure&quot;: 3}}}, &quot;suggestion&quot;: &quot;The current hyperparameters seem to be working well for the tasks. However, it might be beneficial to explore different domains and number of topics to generate to further test the performance of the model.&quot;, &quot;task_parameters_suggestions&quot;: [{&quot;domain&quot;: &quot;science&quot;, &quot;n&quot;: 2}, {&quot;domain&quot;: &quot;literature&quot;, &quot;n&quot;: 3}, {&quot;domain&quot;: &quot;philosophy&quot;, &quot;n&quot;: 2}], &quot;hyperparameter_suggestions&quot;: [{&quot;blackboard_pagi_prompt_optimizer_llm_function&quot;: {&quot;LLMStructuredPrompt_query&quot;: {&quot;json_dumps_kwargs&quot;: {&quot;indent&quot;: 0}, &quot;additional_definitions_prompt_template&quot;: &quot;Here is the schema for additional data types:\n```\n{additional_definitions}\n```\n\n&quot;, &quot;llm_structured_prompt_template&quot;: &quot;{docstring}\n\nThe input and output are formatted as a JSON interface that conforms to the JSON schemas below.\n\nAs an example, for the schema {{\&quot;properties\&quot;: {{\&quot;foo\&quot;: {{\&quot;description\&quot;: \&quot;a list of strings\&quot;, \&quot;type\&quot;: \&quot;array\&quot;, \&quot;items\&quot;: {{\&quot;type\&quot;: \&quot;string\&quot;}}}}}}, \&quot;required\&quot;: [\&quot;foo\&quot;]}}}} the object {{\&quot;foo\&quot;: [\&quot;bar\&quot;, \&quot;baz\&quot;]}} is a well-formatted instance of the schema. The object {{\&quot;properties\&quot;: {{\&quot;foo\&quot;: [\&quot;bar\&quot;, \&quot;baz\&quot;]}}}} is not well-formatted.\n\n{optional_additional_definitions_prompt}Here is the input schema:\n```\n{input_schema}\n```\n\nHere is the output schema:\n```\n{output_schema}\n```\nNow output the results for the following inputs:\n```\n{inputs}\n```&quot;, &quot;num_retries_on_parser_failure&quot;: 4}}}]}}, &quot;children&quot;: []}" id="32" width="23.680673950021262%" x="49.334170719592336%" y="1.8em"><defs /><rect data-id="32" fill="#2aa198" height="1.7em" id="32_box" onclick="handleClick(evt)" rx="2" ry="2" width="99.5%" x="2px" y="0" /><text clip-path="url(#32_clip)" fill="black" font-family="Arial" font-size="1em" pointer-events="none" x="4px" y="1.35em">suggest_next_optimization_step</text><svg data-raw="{&quot;kind&quot;: &quot;CHAIN&quot;, &quot;name&quot;: &quot;LLMStructuredPrompt&quot;, &quot;event_id&quot;: 33, &quot;start_time_ms&quot;: 1684491104820, &quot;end_time_ms&quot;: 1684491239356, &quot;running&quot;: false, &quot;delta_frame_infos&quot;: [{&quot;module&quot;: &quot;blackboard_pagi.prompt_optimizer.llm_function&quot;, &quot;lineno&quot;: 758, &quot;function&quot;: &quot;__call__&quot;, &quot;code_context&quot;: null, &quot;index&quot;: null}, {&quot;module&quot;: &quot;blackboard_pagi.utils.tracer.trace_builder&quot;, &quot;lineno&quot;: 345, &quot;function&quot;: &quot;__call__&quot;, &quot;code_context&quot;: null, &quot;index&quot;: null}, {&quot;module&quot;: &quot;blackboard_pagi.prompt_optimizer.track_hyperparameters&quot;, &quot;lineno&quot;: 325, &quot;function&quot;: &quot;__call__&quot;, &quot;code_context&quot;: null, &quot;index&quot;: null}], &quot;properties&quot;: {&quot;arguments&quot;: {&quot;optimization_info&quot;: {&quot;older_task_summary&quot;: null, &quot;task_infos&quot;: [{&quot;task_parameters&quot;: {&quot;domain&quot;: &quot;comedy&quot;, &quot;n&quot;: 2}, &quot;hyperparameters&quot;: {&quot;blackboard_pagi_prompt_optimizer_llm_function&quot;: {&quot;LLMStructuredPrompt_query&quot;: {&quot;json_dumps_kwargs&quot;: {&quot;indent&quot;: 0}, &quot;additional_definitions_prompt_template&quot;: &quot;Here is the schema for additional data types:\n```\n{additional_definitions}\n```\n\n&quot;, &quot;llm_structured_prompt_template&quot;: &quot;{docstring}\n\nThe input and output are formatted as a JSON interface that conforms to the JSON schemas below.\n\nAs an example, for the schema {{\&quot;properties\&quot;: {{\&quot;foo\&quot;: {{\&quot;description\&quot;: \&quot;a list of strings\&quot;, \&quot;type\&quot;: \&quot;array\&quot;, \&quot;items\&quot;: {{\&quot;type\&quot;: \&quot;string\&quot;}}}}}}, \&quot;required\&quot;: [\&quot;foo\&quot;]}}}} the object {{\&quot;foo\&quot;: [\&quot;bar\&quot;, \&quot;baz\&quot;]}} is a well-formatted instance of the schema. The object {{\&quot;properties\&quot;: {{\&quot;foo\&quot;: [\&quot;bar\&quot;, \&quot;baz\&quot;]}}}} is not well-formatted.\n\n{optional_additional_definitions_prompt}Here is the input schema:\n```\n{input_schema}\n```\n\nHere is the output schema:\n```\n{output_schema}\n```\nNow output the results for the following inputs:\n```\n{inputs}\n```&quot;, &quot;num_retries_on_parser_failure&quot;: 3}}}, &quot;reflection&quot;: {&quot;feedback&quot;: &quot;The generated essay topics are relevant to the comedy domain and satisfy the task description and task parameters. The content is appropriate and contains relevant information.&quot;, &quot;evaluation&quot;: &quot;The output is satisfying as it provides two essay topics related to the comedy domain. There is nothing wrong or missing in the output.&quot;, &quot;hyperparameter_suggestion&quot;: &quot;The current hyperparameters seem to be working well for this task. There is no immediate need to change them.&quot;, &quot;hyperparameter_missing&quot;: &quot;There are no missing hyperparameters that need to be added for this task, as the current hyperparameters are providing satisfactory results.&quot;}}, {&quot;task_parameters&quot;: {&quot;domain&quot;: &quot;comedy&quot;, &quot;n&quot;: 2}, &quot;hyperparameters&quot;: {&quot;blackboard_pagi_prompt_optimizer_llm_function&quot;: {&quot;LLMStructuredPrompt_query&quot;: {&quot;json_dumps_kwargs&quot;: {&quot;indent&quot;: 0}, &quot;additional_definitions_prompt_template&quot;: &quot;Here is the schema for additional data types:\n```\n{additional_definitions}\n```\n\n&quot;, &quot;llm_structured_prompt_template&quot;: &quot;{docstring}\n\nThe input and output are formatted as a JSON interface that conforms to the JSON schemas below.\n\nAs an example, for the schema {{\&quot;properties\&quot;: {{\&quot;foo\&quot;: {{\&quot;description\&quot;: \&quot;a list of strings\&quot;, \&quot;type\&quot;: \&quot;array\&quot;, \&quot;items\&quot;: {{\&quot;type\&quot;: \&quot;string\&quot;}}}}}}, \&quot;required\&quot;: [\&quot;foo\&quot;]}}}} the object {{\&quot;foo\&quot;: [\&quot;bar\&quot;, \&quot;baz\&quot;]}} is a well-formatted instance of the schema. The object {{\&quot;properties\&quot;: {{\&quot;foo\&quot;: [\&quot;bar\&quot;, \&quot;baz\&quot;]}}}} is not well-formatted.\n\n{optional_additional_definitions_prompt}Here is the input schema:\n```\n{input_schema}\n```\n\nHere is the output schema:\n```\n{output_schema}\n```\nNow output the results for the following inputs:\n```\n{inputs}\n```&quot;, &quot;num_retries_on_parser_failure&quot;: 3}}}, &quot;reflection&quot;: {&quot;feedback&quot;: &quot;The generated essay topics are relevant to the comedy domain and satisfy the task description and parameters. The content is appropriate and contains relevant information.&quot;, &quot;evaluation&quot;: &quot;The output is satisfying as it provides two essay topics related to the comedy domain. There is nothing wrong or missing in the output.&quot;, &quot;hyperparameter_suggestion&quot;: &quot;The current hyperparameters seem to be working well for this task. No changes are suggested at this time.&quot;, &quot;hyperparameter_missing&quot;: &quot;There are no missing hyperparameters that need to be added for this task, as the current hyperparameters are providing satisfactory results.&quot;}}, {&quot;task_parameters&quot;: {&quot;domain&quot;: &quot;history&quot;, &quot;n&quot;: 2}, &quot;hyperparameters&quot;: {&quot;blackboard_pagi_prompt_optimizer_llm_function&quot;: {&quot;LLMStructuredPrompt_query&quot;: {&quot;json_dumps_kwargs&quot;: {&quot;indent&quot;: 0}, &quot;additional_definitions_prompt_template&quot;: &quot;Here is the schema for additional data types:\n```\n{additional_definitions}\n```\n\n&quot;, &quot;llm_structured_prompt_template&quot;: &quot;{docstring}\n\nThe input and output are formatted as a JSON interface that conforms to the JSON schemas below.\n\nAs an example, for the schema {{\&quot;properties\&quot;: {{\&quot;foo\&quot;: {{\&quot;description\&quot;: \&quot;a list of strings\&quot;, \&quot;type\&quot;: \&quot;array\&quot;, \&quot;items\&quot;: {{\&quot;type\&quot;: \&quot;string\&quot;}}}}}}, \&quot;required\&quot;: [\&quot;foo\&quot;]}}}} the object {{\&quot;foo\&quot;: [\&quot;bar\&quot;, \&quot;baz\&quot;]}} is a well-formatted instance of the schema. The object {{\&quot;properties\&quot;: {{\&quot;foo\&quot;: [\&quot;bar\&quot;, \&quot;baz\&quot;]}}}} is not well-formatted.\n\n{optional_additional_definitions_prompt}Here is the input schema:\n```\n{input_schema}\n```\n\nHere is the output schema:\n```\n{output_schema}\n```\nNow output the results for the following inputs:\n```\n{inputs}\n```&quot;, &quot;num_retries_on_parser_failure&quot;: 4}}}, &quot;reflection&quot;: {&quot;feedback&quot;: &quot;The generated essay topics are relevant to the history domain and satisfy the task description and task parameters. The content is appropriate, and no relevant information is missing from the all_chains and all_prompts fields.&quot;, &quot;evaluation&quot;: &quot;The output is satisfying as it provides two essay topics related to the history domain. There is nothing wrong or missing in the output.&quot;, &quot;hyperparameter_suggestion&quot;: &quot;The current hyperparameters seem to be working well for this task. No changes are needed at the moment.&quot;, &quot;hyperparameter_missing&quot;: &quot;There are no missing hyperparameters that need to be added for this task, as the current hyperparameters are providing satisfactory results.&quot;}}, {&quot;task_parameters&quot;: {&quot;domain&quot;: &quot;technology&quot;, &quot;n&quot;: 3}, &quot;hyperparameters&quot;: {&quot;blackboard_pagi_prompt_optimizer_llm_function&quot;: {&quot;LLMStructuredPrompt_query&quot;: {&quot;json_dumps_kwargs&quot;: {&quot;indent&quot;: 0}, &quot;additional_definitions_prompt_template&quot;: &quot;Here is the schema for additional data types:\n```\n{additional_definitions}\n```\n\n&quot;, &quot;llm_structured_prompt_template&quot;: &quot;{docstring}\n\nThe input and output are formatted as a JSON interface that conforms to the JSON schemas below.\n\nAs an example, for the schema {{\&quot;properties\&quot;: {{\&quot;foo\&quot;: {{\&quot;description\&quot;: \&quot;a list of strings\&quot;, \&quot;type\&quot;: \&quot;array\&quot;, \&quot;items\&quot;: {{\&quot;type\&quot;: \&quot;string\&quot;}}}}}}, \&quot;required\&quot;: [\&quot;foo\&quot;]}}}} the object {{\&quot;foo\&quot;: [\&quot;bar\&quot;, \&quot;baz\&quot;]}} is a well-formatted instance of the schema. The object {{\&quot;properties\&quot;: {{\&quot;foo\&quot;: [\&quot;bar\&quot;, \&quot;baz\&quot;]}}}} is not well-formatted.\n\n{optional_additional_definitions_prompt}Here is the input schema:\n```\n{input_schema}\n```\n\nHere is the output schema:\n```\n{output_schema}\n```\nNow output the results for the following inputs:\n```\n{inputs}\n```&quot;, &quot;num_retries_on_parser_failure&quot;: 4}}}, &quot;reflection&quot;: {&quot;feedback&quot;: &quot;The generated essay topics are relevant to the technology domain and satisfy the task description and task parameters. The content is appropriate and does not require any additional information from the all_chains and all_prompts fields.&quot;, &quot;evaluation&quot;: &quot;The output is satisfying as it provides three distinct essay topics related to the technology domain. There is no apparent issue or missing information.&quot;, &quot;hyperparameter_suggestion&quot;: &quot;The current hyperparameters seem to be working well for this task. No immediate changes are necessary.&quot;, &quot;hyperparameter_missing&quot;: &quot;There are no missing hyperparameters that need to be added for this task, as the current hyperparameters are producing satisfactory results.&quot;}}], &quot;best_hyperparameters&quot;: {&quot;blackboard_pagi_prompt_optimizer_llm_function&quot;: {&quot;LLMStructuredPrompt_query&quot;: {&quot;json_dumps_kwargs&quot;: {&quot;indent&quot;: 0}, &quot;additional_definitions_prompt_template&quot;: &quot;Here is the schema for additional data types:\n```\n{additional_definitions}\n```\n\n&quot;, &quot;llm_structured_prompt_template&quot;: &quot;{docstring}\n\nThe input and output are formatted as a JSON interface that conforms to the JSON schemas below.\n\nAs an example, for the schema {{\&quot;properties\&quot;: {{\&quot;foo\&quot;: {{\&quot;description\&quot;: \&quot;a list of strings\&quot;, \&quot;type\&quot;: \&quot;array\&quot;, \&quot;items\&quot;: {{\&quot;type\&quot;: \&quot;string\&quot;}}}}}}, \&quot;required\&quot;: [\&quot;foo\&quot;]}}}} the object {{\&quot;foo\&quot;: [\&quot;bar\&quot;, \&quot;baz\&quot;]}} is a well-formatted instance of the schema. The object {{\&quot;properties\&quot;: {{\&quot;foo\&quot;: [\&quot;bar\&quot;, \&quot;baz\&quot;]}}}} is not well-formatted.\n\n{optional_additional_definitions_prompt}Here is the input schema:\n```\n{input_schema}\n```\n\nHere is the output schema:\n```\n{output_schema}\n```\nNow output the results for the following inputs:\n```\n{inputs}\n```&quot;, &quot;num_retries_on_parser_failure&quot;: 3}}}}}, &quot;result&quot;: {&quot;best_hyperparameters&quot;: {&quot;blackboard_pagi_prompt_optimizer_llm_function&quot;: {&quot;LLMStructuredPrompt_query&quot;: {&quot;json_dumps_kwargs&quot;: {&quot;indent&quot;: 0}, &quot;additional_definitions_prompt_template&quot;: &quot;Here is the schema for additional data types:\n```\n{additional_definitions}\n```\n\n&quot;, &quot;llm_structured_prompt_template&quot;: &quot;{docstring}\n\nThe input and output are formatted as a JSON interface that conforms to the JSON schemas below.\n\nAs an example, for the schema {{\&quot;properties\&quot;: {{\&quot;foo\&quot;: {{\&quot;description\&quot;: \&quot;a list of strings\&quot;, \&quot;type\&quot;: \&quot;array\&quot;, \&quot;items\&quot;: {{\&quot;type\&quot;: \&quot;string\&quot;}}}}}}, \&quot;required\&quot;: [\&quot;foo\&quot;]}}}} the object {{\&quot;foo\&quot;: [\&quot;bar\&quot;, \&quot;baz\&quot;]}} is a well-formatted instance of the schema. The object {{\&quot;properties\&quot;: {{\&quot;foo\&quot;: [\&quot;bar\&quot;, \&quot;baz\&quot;]}}}} is not well-formatted.\n\n{optional_additional_definitions_prompt}Here is the input schema:\n```\n{input_schema}\n```\n\nHere is the output schema:\n```\n{output_schema}\n```\nNow output the results for the following inputs:\n```\n{inputs}\n```&quot;, &quot;num_retries_on_parser_failure&quot;: 3}}}, &quot;suggestion&quot;: &quot;The current hyperparameters seem to be working well for the tasks. However, it might be beneficial to explore different domains and number of topics to generate to further test the performance of the model.&quot;, &quot;task_parameters_suggestions&quot;: [{&quot;domain&quot;: &quot;science&quot;, &quot;n&quot;: 2}, {&quot;domain&quot;: &quot;literature&quot;, &quot;n&quot;: 3}, {&quot;domain&quot;: &quot;philosophy&quot;, &quot;n&quot;: 2}], &quot;hyperparameter_suggestions&quot;: [{&quot;blackboard_pagi_prompt_optimizer_llm_function&quot;: {&quot;LLMStructuredPrompt_query&quot;: {&quot;json_dumps_kwargs&quot;: {&quot;indent&quot;: 0}, &quot;additional_definitions_prompt_template&quot;: &quot;Here is the schema for additional data types:\n```\n{additional_definitions}\n```\n\n&quot;, &quot;llm_structured_prompt_template&quot;: &quot;{docstring}\n\nThe input and output are formatted as a JSON interface that conforms to the JSON schemas below.\n\nAs an example, for the schema {{\&quot;properties\&quot;: {{\&quot;foo\&quot;: {{\&quot;description\&quot;: \&quot;a list of strings\&quot;, \&quot;type\&quot;: \&quot;array\&quot;, \&quot;items\&quot;: {{\&quot;type\&quot;: \&quot;string\&quot;}}}}}}, \&quot;required\&quot;: [\&quot;foo\&quot;]}}}} the object {{\&quot;foo\&quot;: [\&quot;bar\&quot;, \&quot;baz\&quot;]}} is a well-formatted instance of the schema. The object {{\&quot;properties\&quot;: {{\&quot;foo\&quot;: [\&quot;bar\&quot;, \&quot;baz\&quot;]}}}} is not well-formatted.\n\n{optional_additional_definitions_prompt}Here is the input schema:\n```\n{input_schema}\n```\n\nHere is the output schema:\n```\n{output_schema}\n```\nNow output the results for the following inputs:\n```\n{inputs}\n```&quot;, &quot;num_retries_on_parser_failure&quot;: 4}}}]}}, &quot;children&quot;: []}" id="33" width="97.51197717674864%" x="0.0014790370651147926%" y="1.8em"><defs /><rect data-id="33" fill="#2aa198" height="1.7em" id="33_box" onclick="handleClick(evt)" rx="2" ry="2" width="99.5%" x="2px" y="0" /><text clip-path="url(#33_clip)" fill="black" font-family="Arial" font-size="1em" pointer-events="none" x="4px" y="1.35em">LLMStructuredPrompt</text><svg data-raw="{&quot;kind&quot;: &quot;LLM&quot;, &quot;name&quot;: &quot;TrackedChatModel&quot;, &quot;event_id&quot;: 34, &quot;start_time_ms&quot;: 1684491104822, &quot;end_time_ms&quot;: 1684491239295, &quot;running&quot;: false, &quot;delta_frame_infos&quot;: [{&quot;module&quot;: &quot;blackboard_pagi.prompts.chat_chain&quot;, &quot;lineno&quot;: 35, &quot;function&quot;: &quot;query&quot;, &quot;code_context&quot;: null, &quot;index&quot;: null}, {&quot;module&quot;: &quot;blackboard_pagi.prompt_optimizer.llm_function&quot;, &quot;lineno&quot;: 455, &quot;function&quot;: &quot;query&quot;, &quot;code_context&quot;: null, &quot;index&quot;: null}, {&quot;module&quot;: &quot;blackboard_pagi.prompt_optimizer.track_hyperparameters&quot;, &quot;lineno&quot;: 325, &quot;function&quot;: &quot;__call__&quot;, &quot;code_context&quot;: null, &quot;index&quot;: null}, {&quot;module&quot;: &quot;blackboard_pagi.prompt_optimizer.llm_function&quot;, &quot;lineno&quot;: 377, &quot;function&quot;: &quot;__call__&quot;, &quot;code_context&quot;: null, &quot;index&quot;: null}, {&quot;module&quot;: &quot;blackboard_pagi.utils.tracer.trace_builder&quot;, &quot;lineno&quot;: 345, &quot;function&quot;: &quot;__call__&quot;, &quot;code_context&quot;: null, &quot;index&quot;: null}, {&quot;module&quot;: &quot;blackboard_pagi.prompt_optimizer.llm_function&quot;, &quot;lineno&quot;: 758, &quot;function&quot;: &quot;__call__&quot;, &quot;code_context&quot;: null, &quot;index&quot;: null}], &quot;properties&quot;: {&quot;arguments&quot;: {&quot;self&quot;: {&quot;_type&quot;: &quot;ChatOpenAI&quot;}, &quot;messages&quot;: [{&quot;content&quot;: &quot;Suggest the next optimization step.\n\nThe input and output are formatted as a JSON interface that conforms to the JSON schemas below.\n\nAs an example, for the schema {\&quot;properties\&quot;: {\&quot;foo\&quot;: {\&quot;description\&quot;: \&quot;a list of strings\&quot;, \&quot;type\&quot;: \&quot;array\&quot;, \&quot;items\&quot;: {\&quot;type\&quot;: \&quot;string\&quot;}}}, \&quot;required\&quot;: [\&quot;foo\&quot;]}} the object {\&quot;foo\&quot;: [\&quot;bar\&quot;, \&quot;baz\&quot;]} is a well-formatted instance of the schema. The object {\&quot;properties\&quot;: {\&quot;foo\&quot;: [\&quot;bar\&quot;, \&quot;baz\&quot;]}} is not well-formatted.\n\nHere is the schema for additional data types:\n```\n{\n\&quot;CreateEssayTopicsInputs\&quot;: {\n\&quot;properties\&quot;: {\n\&quot;domain\&quot;: {\n\&quot;description\&quot;: \&quot;The domain or general area of the essay topic\&quot;,\n\&quot;type\&quot;: \&quot;string\&quot;\n},\n\&quot;n\&quot;: {\n\&quot;description\&quot;: \&quot;Number of topics to generate\&quot;,\n\&quot;type\&quot;: \&quot;integer\&quot;\n}\n},\n\&quot;required\&quot;: [\n\&quot;domain\&quot;,\n\&quot;n\&quot;\n]\n},\n\&quot;QueryHyperparameters\&quot;: {\n\&quot;properties\&quot;: {\n\&quot;json_dumps_kwargs\&quot;: {\n\&quot;default\&quot;: {\n\&quot;indent\&quot;: 0\n},\n\&quot;type\&quot;: \&quot;object\&quot;\n},\n\&quot;additional_definitions_prompt_template\&quot;: {\n\&quot;default\&quot;: \&quot;Here is the schema for additional data types:\\n```\\n{additional_definitions}\\n```\\n\\n\&quot;,\n\&quot;type\&quot;: \&quot;string\&quot;\n},\n\&quot;llm_structured_prompt_template\&quot;: {\n\&quot;description\&quot;: \&quot;The general-purpose prompt for the structured prompt execution. It tells the LLM what to do and how to read function arguments and structure return values. \&quot;,\n\&quot;default\&quot;: \&quot;{docstring}\\n\\nThe input and output are formatted as a JSON interface that conforms to the JSON schemas below.\\n\\nAs an example, for the schema {{\\\&quot;properties\\\&quot;: {{\\\&quot;foo\\\&quot;: {{\\\&quot;description\\\&quot;: \\\&quot;a list of strings\\\&quot;, \\\&quot;type\\\&quot;: \\\&quot;array\\\&quot;, \\\&quot;items\\\&quot;: {{\\\&quot;type\\\&quot;: \\\&quot;string\\\&quot;}}}}}}, \\\&quot;required\\\&quot;: [\\\&quot;foo\\\&quot;]}}}} the object {{\\\&quot;foo\\\&quot;: [\\\&quot;bar\\\&quot;, \\\&quot;baz\\\&quot;]}} is a well-formatted instance of the schema. The object {{\\\&quot;properties\\\&quot;: {{\\\&quot;foo\\\&quot;: [\\\&quot;bar\\\&quot;, \\\&quot;baz\\\&quot;]}}}} is not well-formatted.\\n\\n{optional_additional_definitions_prompt}Here is the input schema:\\n```\\n{input_schema}\\n```\\n\\nHere is the output schema:\\n```\\n{output_schema}\\n```\\nNow output the results for the following inputs:\\n```\\n{inputs}\\n```\&quot;,\n\&quot;type\&quot;: \&quot;string\&quot;\n},\n\&quot;num_retries_on_parser_failure\&quot;: {\n\&quot;default\&quot;: 3,\n\&quot;type\&quot;: \&quot;integer\&quot;\n}\n}\n},\n\&quot;blackboard_pagi_prompt_optimizer_llm_functionModule\&quot;: {\n\&quot;properties\&quot;: {\n\&quot;LLMStructuredPrompt_query\&quot;: {\n\&quot;default\&quot;: {\n\&quot;json_dumps_kwargs\&quot;: {\n\&quot;indent\&quot;: 0\n},\n\&quot;additional_definitions_prompt_template\&quot;: \&quot;Here is the schema for additional data types:\\n```\\n{additional_definitions}\\n```\\n\\n\&quot;,\n\&quot;llm_structured_prompt_template\&quot;: \&quot;{docstring}\\n\\nThe input and output are formatted as a JSON interface that conforms to the JSON schemas below.\\n\\nAs an example, for the schema {{\\\&quot;properties\\\&quot;: {{\\\&quot;foo\\\&quot;: {{\\\&quot;description\\\&quot;: \\\&quot;a list of strings\\\&quot;, \\\&quot;type\\\&quot;: \\\&quot;array\\\&quot;, \\\&quot;items\\\&quot;: {{\\\&quot;type\\\&quot;: \\\&quot;string\\\&quot;}}}}}}, \\\&quot;required\\\&quot;: [\\\&quot;foo\\\&quot;]}}}} the object {{\\\&quot;foo\\\&quot;: [\\\&quot;bar\\\&quot;, \\\&quot;baz\\\&quot;]}} is a well-formatted instance of the schema. The object {{\\\&quot;properties\\\&quot;: {{\\\&quot;foo\\\&quot;: [\\\&quot;bar\\\&quot;, \\\&quot;baz\\\&quot;]}}}} is not well-formatted.\\n\\n{optional_additional_definitions_prompt}Here is the input schema:\\n```\\n{input_schema}\\n```\\n\\nHere is the output schema:\\n```\\n{output_schema}\\n```\\nNow output the results for the following inputs:\\n```\\n{inputs}\\n```\&quot;,\n\&quot;num_retries_on_parser_failure\&quot;: 3\n},\n\&quot;allOf\&quot;: [\n{\n\&quot;$ref\&quot;: \&quot;#/definitions/QueryHyperparameters\&quot;\n}\n]\n}\n}\n},\n\&quot;Hyperparameters\&quot;: {\n\&quot;properties\&quot;: {\n\&quot;blackboard_pagi_prompt_optimizer_llm_function\&quot;: {\n\&quot;default\&quot;: {\n\&quot;LLMStructuredPrompt_query\&quot;: {\n\&quot;json_dumps_kwargs\&quot;: {\n\&quot;indent\&quot;: 0\n},\n\&quot;additional_definitions_prompt_template\&quot;: \&quot;Here is the schema for additional data types:\\n```\\n{additional_definitions}\\n```\\n\\n\&quot;,\n\&quot;llm_structured_prompt_template\&quot;: \&quot;{docstring}\\n\\nThe input and output are formatted as a JSON interface that conforms to the JSON schemas below.\\n\\nAs an example, for the schema {{\\\&quot;properties\\\&quot;: {{\\\&quot;foo\\\&quot;: {{\\\&quot;description\\\&quot;: \\\&quot;a list of strings\\\&quot;, \\\&quot;type\\\&quot;: \\\&quot;array\\\&quot;, \\\&quot;items\\\&quot;: {{\\\&quot;type\\\&quot;: \\\&quot;string\\\&quot;}}}}}}, \\\&quot;required\\\&quot;: [\\\&quot;foo\\\&quot;]}}}} the object {{\\\&quot;foo\\\&quot;: [\\\&quot;bar\\\&quot;, \\\&quot;baz\\\&quot;]}} is a well-formatted instance of the schema. The object {{\\\&quot;properties\\\&quot;: {{\\\&quot;foo\\\&quot;: [\\\&quot;bar\\\&quot;, \\\&quot;baz\\\&quot;]}}}} is not well-formatted.\\n\\n{optional_additional_definitions_prompt}Here is the input schema:\\n```\\n{input_schema}\\n```\\n\\nHere is the output schema:\\n```\\n{output_schema}\\n```\\nNow output the results for the following inputs:\\n```\\n{inputs}\\n```\&quot;,\n\&quot;num_retries_on_parser_failure\&quot;: 3\n}\n},\n\&quot;allOf\&quot;: [\n{\n\&quot;$ref\&quot;: \&quot;#/definitions/blackboard_pagi_prompt_optimizer_llm_functionModule\&quot;\n}\n]\n}\n}\n},\n\&quot;TaskReflection\&quot;: {\n\&quot;description\&quot;: \&quot;The reflections on the task.\\n\\nThis contains the lessons we learn from each task run to come up with better hyperparameters to try.\&quot;,\n\&quot;properties\&quot;: {\n\&quot;feedback\&quot;: {\n\&quot;description\&quot;: \&quot;Only look at the final results field. Does its content satisfy the task description and task parameters? Does it contain all the relevant information from the all_chains and all_prompts fields? What could be improved in the results?\&quot;,\n\&quot;type\&quot;: \&quot;string\&quot;\n},\n\&quot;evaluation\&quot;: {\n\&quot;description\&quot;: \&quot;The evaluation of the outputs given the task. Is the output satisfying? What is wrong? What is missing?\&quot;,\n\&quot;type\&quot;: \&quot;string\&quot;\n},\n\&quot;hyperparameter_suggestion\&quot;: {\n\&quot;description\&quot;: \&quot;How we want to change the hyperparameters to improve the results. What could we try to change?\&quot;,\n\&quot;type\&quot;: \&quot;string\&quot;\n},\n\&quot;hyperparameter_missing\&quot;: {\n\&quot;description\&quot;: \&quot;What hyperparameters are missing to improve the results? What could be changed that is not exposed via hyperparameters?\&quot;,\n\&quot;type\&quot;: \&quot;string\&quot;\n}\n},\n\&quot;required\&quot;: [\n\&quot;feedback\&quot;,\n\&quot;evaluation\&quot;,\n\&quot;hyperparameter_suggestion\&quot;,\n\&quot;hyperparameter_missing\&quot;\n]\n},\n\&quot;TaskInfo_CreateEssayTopicsInputs__list_str___Hyperparameters_\&quot;: {\n\&quot;description\&quot;: \&quot;The task run and the reflection on the experiment.\&quot;,\n\&quot;properties\&quot;: {\n\&quot;task_parameters\&quot;: {\n\&quot;description\&quot;: \&quot;The task parameters.\&quot;,\n\&quot;allOf\&quot;: [\n{\n\&quot;$ref\&quot;: \&quot;#/definitions/CreateEssayTopicsInputs\&quot;\n}\n]\n},\n\&quot;hyperparameters\&quot;: {\n\&quot;description\&quot;: \&quot;The hyperparameters used for the task. We optimize these.\&quot;,\n\&quot;allOf\&quot;: [\n{\n\&quot;$ref\&quot;: \&quot;#/definitions/Hyperparameters\&quot;\n}\n]\n},\n\&quot;reflection\&quot;: {\n\&quot;description\&quot;: \&quot;The reflection on the task.\&quot;,\n\&quot;allOf\&quot;: [\n{\n\&quot;$ref\&quot;: \&quot;#/definitions/TaskReflection\&quot;\n}\n]\n}\n},\n\&quot;required\&quot;: [\n\&quot;task_parameters\&quot;,\n\&quot;hyperparameters\&quot;,\n\&quot;reflection\&quot;\n]\n},\n\&quot;OptimizationInfo_CreateEssayTopicsInputs__list_str___Hyperparameters_\&quot;: {\n\&quot;description\&quot;: \&quot;The optimization information. This is the data we use to optimize the hyperparameters.\&quot;,\n\&quot;properties\&quot;: {\n\&quot;older_task_summary\&quot;: {\n\&quot;description\&quot;: \&quot;A summary of previous experiments and the proposed changes with the goal of avoiding trying the same changes repeatedly.\&quot;,\n\&quot;type\&quot;: \&quot;string\&quot;\n},\n\&quot;task_infos\&quot;: {\n\&quot;description\&quot;: \&quot;The most recent tasks we have run and our reflections on them.\&quot;,\n\&quot;type\&quot;: \&quot;array\&quot;,\n\&quot;items\&quot;: {\n\&quot;$ref\&quot;: \&quot;#/definitions/TaskInfo_CreateEssayTopicsInputs__list_str___Hyperparameters_\&quot;\n}\n},\n\&quot;best_hyperparameters\&quot;: {\n\&quot;description\&quot;: \&quot;The best hyperparameters we have found so far.\&quot;,\n\&quot;allOf\&quot;: [\n{\n\&quot;$ref\&quot;: \&quot;#/definitions/Hyperparameters\&quot;\n}\n]\n}\n},\n\&quot;required\&quot;: [\n\&quot;task_infos\&quot;,\n\&quot;best_hyperparameters\&quot;\n]\n},\n\&quot;OptimizationStep_CreateEssayTopicsInputs__list_str___Hyperparameters_\&quot;: {\n\&quot;description\&quot;: \&quot;The next optimization steps. New hyperparameters we want to try given the previous experiments and\\nnew task parameters we want to evaluate on given the previous experiments.\&quot;,\n\&quot;properties\&quot;: {\n\&quot;best_hyperparameters\&quot;: {\n\&quot;description\&quot;: \&quot;The best hyperparameters we have found so far given task_infos and history.\&quot;,\n\&quot;allOf\&quot;: [\n{\n\&quot;$ref\&quot;: \&quot;#/definitions/Hyperparameters\&quot;\n}\n]\n},\n\&quot;suggestion\&quot;: {\n\&quot;description\&quot;: \&quot;The suggestions for the next experiments. What could we try to change?We will try several tasks next and several sets of hyperparameters. Let's think step by step.\&quot;,\n\&quot;type\&quot;: \&quot;string\&quot;\n},\n\&quot;task_parameters_suggestions\&quot;: {\n\&quot;description\&quot;: \&quot;The task parameters we want to try next.\&quot;,\n\&quot;hint_min_items\&quot;: 1,\n\&quot;hint_max_items\&quot;: 4,\n\&quot;type\&quot;: \&quot;array\&quot;,\n\&quot;items\&quot;: {\n\&quot;$ref\&quot;: \&quot;#/definitions/CreateEssayTopicsInputs\&quot;\n}\n},\n\&quot;hyperparameter_suggestions\&quot;: {\n\&quot;description\&quot;: \&quot;The hyperparameters we want to try next.\&quot;,\n\&quot;hint_min_items\&quot;: 1,\n\&quot;hint_max_items\&quot;: 2,\n\&quot;type\&quot;: \&quot;array\&quot;,\n\&quot;items\&quot;: {\n\&quot;$ref\&quot;: \&quot;#/definitions/Hyperparameters\&quot;\n}\n}\n},\n\&quot;required\&quot;: [\n\&quot;best_hyperparameters\&quot;,\n\&quot;suggestion\&quot;,\n\&quot;task_parameters_suggestions\&quot;,\n\&quot;hyperparameter_suggestions\&quot;\n]\n}\n}\n```\n\nHere is the input schema:\n```\n{\n\&quot;properties\&quot;: {\n\&quot;optimization_info\&quot;: {\n\&quot;$ref\&quot;: \&quot;#/definitions/OptimizationInfo_CreateEssayTopicsInputs__list_str___Hyperparameters_\&quot;\n}\n},\n\&quot;required\&quot;: [\n\&quot;optimization_info\&quot;\n]\n}\n```\n\nHere is the output schema:\n```\n{\n\&quot;properties\&quot;: {\n\&quot;return_value\&quot;: {\n\&quot;$ref\&quot;: \&quot;#/definitions/OptimizationStep_CreateEssayTopicsInputs__list_str___Hyperparameters_\&quot;\n}\n},\n\&quot;required\&quot;: [\n\&quot;return_value\&quot;\n]\n}\n```\nNow output the results for the following inputs:\n```\n{\n\&quot;optimization_info\&quot;: {\n\&quot;older_task_summary\&quot;: null,\n\&quot;task_infos\&quot;: [\n{\n\&quot;task_parameters\&quot;: {\n\&quot;domain\&quot;: \&quot;comedy\&quot;,\n\&quot;n\&quot;: 2\n},\n\&quot;hyperparameters\&quot;: {\n\&quot;blackboard_pagi_prompt_optimizer_llm_function\&quot;: {\n\&quot;LLMStructuredPrompt_query\&quot;: {\n\&quot;json_dumps_kwargs\&quot;: {\n\&quot;indent\&quot;: 0\n},\n\&quot;additional_definitions_prompt_template\&quot;: \&quot;Here is the schema for additional data types:\\n```\\n{additional_definitions}\\n```\\n\\n\&quot;,\n\&quot;llm_structured_prompt_template\&quot;: \&quot;{docstring}\\n\\nThe input and output are formatted as a JSON interface that conforms to the JSON schemas below.\\n\\nAs an example, for the schema {{\\\&quot;properties\\\&quot;: {{\\\&quot;foo\\\&quot;: {{\\\&quot;description\\\&quot;: \\\&quot;a list of strings\\\&quot;, \\\&quot;type\\\&quot;: \\\&quot;array\\\&quot;, \\\&quot;items\\\&quot;: {{\\\&quot;type\\\&quot;: \\\&quot;string\\\&quot;}}}}}}, \\\&quot;required\\\&quot;: [\\\&quot;foo\\\&quot;]}}}} the object {{\\\&quot;foo\\\&quot;: [\\\&quot;bar\\\&quot;, \\\&quot;baz\\\&quot;]}} is a well-formatted instance of the schema. The object {{\\\&quot;properties\\\&quot;: {{\\\&quot;foo\\\&quot;: [\\\&quot;bar\\\&quot;, \\\&quot;baz\\\&quot;]}}}} is not well-formatted.\\n\\n{optional_additional_definitions_prompt}Here is the input schema:\\n```\\n{input_schema}\\n```\\n\\nHere is the output schema:\\n```\\n{output_schema}\\n```\\nNow output the results for the following inputs:\\n```\\n{inputs}\\n```\&quot;,\n\&quot;num_retries_on_parser_failure\&quot;: 3\n}\n}\n},\n\&quot;reflection\&quot;: {\n\&quot;feedback\&quot;: \&quot;The generated essay topics are relevant to the comedy domain and satisfy the task description and task parameters. The content is appropriate and contains relevant information.\&quot;,\n\&quot;evaluation\&quot;: \&quot;The output is satisfying as it provides two essay topics related to the comedy domain. There is nothing wrong or missing in the output.\&quot;,\n\&quot;hyperparameter_suggestion\&quot;: \&quot;The current hyperparameters seem to be working well for this task. There is no immediate need to change them.\&quot;,\n\&quot;hyperparameter_missing\&quot;: \&quot;There are no missing hyperparameters that need to be added for this task, as the current hyperparameters are providing satisfactory results.\&quot;\n}\n},\n{\n\&quot;task_parameters\&quot;: {\n\&quot;domain\&quot;: \&quot;comedy\&quot;,\n\&quot;n\&quot;: 2\n},\n\&quot;hyperparameters\&quot;: {\n\&quot;blackboard_pagi_prompt_optimizer_llm_function\&quot;: {\n\&quot;LLMStructuredPrompt_query\&quot;: {\n\&quot;json_dumps_kwargs\&quot;: {\n\&quot;indent\&quot;: 0\n},\n\&quot;additional_definitions_prompt_template\&quot;: \&quot;Here is the schema for additional data types:\\n```\\n{additional_definitions}\\n```\\n\\n\&quot;,\n\&quot;llm_structured_prompt_template\&quot;: \&quot;{docstring}\\n\\nThe input and output are formatted as a JSON interface that conforms to the JSON schemas below.\\n\\nAs an example, for the schema {{\\\&quot;properties\\\&quot;: {{\\\&quot;foo\\\&quot;: {{\\\&quot;description\\\&quot;: \\\&quot;a list of strings\\\&quot;, \\\&quot;type\\\&quot;: \\\&quot;array\\\&quot;, \\\&quot;items\\\&quot;: {{\\\&quot;type\\\&quot;: \\\&quot;string\\\&quot;}}}}}}, \\\&quot;required\\\&quot;: [\\\&quot;foo\\\&quot;]}}}} the object {{\\\&quot;foo\\\&quot;: [\\\&quot;bar\\\&quot;, \\\&quot;baz\\\&quot;]}} is a well-formatted instance of the schema. The object {{\\\&quot;properties\\\&quot;: {{\\\&quot;foo\\\&quot;: [\\\&quot;bar\\\&quot;, \\\&quot;baz\\\&quot;]}}}} is not well-formatted.\\n\\n{optional_additional_definitions_prompt}Here is the input schema:\\n```\\n{input_schema}\\n```\\n\\nHere is the output schema:\\n```\\n{output_schema}\\n```\\nNow output the results for the following inputs:\\n```\\n{inputs}\\n```\&quot;,\n\&quot;num_retries_on_parser_failure\&quot;: 3\n}\n}\n},\n\&quot;reflection\&quot;: {\n\&quot;feedback\&quot;: \&quot;The generated essay topics are relevant to the comedy domain and satisfy the task description and parameters. The content is appropriate and contains relevant information.\&quot;,\n\&quot;evaluation\&quot;: \&quot;The output is satisfying as it provides two essay topics related to the comedy domain. There is nothing wrong or missing in the output.\&quot;,\n\&quot;hyperparameter_suggestion\&quot;: \&quot;The current hyperparameters seem to be working well for this task. No changes are suggested at this time.\&quot;,\n\&quot;hyperparameter_missing\&quot;: \&quot;There are no missing hyperparameters that need to be added for this task, as the current hyperparameters are providing satisfactory results.\&quot;\n}\n},\n{\n\&quot;task_parameters\&quot;: {\n\&quot;domain\&quot;: \&quot;history\&quot;,\n\&quot;n\&quot;: 2\n},\n\&quot;hyperparameters\&quot;: {\n\&quot;blackboard_pagi_prompt_optimizer_llm_function\&quot;: {\n\&quot;LLMStructuredPrompt_query\&quot;: {\n\&quot;json_dumps_kwargs\&quot;: {\n\&quot;indent\&quot;: 0\n},\n\&quot;additional_definitions_prompt_template\&quot;: \&quot;Here is the schema for additional data types:\\n```\\n{additional_definitions}\\n```\\n\\n\&quot;,\n\&quot;llm_structured_prompt_template\&quot;: \&quot;{docstring}\\n\\nThe input and output are formatted as a JSON interface that conforms to the JSON schemas below.\\n\\nAs an example, for the schema {{\\\&quot;properties\\\&quot;: {{\\\&quot;foo\\\&quot;: {{\\\&quot;description\\\&quot;: \\\&quot;a list of strings\\\&quot;, \\\&quot;type\\\&quot;: \\\&quot;array\\\&quot;, \\\&quot;items\\\&quot;: {{\\\&quot;type\\\&quot;: \\\&quot;string\\\&quot;}}}}}}, \\\&quot;required\\\&quot;: [\\\&quot;foo\\\&quot;]}}}} the object {{\\\&quot;foo\\\&quot;: [\\\&quot;bar\\\&quot;, \\\&quot;baz\\\&quot;]}} is a well-formatted instance of the schema. The object {{\\\&quot;properties\\\&quot;: {{\\\&quot;foo\\\&quot;: [\\\&quot;bar\\\&quot;, \\\&quot;baz\\\&quot;]}}}} is not well-formatted.\\n\\n{optional_additional_definitions_prompt}Here is the input schema:\\n```\\n{input_schema}\\n```\\n\\nHere is the output schema:\\n```\\n{output_schema}\\n```\\nNow output the results for the following inputs:\\n```\\n{inputs}\\n```\&quot;,\n\&quot;num_retries_on_parser_failure\&quot;: 4\n}\n}\n},\n\&quot;reflection\&quot;: {\n\&quot;feedback\&quot;: \&quot;The generated essay topics are relevant to the history domain and satisfy the task description and task parameters. The content is appropriate, and no relevant information is missing from the all_chains and all_prompts fields.\&quot;,\n\&quot;evaluation\&quot;: \&quot;The output is satisfying as it provides two essay topics related to the history domain. There is nothing wrong or missing in the output.\&quot;,\n\&quot;hyperparameter_suggestion\&quot;: \&quot;The current hyperparameters seem to be working well for this task. No changes are needed at the moment.\&quot;,\n\&quot;hyperparameter_missing\&quot;: \&quot;There are no missing hyperparameters that need to be added for this task, as the current hyperparameters are providing satisfactory results.\&quot;\n}\n},\n{\n\&quot;task_parameters\&quot;: {\n\&quot;domain\&quot;: \&quot;technology\&quot;,\n\&quot;n\&quot;: 3\n},\n\&quot;hyperparameters\&quot;: {\n\&quot;blackboard_pagi_prompt_optimizer_llm_function\&quot;: {\n\&quot;LLMStructuredPrompt_query\&quot;: {\n\&quot;json_dumps_kwargs\&quot;: {\n\&quot;indent\&quot;: 0\n},\n\&quot;additional_definitions_prompt_template\&quot;: \&quot;Here is the schema for additional data types:\\n```\\n{additional_definitions}\\n```\\n\\n\&quot;,\n\&quot;llm_structured_prompt_template\&quot;: \&quot;{docstring}\\n\\nThe input and output are formatted as a JSON interface that conforms to the JSON schemas below.\\n\\nAs an example, for the schema {{\\\&quot;properties\\\&quot;: {{\\\&quot;foo\\\&quot;: {{\\\&quot;description\\\&quot;: \\\&quot;a list of strings\\\&quot;, \\\&quot;type\\\&quot;: \\\&quot;array\\\&quot;, \\\&quot;items\\\&quot;: {{\\\&quot;type\\\&quot;: \\\&quot;string\\\&quot;}}}}}}, \\\&quot;required\\\&quot;: [\\\&quot;foo\\\&quot;]}}}} the object {{\\\&quot;foo\\\&quot;: [\\\&quot;bar\\\&quot;, \\\&quot;baz\\\&quot;]}} is a well-formatted instance of the schema. The object {{\\\&quot;properties\\\&quot;: {{\\\&quot;foo\\\&quot;: [\\\&quot;bar\\\&quot;, \\\&quot;baz\\\&quot;]}}}} is not well-formatted.\\n\\n{optional_additional_definitions_prompt}Here is the input schema:\\n```\\n{input_schema}\\n```\\n\\nHere is the output schema:\\n```\\n{output_schema}\\n```\\nNow output the results for the following inputs:\\n```\\n{inputs}\\n```\&quot;,\n\&quot;num_retries_on_parser_failure\&quot;: 4\n}\n}\n},\n\&quot;reflection\&quot;: {\n\&quot;feedback\&quot;: \&quot;The generated essay topics are relevant to the technology domain and satisfy the task description and task parameters. The content is appropriate and does not require any additional information from the all_chains and all_prompts fields.\&quot;,\n\&quot;evaluation\&quot;: \&quot;The output is satisfying as it provides three distinct essay topics related to the technology domain. There is no apparent issue or missing information.\&quot;,\n\&quot;hyperparameter_suggestion\&quot;: \&quot;The current hyperparameters seem to be working well for this task. No immediate changes are necessary.\&quot;,\n\&quot;hyperparameter_missing\&quot;: \&quot;There are no missing hyperparameters that need to be added for this task, as the current hyperparameters are producing satisfactory results.\&quot;\n}\n}\n],\n\&quot;best_hyperparameters\&quot;: {\n\&quot;blackboard_pagi_prompt_optimizer_llm_function\&quot;: {\n\&quot;LLMStructuredPrompt_query\&quot;: {\n\&quot;json_dumps_kwargs\&quot;: {\n\&quot;indent\&quot;: 0\n},\n\&quot;additional_definitions_prompt_template\&quot;: \&quot;Here is the schema for additional data types:\\n```\\n{additional_definitions}\\n```\\n\\n\&quot;,\n\&quot;llm_structured_prompt_template\&quot;: \&quot;{docstring}\\n\\nThe input and output are formatted as a JSON interface that conforms to the JSON schemas below.\\n\\nAs an example, for the schema {{\\\&quot;properties\\\&quot;: {{\\\&quot;foo\\\&quot;: {{\\\&quot;description\\\&quot;: \\\&quot;a list of strings\\\&quot;, \\\&quot;type\\\&quot;: \\\&quot;array\\\&quot;, \\\&quot;items\\\&quot;: {{\\\&quot;type\\\&quot;: \\\&quot;string\\\&quot;}}}}}}, \\\&quot;required\\\&quot;: [\\\&quot;foo\\\&quot;]}}}} the object {{\\\&quot;foo\\\&quot;: [\\\&quot;bar\\\&quot;, \\\&quot;baz\\\&quot;]}} is a well-formatted instance of the schema. The object {{\\\&quot;properties\\\&quot;: {{\\\&quot;foo\\\&quot;: [\\\&quot;bar\\\&quot;, \\\&quot;baz\\\&quot;]}}}} is not well-formatted.\\n\\n{optional_additional_definitions_prompt}Here is the input schema:\\n```\\n{input_schema}\\n```\\n\\nHere is the output schema:\\n```\\n{output_schema}\\n```\\nNow output the results for the following inputs:\\n```\\n{inputs}\\n```\&quot;,\n\&quot;num_retries_on_parser_failure\&quot;: 3\n}\n}\n}\n}\n}\n```&quot;, &quot;additional_kwargs&quot;: {}}]}, &quot;result&quot;: {&quot;content&quot;: &quot;{\n  \&quot;return_value\&quot;: {\n    \&quot;best_hyperparameters\&quot;: {\n      \&quot;blackboard_pagi_prompt_optimizer_llm_function\&quot;: {\n        \&quot;LLMStructuredPrompt_query\&quot;: {\n          \&quot;json_dumps_kwargs\&quot;: {\n            \&quot;indent\&quot;: 0\n          },\n          \&quot;additional_definitions_prompt_template\&quot;: \&quot;Here is the schema for additional data types:\\n```\\n{additional_definitions}\\n```\\n\\n\&quot;,\n          \&quot;llm_structured_prompt_template\&quot;: \&quot;{docstring}\\n\\nThe input and output are formatted as a JSON interface that conforms to the JSON schemas below.\\n\\nAs an example, for the schema {{\\\&quot;properties\\\&quot;: {{\\\&quot;foo\\\&quot;: {{\\\&quot;description\\\&quot;: \\\&quot;a list of strings\\\&quot;, \\\&quot;type\\\&quot;: \\\&quot;array\\\&quot;, \\\&quot;items\\\&quot;: {{\\\&quot;type\\\&quot;: \\\&quot;string\\\&quot;}}}}}}, \\\&quot;required\\\&quot;: [\\\&quot;foo\\\&quot;]}}}} the object {{\\\&quot;foo\\\&quot;: [\\\&quot;bar\\\&quot;, \\\&quot;baz\\\&quot;]}} is a well-formatted instance of the schema. The object {{\\\&quot;properties\\\&quot;: {{\\\&quot;foo\\\&quot;: [\\\&quot;bar\\\&quot;, \\\&quot;baz\\\&quot;]}}}} is not well-formatted.\\n\\n{optional_additional_definitions_prompt}Here is the input schema:\\n```\\n{input_schema}\\n```\\n\\nHere is the output schema:\\n```\\n{output_schema}\\n```\\nNow output the results for the following inputs:\\n```\\n{inputs}\\n```\&quot;,\n          \&quot;num_retries_on_parser_failure\&quot;: 3\n        }\n      }\n    },\n    \&quot;suggestion\&quot;: \&quot;The current hyperparameters seem to be working well for the tasks. However, it might be beneficial to explore different domains and number of topics to generate to further test the performance of the model.\&quot;,\n    \&quot;task_parameters_suggestions\&quot;: [\n      {\n        \&quot;domain\&quot;: \&quot;science\&quot;,\n        \&quot;n\&quot;: 2\n      },\n      {\n        \&quot;domain\&quot;: \&quot;literature\&quot;,\n        \&quot;n\&quot;: 3\n      },\n      {\n        \&quot;domain\&quot;: \&quot;philosophy\&quot;,\n        \&quot;n\&quot;: 2\n      }\n    ],\n    \&quot;hyperparameter_suggestions\&quot;: [\n      {\n        \&quot;blackboard_pagi_prompt_optimizer_llm_function\&quot;: {\n          \&quot;LLMStructuredPrompt_query\&quot;: {\n            \&quot;json_dumps_kwargs\&quot;: {\n              \&quot;indent\&quot;: 0\n            },\n            \&quot;additional_definitions_prompt_template\&quot;: \&quot;Here is the schema for additional data types:\\n```\\n{additional_definitions}\\n```\\n\\n\&quot;,\n            \&quot;llm_structured_prompt_template\&quot;: \&quot;{docstring}\\n\\nThe input and output are formatted as a JSON interface that conforms to the JSON schemas below.\\n\\nAs an example, for the schema {{\\\&quot;properties\\\&quot;: {{\\\&quot;foo\\\&quot;: {{\\\&quot;description\\\&quot;: \\\&quot;a list of strings\\\&quot;, \\\&quot;type\\\&quot;: \\\&quot;array\\\&quot;, \\\&quot;items\\\&quot;: {{\\\&quot;type\\\&quot;: \\\&quot;string\\\&quot;}}}}}}, \\\&quot;required\\\&quot;: [\\\&quot;foo\\\&quot;]}}}} the object {{\\\&quot;foo\\\&quot;: [\\\&quot;bar\\\&quot;, \\\&quot;baz\\\&quot;]}} is a well-formatted instance of the schema. The object {{\\\&quot;properties\\\&quot;: {{\\\&quot;foo\\\&quot;: [\\\&quot;bar\\\&quot;, \\\&quot;baz\\\&quot;]}}}} is not well-formatted.\\n\\n{optional_additional_definitions_prompt}Here is the input schema:\\n```\\n{input_schema}\\n```\\n\\nHere is the output schema:\\n```\\n{output_schema}\\n```\\nNow output the results for the following inputs:\\n```\\n{inputs}\\n```\&quot;,\n            \&quot;num_retries_on_parser_failure\&quot;: 4\n          }\n        }\n      }\n    ]\n  }\n}&quot;, &quot;additional_kwargs&quot;: {}}}, &quot;children&quot;: []}" id="34" width="96.49954089601668%" x="0.001479157994886127%" y="1.8em"><defs /><rect data-id="34" fill="#268bd2" height="1.7em" id="34_box" onclick="handleClick(evt)" rx="2" ry="2" width="99.5%" x="2px" y="0" /><text clip-path="url(#34_clip)" fill="black" font-family="Arial" font-size="1em" pointer-events="none" x="4px" y="1.35em">TrackedChatModel</text></svg></svg></svg><svg data-raw="{&quot;kind&quot;: &quot;CHAIN&quot;, &quot;name&quot;: &quot;create_essay_topics&quot;, &quot;event_id&quot;: 35, &quot;start_time_ms&quot;: 1684491239375, &quot;end_time_ms&quot;: 1684491242390, &quot;running&quot;: false, &quot;delta_frame_infos&quot;: [{&quot;module&quot;: &quot;blackboard_pagi.prompt_optimizer.llm_function&quot;, &quot;lineno&quot;: 732, &quot;function&quot;: &quot;explicit&quot;, &quot;code_context&quot;: null, &quot;index&quot;: null}], &quot;properties&quot;: {&quot;arguments&quot;: {&quot;self&quot;: &quot;&lt;blackboard_pagi.prompt_optimizer.llm_function.LLMFunction object at 0x169e21fd0&gt;&quot;, &quot;language_model_or_chat_chain&quot;: {&quot;chat_model&quot;: {&quot;_type&quot;: &quot;ChatOpenAI&quot;}, &quot;messages&quot;: []}, &quot;kwargs&quot;: {&quot;domain&quot;: &quot;science&quot;, &quot;n&quot;: 2}}, &quot;result&quot;: [&quot;The impact of technology on scientific research&quot;, &quot;Ethical considerations in scientific experimentation&quot;]}, &quot;children&quot;: []}" id="35" width="0.5306490071076584%" x="73.25582120433535%" y="1.8em"><defs /><rect data-id="35" fill="#2aa198" height="1.7em" id="35_box" onclick="handleClick(evt)" rx="2" ry="2" width="99.5%" x="2px" y="0" /><text clip-path="url(#35_clip)" fill="black" font-family="Arial" font-size="1em" pointer-events="none" x="4px" y="1.35em">create_essay_topics</text><svg data-raw="{&quot;kind&quot;: &quot;CHAIN&quot;, &quot;name&quot;: &quot;LLMStructuredPrompt&quot;, &quot;event_id&quot;: 36, &quot;start_time_ms&quot;: 1684491239377, &quot;end_time_ms&quot;: 1684491242384, &quot;running&quot;: false, &quot;delta_frame_infos&quot;: [{&quot;module&quot;: &quot;blackboard_pagi.prompt_optimizer.llm_function&quot;, &quot;lineno&quot;: 758, &quot;function&quot;: &quot;__call__&quot;, &quot;code_context&quot;: null, &quot;index&quot;: null}, {&quot;module&quot;: &quot;blackboard_pagi.utils.tracer.trace_builder&quot;, &quot;lineno&quot;: 345, &quot;function&quot;: &quot;__call__&quot;, &quot;code_context&quot;: null, &quot;index&quot;: null}, {&quot;module&quot;: &quot;blackboard_pagi.prompt_optimizer.llm_function&quot;, &quot;lineno&quot;: 732, &quot;function&quot;: &quot;explicit&quot;, &quot;code_context&quot;: null, &quot;index&quot;: null}], &quot;properties&quot;: {&quot;arguments&quot;: {&quot;domain&quot;: &quot;science&quot;, &quot;n&quot;: 2}, &quot;result&quot;: [&quot;The impact of technology on scientific research&quot;, &quot;Ethical considerations in scientific experimentation&quot;]}, &quot;children&quot;: []}" id="36" width="97.26119059701493%" x="0.0660033167495854%" y="1.8em"><defs /><rect data-id="36" fill="#2aa198" height="1.7em" id="36_box" onclick="handleClick(evt)" rx="2" ry="2" width="99.5%" x="2px" y="0" /><text clip-path="url(#36_clip)" fill="black" font-family="Arial" font-size="1em" pointer-events="none" x="4px" y="1.35em">LLMStructuredPrompt</text><svg data-raw="{&quot;kind&quot;: &quot;LLM&quot;, &quot;name&quot;: &quot;TrackedChatModel&quot;, &quot;event_id&quot;: 37, &quot;start_time_ms&quot;: 1684491239378, &quot;end_time_ms&quot;: 1684491242369, &quot;running&quot;: false, &quot;delta_frame_infos&quot;: [{&quot;module&quot;: &quot;blackboard_pagi.prompts.chat_chain&quot;, &quot;lineno&quot;: 35, &quot;function&quot;: &quot;query&quot;, &quot;code_context&quot;: null, &quot;index&quot;: null}, {&quot;module&quot;: &quot;blackboard_pagi.prompt_optimizer.llm_function&quot;, &quot;lineno&quot;: 455, &quot;function&quot;: &quot;query&quot;, &quot;code_context&quot;: null, &quot;index&quot;: null}, {&quot;module&quot;: &quot;blackboard_pagi.prompt_optimizer.track_hyperparameters&quot;, &quot;lineno&quot;: 328, &quot;function&quot;: &quot;__call__&quot;, &quot;code_context&quot;: null, &quot;index&quot;: null}, {&quot;module&quot;: &quot;blackboard_pagi.prompt_optimizer.llm_function&quot;, &quot;lineno&quot;: 377, &quot;function&quot;: &quot;__call__&quot;, &quot;code_context&quot;: null, &quot;index&quot;: null}, {&quot;module&quot;: &quot;blackboard_pagi.utils.tracer.trace_builder&quot;, &quot;lineno&quot;: 345, &quot;function&quot;: &quot;__call__&quot;, &quot;code_context&quot;: null, &quot;index&quot;: null}, {&quot;module&quot;: &quot;blackboard_pagi.prompt_optimizer.llm_function&quot;, &quot;lineno&quot;: 758, &quot;function&quot;: &quot;__call__&quot;, &quot;code_context&quot;: null, &quot;index&quot;: null}], &quot;properties&quot;: {&quot;arguments&quot;: {&quot;self&quot;: {&quot;_type&quot;: &quot;ChatOpenAI&quot;}, &quot;messages&quot;: [{&quot;content&quot;: &quot;Create a list of essay topics.\n\nThe input and output are formatted as a JSON interface that conforms to the JSON schemas below.\n\nAs an example, for the schema {\&quot;properties\&quot;: {\&quot;foo\&quot;: {\&quot;description\&quot;: \&quot;a list of strings\&quot;, \&quot;type\&quot;: \&quot;array\&quot;, \&quot;items\&quot;: {\&quot;type\&quot;: \&quot;string\&quot;}}}, \&quot;required\&quot;: [\&quot;foo\&quot;]}} the object {\&quot;foo\&quot;: [\&quot;bar\&quot;, \&quot;baz\&quot;]} is a well-formatted instance of the schema. The object {\&quot;properties\&quot;: {\&quot;foo\&quot;: [\&quot;bar\&quot;, \&quot;baz\&quot;]}} is not well-formatted.\n\nHere is the input schema:\n```\n{\n\&quot;properties\&quot;: {\n\&quot;domain\&quot;: {\n\&quot;description\&quot;: \&quot;The domain or general area of the essay topic\&quot;,\n\&quot;type\&quot;: \&quot;string\&quot;\n},\n\&quot;n\&quot;: {\n\&quot;description\&quot;: \&quot;Number of topics to generate\&quot;,\n\&quot;type\&quot;: \&quot;integer\&quot;\n}\n},\n\&quot;required\&quot;: [\n\&quot;domain\&quot;,\n\&quot;n\&quot;\n]\n}\n```\n\nHere is the output schema:\n```\n{\n\&quot;properties\&quot;: {\n\&quot;return_value\&quot;: {\n\&quot;type\&quot;: \&quot;array\&quot;,\n\&quot;items\&quot;: {\n\&quot;type\&quot;: \&quot;string\&quot;\n}\n}\n},\n\&quot;required\&quot;: [\n\&quot;return_value\&quot;\n]\n}\n```\nNow output the results for the following inputs:\n```\n{\n\&quot;domain\&quot;: \&quot;science\&quot;,\n\&quot;n\&quot;: 2\n}\n```&quot;, &quot;additional_kwargs&quot;: {}}]}, &quot;result&quot;: {&quot;content&quot;: &quot;{\n\&quot;return_value\&quot;: [\n\&quot;The impact of technology on scientific research\&quot;,\n\&quot;Ethical considerations in scientific experimentation\&quot;\n]\n}&quot;, &quot;additional_kwargs&quot;: {}}}, &quot;children&quot;: []}" id="37" width="96.03104381293649%" x="0.03308945793149318%" y="1.8em"><defs /><rect data-id="37" fill="#268bd2" height="1.7em" id="37_box" onclick="handleClick(evt)" rx="2" ry="2" width="99.5%" x="2px" y="0" /><text clip-path="url(#37_clip)" fill="black" font-family="Arial" font-size="1em" pointer-events="none" x="4px" y="1.35em">TrackedChatModel</text></svg></svg></svg><svg data-raw="{&quot;kind&quot;: &quot;CHAIN&quot;, &quot;name&quot;: &quot;reflect_on_task_run&quot;, &quot;event_id&quot;: 38, &quot;start_time_ms&quot;: 1684491242407, &quot;end_time_ms&quot;: 1684491289090, &quot;running&quot;: false, &quot;delta_frame_infos&quot;: [{&quot;module&quot;: &quot;blackboard_pagi.prompt_optimizer.track_hyperparameters&quot;, &quot;lineno&quot;: 325, &quot;function&quot;: &quot;__call__&quot;, &quot;code_context&quot;: null, &quot;index&quot;: null}], &quot;properties&quot;: {&quot;arguments&quot;: {&quot;self&quot;: &quot;&lt;blackboard_pagi.prompt_optimizer.llm_function.LLMFunction object at 0x169c74210&gt;&quot;, &quot;language_model_or_chat_chain&quot;: {&quot;chat_model&quot;: {&quot;_type&quot;: &quot;ChatOpenAI&quot;}, &quot;messages&quot;: []}, &quot;args&quot;: [{&quot;task_parameters&quot;: {&quot;domain&quot;: &quot;science&quot;, &quot;n&quot;: 2}, &quot;hyperparameters&quot;: {&quot;blackboard_pagi_prompt_optimizer_llm_function&quot;: {&quot;LLMStructuredPrompt_query&quot;: {&quot;json_dumps_kwargs&quot;: {&quot;indent&quot;: 0}, &quot;additional_definitions_prompt_template&quot;: &quot;Here is the schema for additional data types:\n```\n{additional_definitions}\n```\n\n&quot;, &quot;llm_structured_prompt_template&quot;: &quot;{docstring}\n\nThe input and output are formatted as a JSON interface that conforms to the JSON schemas below.\n\nAs an example, for the schema {{\&quot;properties\&quot;: {{\&quot;foo\&quot;: {{\&quot;description\&quot;: \&quot;a list of strings\&quot;, \&quot;type\&quot;: \&quot;array\&quot;, \&quot;items\&quot;: {{\&quot;type\&quot;: \&quot;string\&quot;}}}}}}, \&quot;required\&quot;: [\&quot;foo\&quot;]}}}} the object {{\&quot;foo\&quot;: [\&quot;bar\&quot;, \&quot;baz\&quot;]}} is a well-formatted instance of the schema. The object {{\&quot;properties\&quot;: {{\&quot;foo\&quot;: [\&quot;bar\&quot;, \&quot;baz\&quot;]}}}} is not well-formatted.\n\n{optional_additional_definitions_prompt}Here is the input schema:\n```\n{input_schema}\n```\n\nHere is the output schema:\n```\n{output_schema}\n```\nNow output the results for the following inputs:\n```\n{inputs}\n```&quot;, &quot;num_retries_on_parser_failure&quot;: 4}}}, &quot;all_chat_chains&quot;: [], &quot;return_value&quot;: [&quot;The impact of technology on scientific research&quot;, &quot;Ethical considerations in scientific experimentation&quot;], &quot;exception&quot;: null}]}, &quot;result&quot;: {&quot;feedback&quot;: &quot;The generated essay topics are relevant to the science domain and satisfy the task description and task parameters. The content is appropriate and does not require any information from the all_chains and all_prompts fields.&quot;, &quot;evaluation&quot;: &quot;The output is satisfying as it provides two essay topics related to the science domain. There is nothing wrong or missing in the output.&quot;, &quot;hyperparameter_suggestion&quot;: &quot;The current hyperparameters seem to be working well for this task. No changes are needed at this time.&quot;, &quot;hyperparameter_missing&quot;: &quot;There are no missing hyperparameters that need to be added for this task, as the current hyperparameters are producing satisfactory results.&quot;}}, &quot;children&quot;: []}" id="38" width="8.216347462290816%" x="73.79485257594546%" y="1.8em"><defs /><rect data-id="38" fill="#2aa198" height="1.7em" id="38_box" onclick="handleClick(evt)" rx="2" ry="2" width="99.5%" x="2px" y="0" /><text clip-path="url(#38_clip)" fill="black" font-family="Arial" font-size="1em" pointer-events="none" x="4px" y="1.35em">reflect_on_task_run</text><svg data-raw="{&quot;kind&quot;: &quot;CHAIN&quot;, &quot;name&quot;: &quot;LLMStructuredPrompt&quot;, &quot;event_id&quot;: 39, &quot;start_time_ms&quot;: 1684491242408, &quot;end_time_ms&quot;: 1684491289083, &quot;running&quot;: false, &quot;delta_frame_infos&quot;: [{&quot;module&quot;: &quot;blackboard_pagi.prompt_optimizer.llm_function&quot;, &quot;lineno&quot;: 758, &quot;function&quot;: &quot;__call__&quot;, &quot;code_context&quot;: null, &quot;index&quot;: null}, {&quot;module&quot;: &quot;blackboard_pagi.utils.tracer.trace_builder&quot;, &quot;lineno&quot;: 345, &quot;function&quot;: &quot;__call__&quot;, &quot;code_context&quot;: null, &quot;index&quot;: null}, {&quot;module&quot;: &quot;blackboard_pagi.prompt_optimizer.track_hyperparameters&quot;, &quot;lineno&quot;: 325, &quot;function&quot;: &quot;__call__&quot;, &quot;code_context&quot;: null, &quot;index&quot;: null}], &quot;properties&quot;: {&quot;arguments&quot;: {&quot;task_run&quot;: {&quot;task_parameters&quot;: {&quot;domain&quot;: &quot;science&quot;, &quot;n&quot;: 2}, &quot;hyperparameters&quot;: {&quot;blackboard_pagi_prompt_optimizer_llm_function&quot;: {&quot;LLMStructuredPrompt_query&quot;: {&quot;json_dumps_kwargs&quot;: {&quot;indent&quot;: 0}, &quot;additional_definitions_prompt_template&quot;: &quot;Here is the schema for additional data types:\n```\n{additional_definitions}\n```\n\n&quot;, &quot;llm_structured_prompt_template&quot;: &quot;{docstring}\n\nThe input and output are formatted as a JSON interface that conforms to the JSON schemas below.\n\nAs an example, for the schema {{\&quot;properties\&quot;: {{\&quot;foo\&quot;: {{\&quot;description\&quot;: \&quot;a list of strings\&quot;, \&quot;type\&quot;: \&quot;array\&quot;, \&quot;items\&quot;: {{\&quot;type\&quot;: \&quot;string\&quot;}}}}}}, \&quot;required\&quot;: [\&quot;foo\&quot;]}}}} the object {{\&quot;foo\&quot;: [\&quot;bar\&quot;, \&quot;baz\&quot;]}} is a well-formatted instance of the schema. The object {{\&quot;properties\&quot;: {{\&quot;foo\&quot;: [\&quot;bar\&quot;, \&quot;baz\&quot;]}}}} is not well-formatted.\n\n{optional_additional_definitions_prompt}Here is the input schema:\n```\n{input_schema}\n```\n\nHere is the output schema:\n```\n{output_schema}\n```\nNow output the results for the following inputs:\n```\n{inputs}\n```&quot;, &quot;num_retries_on_parser_failure&quot;: 4}}}, &quot;all_chat_chains&quot;: [], &quot;return_value&quot;: [&quot;The impact of technology on scientific research&quot;, &quot;Ethical considerations in scientific experimentation&quot;], &quot;exception&quot;: null}}, &quot;result&quot;: {&quot;feedback&quot;: &quot;The generated essay topics are relevant to the science domain and satisfy the task description and task parameters. The content is appropriate and does not require any information from the all_chains and all_prompts fields.&quot;, &quot;evaluation&quot;: &quot;The output is satisfying as it provides two essay topics related to the science domain. There is nothing wrong or missing in the output.&quot;, &quot;hyperparameter_suggestion&quot;: &quot;The current hyperparameters seem to be working well for this task. No changes are needed at this time.&quot;, &quot;hyperparameter_missing&quot;: &quot;There are no missing hyperparameters that need to be added for this task, as the current hyperparameters are producing satisfactory results.&quot;}}, &quot;children&quot;: []}" id="39" width="97.5032381434355%" x="0.0021313968682389736%" y="1.8em"><defs /><rect data-id="39" fill="#2aa198" height="1.7em" id="39_box" onclick="handleClick(evt)" rx="2" ry="2" width="99.5%" x="2px" y="0" /><text clip-path="url(#39_clip)" fill="black" font-family="Arial" font-size="1em" pointer-events="none" x="4px" y="1.35em">LLMStructuredPrompt</text><svg data-raw="{&quot;kind&quot;: &quot;LLM&quot;, &quot;name&quot;: &quot;TrackedChatModel&quot;, &quot;event_id&quot;: 40, &quot;start_time_ms&quot;: 1684491242409, &quot;end_time_ms&quot;: 1684491289062, &quot;running&quot;: false, &quot;delta_frame_infos&quot;: [{&quot;module&quot;: &quot;blackboard_pagi.prompts.chat_chain&quot;, &quot;lineno&quot;: 35, &quot;function&quot;: &quot;query&quot;, &quot;code_context&quot;: null, &quot;index&quot;: null}, {&quot;module&quot;: &quot;blackboard_pagi.prompt_optimizer.llm_function&quot;, &quot;lineno&quot;: 455, &quot;function&quot;: &quot;query&quot;, &quot;code_context&quot;: null, &quot;index&quot;: null}, {&quot;module&quot;: &quot;blackboard_pagi.prompt_optimizer.track_hyperparameters&quot;, &quot;lineno&quot;: 325, &quot;function&quot;: &quot;__call__&quot;, &quot;code_context&quot;: null, &quot;index&quot;: null}, {&quot;module&quot;: &quot;blackboard_pagi.prompt_optimizer.llm_function&quot;, &quot;lineno&quot;: 377, &quot;function&quot;: &quot;__call__&quot;, &quot;code_context&quot;: null, &quot;index&quot;: null}, {&quot;module&quot;: &quot;blackboard_pagi.utils.tracer.trace_builder&quot;, &quot;lineno&quot;: 345, &quot;function&quot;: &quot;__call__&quot;, &quot;code_context&quot;: null, &quot;index&quot;: null}, {&quot;module&quot;: &quot;blackboard_pagi.prompt_optimizer.llm_function&quot;, &quot;lineno&quot;: 758, &quot;function&quot;: &quot;__call__&quot;, &quot;code_context&quot;: null, &quot;index&quot;: null}], &quot;properties&quot;: {&quot;arguments&quot;: {&quot;self&quot;: {&quot;_type&quot;: &quot;ChatOpenAI&quot;}, &quot;messages&quot;: [{&quot;content&quot;: &quot;Reflect on the results given the task parameters and hyperparameters.\n\nThis contains the lessons we learn from each task run to come up with better hyperparameters to try.\n\nThe input and output are formatted as a JSON interface that conforms to the JSON schemas below.\n\nAs an example, for the schema {\&quot;properties\&quot;: {\&quot;foo\&quot;: {\&quot;description\&quot;: \&quot;a list of strings\&quot;, \&quot;type\&quot;: \&quot;array\&quot;, \&quot;items\&quot;: {\&quot;type\&quot;: \&quot;string\&quot;}}}, \&quot;required\&quot;: [\&quot;foo\&quot;]}} the object {\&quot;foo\&quot;: [\&quot;bar\&quot;, \&quot;baz\&quot;]} is a well-formatted instance of the schema. The object {\&quot;properties\&quot;: {\&quot;foo\&quot;: [\&quot;bar\&quot;, \&quot;baz\&quot;]}} is not well-formatted.\n\nHere is the schema for additional data types:\n```\n{\n\&quot;CreateEssayTopicsInputs\&quot;: {\n\&quot;properties\&quot;: {\n\&quot;domain\&quot;: {\n\&quot;description\&quot;: \&quot;The domain or general area of the essay topic\&quot;,\n\&quot;type\&quot;: \&quot;string\&quot;\n},\n\&quot;n\&quot;: {\n\&quot;description\&quot;: \&quot;Number of topics to generate\&quot;,\n\&quot;type\&quot;: \&quot;integer\&quot;\n}\n},\n\&quot;required\&quot;: [\n\&quot;domain\&quot;,\n\&quot;n\&quot;\n]\n},\n\&quot;QueryHyperparameters\&quot;: {\n\&quot;properties\&quot;: {\n\&quot;json_dumps_kwargs\&quot;: {\n\&quot;default\&quot;: {\n\&quot;indent\&quot;: 0\n},\n\&quot;type\&quot;: \&quot;object\&quot;\n},\n\&quot;additional_definitions_prompt_template\&quot;: {\n\&quot;default\&quot;: \&quot;Here is the schema for additional data types:\\n```\\n{additional_definitions}\\n```\\n\\n\&quot;,\n\&quot;type\&quot;: \&quot;string\&quot;\n},\n\&quot;llm_structured_prompt_template\&quot;: {\n\&quot;description\&quot;: \&quot;The general-purpose prompt for the structured prompt execution. It tells the LLM what to do and how to read function arguments and structure return values. \&quot;,\n\&quot;default\&quot;: \&quot;{docstring}\\n\\nThe input and output are formatted as a JSON interface that conforms to the JSON schemas below.\\n\\nAs an example, for the schema {{\\\&quot;properties\\\&quot;: {{\\\&quot;foo\\\&quot;: {{\\\&quot;description\\\&quot;: \\\&quot;a list of strings\\\&quot;, \\\&quot;type\\\&quot;: \\\&quot;array\\\&quot;, \\\&quot;items\\\&quot;: {{\\\&quot;type\\\&quot;: \\\&quot;string\\\&quot;}}}}}}, \\\&quot;required\\\&quot;: [\\\&quot;foo\\\&quot;]}}}} the object {{\\\&quot;foo\\\&quot;: [\\\&quot;bar\\\&quot;, \\\&quot;baz\\\&quot;]}} is a well-formatted instance of the schema. The object {{\\\&quot;properties\\\&quot;: {{\\\&quot;foo\\\&quot;: [\\\&quot;bar\\\&quot;, \\\&quot;baz\\\&quot;]}}}} is not well-formatted.\\n\\n{optional_additional_definitions_prompt}Here is the input schema:\\n```\\n{input_schema}\\n```\\n\\nHere is the output schema:\\n```\\n{output_schema}\\n```\\nNow output the results for the following inputs:\\n```\\n{inputs}\\n```\&quot;,\n\&quot;type\&quot;: \&quot;string\&quot;\n},\n\&quot;num_retries_on_parser_failure\&quot;: {\n\&quot;default\&quot;: 3,\n\&quot;type\&quot;: \&quot;integer\&quot;\n}\n}\n},\n\&quot;blackboard_pagi_prompt_optimizer_llm_functionModule\&quot;: {\n\&quot;properties\&quot;: {\n\&quot;LLMStructuredPrompt_query\&quot;: {\n\&quot;default\&quot;: {\n\&quot;json_dumps_kwargs\&quot;: {\n\&quot;indent\&quot;: 0\n},\n\&quot;additional_definitions_prompt_template\&quot;: \&quot;Here is the schema for additional data types:\\n```\\n{additional_definitions}\\n```\\n\\n\&quot;,\n\&quot;llm_structured_prompt_template\&quot;: \&quot;{docstring}\\n\\nThe input and output are formatted as a JSON interface that conforms to the JSON schemas below.\\n\\nAs an example, for the schema {{\\\&quot;properties\\\&quot;: {{\\\&quot;foo\\\&quot;: {{\\\&quot;description\\\&quot;: \\\&quot;a list of strings\\\&quot;, \\\&quot;type\\\&quot;: \\\&quot;array\\\&quot;, \\\&quot;items\\\&quot;: {{\\\&quot;type\\\&quot;: \\\&quot;string\\\&quot;}}}}}}, \\\&quot;required\\\&quot;: [\\\&quot;foo\\\&quot;]}}}} the object {{\\\&quot;foo\\\&quot;: [\\\&quot;bar\\\&quot;, \\\&quot;baz\\\&quot;]}} is a well-formatted instance of the schema. The object {{\\\&quot;properties\\\&quot;: {{\\\&quot;foo\\\&quot;: [\\\&quot;bar\\\&quot;, \\\&quot;baz\\\&quot;]}}}} is not well-formatted.\\n\\n{optional_additional_definitions_prompt}Here is the input schema:\\n```\\n{input_schema}\\n```\\n\\nHere is the output schema:\\n```\\n{output_schema}\\n```\\nNow output the results for the following inputs:\\n```\\n{inputs}\\n```\&quot;,\n\&quot;num_retries_on_parser_failure\&quot;: 4\n},\n\&quot;allOf\&quot;: [\n{\n\&quot;$ref\&quot;: \&quot;#/definitions/QueryHyperparameters\&quot;\n}\n]\n}\n}\n},\n\&quot;Hyperparameters\&quot;: {\n\&quot;properties\&quot;: {\n\&quot;blackboard_pagi_prompt_optimizer_llm_function\&quot;: {\n\&quot;default\&quot;: {\n\&quot;LLMStructuredPrompt_query\&quot;: {\n\&quot;json_dumps_kwargs\&quot;: {\n\&quot;indent\&quot;: 0\n},\n\&quot;additional_definitions_prompt_template\&quot;: \&quot;Here is the schema for additional data types:\\n```\\n{additional_definitions}\\n```\\n\\n\&quot;,\n\&quot;llm_structured_prompt_template\&quot;: \&quot;{docstring}\\n\\nThe input and output are formatted as a JSON interface that conforms to the JSON schemas below.\\n\\nAs an example, for the schema {{\\\&quot;properties\\\&quot;: {{\\\&quot;foo\\\&quot;: {{\\\&quot;description\\\&quot;: \\\&quot;a list of strings\\\&quot;, \\\&quot;type\\\&quot;: \\\&quot;array\\\&quot;, \\\&quot;items\\\&quot;: {{\\\&quot;type\\\&quot;: \\\&quot;string\\\&quot;}}}}}}, \\\&quot;required\\\&quot;: [\\\&quot;foo\\\&quot;]}}}} the object {{\\\&quot;foo\\\&quot;: [\\\&quot;bar\\\&quot;, \\\&quot;baz\\\&quot;]}} is a well-formatted instance of the schema. The object {{\\\&quot;properties\\\&quot;: {{\\\&quot;foo\\\&quot;: [\\\&quot;bar\\\&quot;, \\\&quot;baz\\\&quot;]}}}} is not well-formatted.\\n\\n{optional_additional_definitions_prompt}Here is the input schema:\\n```\\n{input_schema}\\n```\\n\\nHere is the output schema:\\n```\\n{output_schema}\\n```\\nNow output the results for the following inputs:\\n```\\n{inputs}\\n```\&quot;,\n\&quot;num_retries_on_parser_failure\&quot;: 4\n}\n},\n\&quot;allOf\&quot;: [\n{\n\&quot;$ref\&quot;: \&quot;#/definitions/blackboard_pagi_prompt_optimizer_llm_functionModule\&quot;\n}\n]\n}\n}\n},\n\&quot;TaskRun_CreateEssayTopicsInputs__list_str___Hyperparameters_\&quot;: {\n\&quot;description\&quot;: \&quot;The task run. This is the 'data' we use to optimize the hyperparameters.\&quot;,\n\&quot;properties\&quot;: {\n\&quot;task_parameters\&quot;: {\n\&quot;description\&quot;: \&quot;The task parameters.\&quot;,\n\&quot;allOf\&quot;: [\n{\n\&quot;$ref\&quot;: \&quot;#/definitions/CreateEssayTopicsInputs\&quot;\n}\n]\n},\n\&quot;hyperparameters\&quot;: {\n\&quot;description\&quot;: \&quot;The hyperparameters used for the task. We optimize these.\&quot;,\n\&quot;allOf\&quot;: [\n{\n\&quot;$ref\&quot;: \&quot;#/definitions/Hyperparameters\&quot;\n}\n]\n},\n\&quot;all_chat_chains\&quot;: {\n\&quot;description\&quot;: \&quot;The chat chains from the task execution.\&quot;,\n\&quot;type\&quot;: \&quot;array\&quot;,\n\&quot;items\&quot;: {\n\&quot;type\&quot;: \&quot;object\&quot;\n}\n},\n\&quot;return_value\&quot;: {\n\&quot;description\&quot;: \&quot;The results of the task. (None for exceptions/failure.)\&quot;,\n\&quot;type\&quot;: \&quot;array\&quot;,\n\&quot;items\&quot;: {\n\&quot;type\&quot;: \&quot;string\&quot;\n}\n},\n\&quot;exception\&quot;: {\n\&quot;description\&quot;: \&quot;Exception that occurred during the task execution.\&quot;,\n\&quot;type\&quot;: \&quot;string\&quot;\n}\n},\n\&quot;required\&quot;: [\n\&quot;task_parameters\&quot;,\n\&quot;hyperparameters\&quot;,\n\&quot;all_chat_chains\&quot;,\n\&quot;return_value\&quot;,\n\&quot;exception\&quot;\n]\n},\n\&quot;TaskReflection\&quot;: {\n\&quot;description\&quot;: \&quot;The reflections on the task.\\n\\nThis contains the lessons we learn from each task run to come up with better hyperparameters to try.\&quot;,\n\&quot;properties\&quot;: {\n\&quot;feedback\&quot;: {\n\&quot;description\&quot;: \&quot;Only look at the final results field. Does its content satisfy the task description and task parameters? Does it contain all the relevant information from the all_chains and all_prompts fields? What could be improved in the results?\&quot;,\n\&quot;type\&quot;: \&quot;string\&quot;\n},\n\&quot;evaluation\&quot;: {\n\&quot;description\&quot;: \&quot;The evaluation of the outputs given the task. Is the output satisfying? What is wrong? What is missing?\&quot;,\n\&quot;type\&quot;: \&quot;string\&quot;\n},\n\&quot;hyperparameter_suggestion\&quot;: {\n\&quot;description\&quot;: \&quot;How we want to change the hyperparameters to improve the results. What could we try to change?\&quot;,\n\&quot;type\&quot;: \&quot;string\&quot;\n},\n\&quot;hyperparameter_missing\&quot;: {\n\&quot;description\&quot;: \&quot;What hyperparameters are missing to improve the results? What could be changed that is not exposed via hyperparameters?\&quot;,\n\&quot;type\&quot;: \&quot;string\&quot;\n}\n},\n\&quot;required\&quot;: [\n\&quot;feedback\&quot;,\n\&quot;evaluation\&quot;,\n\&quot;hyperparameter_suggestion\&quot;,\n\&quot;hyperparameter_missing\&quot;\n]\n}\n}\n```\n\nHere is the input schema:\n```\n{\n\&quot;properties\&quot;: {\n\&quot;task_run\&quot;: {\n\&quot;$ref\&quot;: \&quot;#/definitions/TaskRun_CreateEssayTopicsInputs__list_str___Hyperparameters_\&quot;\n}\n},\n\&quot;required\&quot;: [\n\&quot;task_run\&quot;\n]\n}\n```\n\nHere is the output schema:\n```\n{\n\&quot;properties\&quot;: {\n\&quot;return_value\&quot;: {\n\&quot;$ref\&quot;: \&quot;#/definitions/TaskReflection\&quot;\n}\n},\n\&quot;required\&quot;: [\n\&quot;return_value\&quot;\n]\n}\n```\nNow output the results for the following inputs:\n```\n{\n\&quot;task_run\&quot;: {\n\&quot;task_parameters\&quot;: {\n\&quot;domain\&quot;: \&quot;science\&quot;,\n\&quot;n\&quot;: 2\n},\n\&quot;hyperparameters\&quot;: {\n\&quot;blackboard_pagi_prompt_optimizer_llm_function\&quot;: {\n\&quot;LLMStructuredPrompt_query\&quot;: {\n\&quot;json_dumps_kwargs\&quot;: {\n\&quot;indent\&quot;: 0\n},\n\&quot;additional_definitions_prompt_template\&quot;: \&quot;Here is the schema for additional data types:\\n```\\n{additional_definitions}\\n```\\n\\n\&quot;,\n\&quot;llm_structured_prompt_template\&quot;: \&quot;{docstring}\\n\\nThe input and output are formatted as a JSON interface that conforms to the JSON schemas below.\\n\\nAs an example, for the schema {{\\\&quot;properties\\\&quot;: {{\\\&quot;foo\\\&quot;: {{\\\&quot;description\\\&quot;: \\\&quot;a list of strings\\\&quot;, \\\&quot;type\\\&quot;: \\\&quot;array\\\&quot;, \\\&quot;items\\\&quot;: {{\\\&quot;type\\\&quot;: \\\&quot;string\\\&quot;}}}}}}, \\\&quot;required\\\&quot;: [\\\&quot;foo\\\&quot;]}}}} the object {{\\\&quot;foo\\\&quot;: [\\\&quot;bar\\\&quot;, \\\&quot;baz\\\&quot;]}} is a well-formatted instance of the schema. The object {{\\\&quot;properties\\\&quot;: {{\\\&quot;foo\\\&quot;: [\\\&quot;bar\\\&quot;, \\\&quot;baz\\\&quot;]}}}} is not well-formatted.\\n\\n{optional_additional_definitions_prompt}Here is the input schema:\\n```\\n{input_schema}\\n```\\n\\nHere is the output schema:\\n```\\n{output_schema}\\n```\\nNow output the results for the following inputs:\\n```\\n{inputs}\\n```\&quot;,\n\&quot;num_retries_on_parser_failure\&quot;: 4\n}\n}\n},\n\&quot;all_chat_chains\&quot;: [],\n\&quot;return_value\&quot;: [\n\&quot;The impact of technology on scientific research\&quot;,\n\&quot;Ethical considerations in scientific experimentation\&quot;\n],\n\&quot;exception\&quot;: null\n}\n}\n```&quot;, &quot;additional_kwargs&quot;: {}}]}, &quot;result&quot;: {&quot;content&quot;: &quot;{\n\&quot;return_value\&quot;: {\n\&quot;feedback\&quot;: \&quot;The generated essay topics are relevant to the science domain and satisfy the task description and task parameters. The content is appropriate and does not require any information from the all_chains and all_prompts fields.\&quot;,\n\&quot;evaluation\&quot;: \&quot;The output is satisfying as it provides two essay topics related to the science domain. There is nothing wrong or missing in the output.\&quot;,\n\&quot;hyperparameter_suggestion\&quot;: \&quot;The current hyperparameters seem to be working well for this task. No changes are needed at this time.\&quot;,\n\&quot;hyperparameter_missing\&quot;: \&quot;There are no missing hyperparameters that need to be added for this task, as the current hyperparameters are producing satisfactory results.\&quot;\n}\n}&quot;, &quot;additional_kwargs&quot;: {}}}, &quot;children&quot;: []}" id="40" width="96.49924467223353%" x="0.0021317621853240492%" y="1.8em"><defs /><rect data-id="40" fill="#268bd2" height="1.7em" id="40_box" onclick="handleClick(evt)" rx="2" ry="2" width="99.5%" x="2px" y="0" /><text clip-path="url(#40_clip)" fill="black" font-family="Arial" font-size="1em" pointer-events="none" x="4px" y="1.35em">TrackedChatModel</text></svg></svg></svg><svg data-raw="{&quot;kind&quot;: &quot;CHAIN&quot;, &quot;name&quot;: &quot;create_essay_topics&quot;, &quot;event_id&quot;: 41, &quot;start_time_ms&quot;: 1684491289099, &quot;end_time_ms&quot;: 1684491293826, &quot;running&quot;: false, &quot;delta_frame_infos&quot;: [{&quot;module&quot;: &quot;blackboard_pagi.prompt_optimizer.llm_function&quot;, &quot;lineno&quot;: 732, &quot;function&quot;: &quot;explicit&quot;, &quot;code_context&quot;: null, &quot;index&quot;: null}], &quot;properties&quot;: {&quot;arguments&quot;: {&quot;self&quot;: &quot;&lt;blackboard_pagi.prompt_optimizer.llm_function.LLMFunction object at 0x169e21fd0&gt;&quot;, &quot;language_model_or_chat_chain&quot;: {&quot;chat_model&quot;: {&quot;_type&quot;: &quot;ChatOpenAI&quot;}, &quot;messages&quot;: []}, &quot;kwargs&quot;: {&quot;domain&quot;: &quot;literature&quot;, &quot;n&quot;: 3}}, &quot;result&quot;: [&quot;Analysis of the themes in The Great Gatsby&quot;, &quot;The role of women in 19th century British literature&quot;, &quot;The use of symbolism in To Kill a Mockingbird&quot;]}, &quot;children&quot;: []}" id="41" width="0.8319661215913435%" x="82.09579347410475%" y="1.8em"><defs /><rect data-id="41" fill="#2aa198" height="1.7em" id="41_box" onclick="handleClick(evt)" rx="2" ry="2" width="99.5%" x="2px" y="0" /><text clip-path="url(#41_clip)" fill="black" font-family="Arial" font-size="1em" pointer-events="none" x="4px" y="1.35em">create_essay_topics</text><svg data-raw="{&quot;kind&quot;: &quot;CHAIN&quot;, &quot;name&quot;: &quot;LLMStructuredPrompt&quot;, &quot;event_id&quot;: 42, &quot;start_time_ms&quot;: 1684491289100, &quot;end_time_ms&quot;: 1684491293818, &quot;running&quot;: false, &quot;delta_frame_infos&quot;: [{&quot;module&quot;: &quot;blackboard_pagi.prompt_optimizer.llm_function&quot;, &quot;lineno&quot;: 758, &quot;function&quot;: &quot;__call__&quot;, &quot;code_context&quot;: null, &quot;index&quot;: null}, {&quot;module&quot;: &quot;blackboard_pagi.utils.tracer.trace_builder&quot;, &quot;lineno&quot;: 345, &quot;function&quot;: &quot;__call__&quot;, &quot;code_context&quot;: null, &quot;index&quot;: null}, {&quot;module&quot;: &quot;blackboard_pagi.prompt_optimizer.llm_function&quot;, &quot;lineno&quot;: 732, &quot;function&quot;: &quot;explicit&quot;, &quot;code_context&quot;: null, &quot;index&quot;: null}], &quot;properties&quot;: {&quot;arguments&quot;: {&quot;domain&quot;: &quot;literature&quot;, &quot;n&quot;: 3}, &quot;result&quot;: [&quot;Analysis of the themes in The Great Gatsby&quot;, &quot;The role of women in 19th century British literature&quot;, &quot;The use of symbolism in To Kill a Mockingbird&quot;]}, &quot;children&quot;: []}" id="42" width="97.33427630632535%" x="0.02104929130526761%" y="1.8em"><defs /><rect data-id="42" fill="#2aa198" height="1.7em" id="42_box" onclick="handleClick(evt)" rx="2" ry="2" width="99.5%" x="2px" y="0" /><text clip-path="url(#42_clip)" fill="black" font-family="Arial" font-size="1em" pointer-events="none" x="4px" y="1.35em">LLMStructuredPrompt</text><svg data-raw="{&quot;kind&quot;: &quot;LLM&quot;, &quot;name&quot;: &quot;TrackedChatModel&quot;, &quot;event_id&quot;: 43, &quot;start_time_ms&quot;: 1684491289101, &quot;end_time_ms&quot;: 1684491293800, &quot;running&quot;: false, &quot;delta_frame_infos&quot;: [{&quot;module&quot;: &quot;blackboard_pagi.prompts.chat_chain&quot;, &quot;lineno&quot;: 35, &quot;function&quot;: &quot;query&quot;, &quot;code_context&quot;: null, &quot;index&quot;: null}, {&quot;module&quot;: &quot;blackboard_pagi.prompt_optimizer.llm_function&quot;, &quot;lineno&quot;: 455, &quot;function&quot;: &quot;query&quot;, &quot;code_context&quot;: null, &quot;index&quot;: null}, {&quot;module&quot;: &quot;blackboard_pagi.prompt_optimizer.track_hyperparameters&quot;, &quot;lineno&quot;: 328, &quot;function&quot;: &quot;__call__&quot;, &quot;code_context&quot;: null, &quot;index&quot;: null}, {&quot;module&quot;: &quot;blackboard_pagi.prompt_optimizer.llm_function&quot;, &quot;lineno&quot;: 377, &quot;function&quot;: &quot;__call__&quot;, &quot;code_context&quot;: null, &quot;index&quot;: null}, {&quot;module&quot;: &quot;blackboard_pagi.utils.tracer.trace_builder&quot;, &quot;lineno&quot;: 345, &quot;function&quot;: &quot;__call__&quot;, &quot;code_context&quot;: null, &quot;index&quot;: null}, {&quot;module&quot;: &quot;blackboard_pagi.prompt_optimizer.llm_function&quot;, &quot;lineno&quot;: 758, &quot;function&quot;: &quot;__call__&quot;, &quot;code_context&quot;: null, &quot;index&quot;: null}], &quot;properties&quot;: {&quot;arguments&quot;: {&quot;self&quot;: {&quot;_type&quot;: &quot;ChatOpenAI&quot;}, &quot;messages&quot;: [{&quot;content&quot;: &quot;Create a list of essay topics.\n\nThe input and output are formatted as a JSON interface that conforms to the JSON schemas below.\n\nAs an example, for the schema {\&quot;properties\&quot;: {\&quot;foo\&quot;: {\&quot;description\&quot;: \&quot;a list of strings\&quot;, \&quot;type\&quot;: \&quot;array\&quot;, \&quot;items\&quot;: {\&quot;type\&quot;: \&quot;string\&quot;}}}, \&quot;required\&quot;: [\&quot;foo\&quot;]}} the object {\&quot;foo\&quot;: [\&quot;bar\&quot;, \&quot;baz\&quot;]} is a well-formatted instance of the schema. The object {\&quot;properties\&quot;: {\&quot;foo\&quot;: [\&quot;bar\&quot;, \&quot;baz\&quot;]}} is not well-formatted.\n\nHere is the input schema:\n```\n{\n\&quot;properties\&quot;: {\n\&quot;domain\&quot;: {\n\&quot;description\&quot;: \&quot;The domain or general area of the essay topic\&quot;,\n\&quot;type\&quot;: \&quot;string\&quot;\n},\n\&quot;n\&quot;: {\n\&quot;description\&quot;: \&quot;Number of topics to generate\&quot;,\n\&quot;type\&quot;: \&quot;integer\&quot;\n}\n},\n\&quot;required\&quot;: [\n\&quot;domain\&quot;,\n\&quot;n\&quot;\n]\n}\n```\n\nHere is the output schema:\n```\n{\n\&quot;properties\&quot;: {\n\&quot;return_value\&quot;: {\n\&quot;type\&quot;: \&quot;array\&quot;,\n\&quot;items\&quot;: {\n\&quot;type\&quot;: \&quot;string\&quot;\n}\n}\n},\n\&quot;required\&quot;: [\n\&quot;return_value\&quot;\n]\n}\n```\nNow output the results for the following inputs:\n```\n{\n\&quot;domain\&quot;: \&quot;literature\&quot;,\n\&quot;n\&quot;: 3\n}\n```&quot;, &quot;additional_kwargs&quot;: {}}]}, &quot;result&quot;: {&quot;content&quot;: &quot;{\n\&quot;return_value\&quot;: [\n\&quot;Analysis of the themes in The Great Gatsby\&quot;,\n\&quot;The role of women in 19th century British literature\&quot;,\n\&quot;The use of symbolism in To Kill a Mockingbird\&quot;\n]\n}&quot;, &quot;additional_kwargs&quot;: {}}}, &quot;children&quot;: []}" id="43" width="96.1559522254133%" x="0.02108944467994913%" y="1.8em"><defs /><rect data-id="43" fill="#268bd2" height="1.7em" id="43_box" onclick="handleClick(evt)" rx="2" ry="2" width="99.5%" x="2px" y="0" /><text clip-path="url(#43_clip)" fill="black" font-family="Arial" font-size="1em" pointer-events="none" x="4px" y="1.35em">TrackedChatModel</text></svg></svg></svg><svg data-raw="{&quot;kind&quot;: &quot;CHAIN&quot;, &quot;name&quot;: &quot;reflect_on_task_run&quot;, &quot;event_id&quot;: 44, &quot;start_time_ms&quot;: 1684491293836, &quot;end_time_ms&quot;: 1684491332810, &quot;running&quot;: false, &quot;delta_frame_infos&quot;: [{&quot;module&quot;: &quot;blackboard_pagi.prompt_optimizer.track_hyperparameters&quot;, &quot;lineno&quot;: 325, &quot;function&quot;: &quot;__call__&quot;, &quot;code_context&quot;: null, &quot;index&quot;: null}], &quot;properties&quot;: {&quot;arguments&quot;: {&quot;self&quot;: &quot;&lt;blackboard_pagi.prompt_optimizer.llm_function.LLMFunction object at 0x169c74210&gt;&quot;, &quot;language_model_or_chat_chain&quot;: {&quot;chat_model&quot;: {&quot;_type&quot;: &quot;ChatOpenAI&quot;}, &quot;messages&quot;: []}, &quot;args&quot;: [{&quot;task_parameters&quot;: {&quot;domain&quot;: &quot;literature&quot;, &quot;n&quot;: 3}, &quot;hyperparameters&quot;: {&quot;blackboard_pagi_prompt_optimizer_llm_function&quot;: {&quot;LLMStructuredPrompt_query&quot;: {&quot;json_dumps_kwargs&quot;: {&quot;indent&quot;: 0}, &quot;additional_definitions_prompt_template&quot;: &quot;Here is the schema for additional data types:\n```\n{additional_definitions}\n```\n\n&quot;, &quot;llm_structured_prompt_template&quot;: &quot;{docstring}\n\nThe input and output are formatted as a JSON interface that conforms to the JSON schemas below.\n\nAs an example, for the schema {{\&quot;properties\&quot;: {{\&quot;foo\&quot;: {{\&quot;description\&quot;: \&quot;a list of strings\&quot;, \&quot;type\&quot;: \&quot;array\&quot;, \&quot;items\&quot;: {{\&quot;type\&quot;: \&quot;string\&quot;}}}}}}, \&quot;required\&quot;: [\&quot;foo\&quot;]}}}} the object {{\&quot;foo\&quot;: [\&quot;bar\&quot;, \&quot;baz\&quot;]}} is a well-formatted instance of the schema. The object {{\&quot;properties\&quot;: {{\&quot;foo\&quot;: [\&quot;bar\&quot;, \&quot;baz\&quot;]}}}} is not well-formatted.\n\n{optional_additional_definitions_prompt}Here is the input schema:\n```\n{input_schema}\n```\n\nHere is the output schema:\n```\n{output_schema}\n```\nNow output the results for the following inputs:\n```\n{inputs}\n```&quot;, &quot;num_retries_on_parser_failure&quot;: 4}}}, &quot;all_chat_chains&quot;: [], &quot;return_value&quot;: [&quot;Analysis of the themes in The Great Gatsby&quot;, &quot;The role of women in 19th century British literature&quot;, &quot;The use of symbolism in To Kill a Mockingbird&quot;], &quot;exception&quot;: null}]}, &quot;result&quot;: {&quot;feedback&quot;: &quot;The generated essay topics are relevant to the domain of literature and satisfy the task description and parameters. The content is appropriate and does not require any information from the all_chains and all_prompts fields.&quot;, &quot;evaluation&quot;: &quot;The output is satisfying as it provides three distinct essay topics related to the literature domain. There are no apparent issues or missing information.&quot;, &quot;hyperparameter_suggestion&quot;: &quot;The current hyperparameters seem to be working well for this task. However, we could experiment with different values for num_retries_on_parser_failure to see if it affects the quality or variety of the generated topics.&quot;, &quot;hyperparameter_missing&quot;: &quot;No missing hyperparameters are identified at this time. The current hyperparameters seem sufficient for this task.&quot;}}, &quot;children&quot;: []}" id="44" width="6.859540432177074%" x="82.93794110184785%" y="1.8em"><defs /><rect data-id="44" fill="#2aa198" height="1.7em" id="44_box" onclick="handleClick(evt)" rx="2" ry="2" width="99.5%" x="2px" y="0" /><text clip-path="url(#44_clip)" fill="black" font-family="Arial" font-size="1em" pointer-events="none" x="4px" y="1.35em">reflect_on_task_run</text><svg data-raw="{&quot;kind&quot;: &quot;CHAIN&quot;, &quot;name&quot;: &quot;LLMStructuredPrompt&quot;, &quot;event_id&quot;: 45, &quot;start_time_ms&quot;: 1684491293837, &quot;end_time_ms&quot;: 1684491332803, &quot;running&quot;: false, &quot;delta_frame_infos&quot;: [{&quot;module&quot;: &quot;blackboard_pagi.prompt_optimizer.llm_function&quot;, &quot;lineno&quot;: 758, &quot;function&quot;: &quot;__call__&quot;, &quot;code_context&quot;: null, &quot;index&quot;: null}, {&quot;module&quot;: &quot;blackboard_pagi.utils.tracer.trace_builder&quot;, &quot;lineno&quot;: 345, &quot;function&quot;: &quot;__call__&quot;, &quot;code_context&quot;: null, &quot;index&quot;: null}, {&quot;module&quot;: &quot;blackboard_pagi.prompt_optimizer.track_hyperparameters&quot;, &quot;lineno&quot;: 325, &quot;function&quot;: &quot;__call__&quot;, &quot;code_context&quot;: null, &quot;index&quot;: null}], &quot;properties&quot;: {&quot;arguments&quot;: {&quot;task_run&quot;: {&quot;task_parameters&quot;: {&quot;domain&quot;: &quot;literature&quot;, &quot;n&quot;: 3}, &quot;hyperparameters&quot;: {&quot;blackboard_pagi_prompt_optimizer_llm_function&quot;: {&quot;LLMStructuredPrompt_query&quot;: {&quot;json_dumps_kwargs&quot;: {&quot;indent&quot;: 0}, &quot;additional_definitions_prompt_template&quot;: &quot;Here is the schema for additional data types:\n```\n{additional_definitions}\n```\n\n&quot;, &quot;llm_structured_prompt_template&quot;: &quot;{docstring}\n\nThe input and output are formatted as a JSON interface that conforms to the JSON schemas below.\n\nAs an example, for the schema {{\&quot;properties\&quot;: {{\&quot;foo\&quot;: {{\&quot;description\&quot;: \&quot;a list of strings\&quot;, \&quot;type\&quot;: \&quot;array\&quot;, \&quot;items\&quot;: {{\&quot;type\&quot;: \&quot;string\&quot;}}}}}}, \&quot;required\&quot;: [\&quot;foo\&quot;]}}}} the object {{\&quot;foo\&quot;: [\&quot;bar\&quot;, \&quot;baz\&quot;]}} is a well-formatted instance of the schema. The object {{\&quot;properties\&quot;: {{\&quot;foo\&quot;: [\&quot;bar\&quot;, \&quot;baz\&quot;]}}}} is not well-formatted.\n\n{optional_additional_definitions_prompt}Here is the input schema:\n```\n{input_schema}\n```\n\nHere is the output schema:\n```\n{output_schema}\n```\nNow output the results for the following inputs:\n```\n{inputs}\n```&quot;, &quot;num_retries_on_parser_failure&quot;: 4}}}, &quot;all_chat_chains&quot;: [], &quot;return_value&quot;: [&quot;Analysis of the themes in The Great Gatsby&quot;, &quot;The role of women in 19th century British literature&quot;, &quot;The use of symbolism in To Kill a Mockingbird&quot;], &quot;exception&quot;: null}}, &quot;result&quot;: {&quot;feedback&quot;: &quot;The generated essay topics are relevant to the domain of literature and satisfy the task description and parameters. The content is appropriate and does not require any information from the all_chains and all_prompts fields.&quot;, &quot;evaluation&quot;: &quot;The output is satisfying as it provides three distinct essay topics related to the literature domain. There are no apparent issues or missing information.&quot;, &quot;hyperparameter_suggestion&quot;: &quot;The current hyperparameters seem to be working well for this task. However, we could experiment with different values for num_retries_on_parser_failure to see if it affects the quality or variety of the generated topics.&quot;, &quot;hyperparameter_missing&quot;: &quot;No missing hyperparameters are identified at this time. The current hyperparameters seem sufficient for this task.&quot;}}, &quot;children&quot;: []}" id="45" width="97.49993256273413%" x="0.0025529840406424797%" y="1.8em"><defs /><rect data-id="45" fill="#2aa198" height="1.7em" id="45_box" onclick="handleClick(evt)" rx="2" ry="2" width="99.5%" x="2px" y="0" /><text clip-path="url(#45_clip)" fill="black" font-family="Arial" font-size="1em" pointer-events="none" x="4px" y="1.35em">LLMStructuredPrompt</text><svg data-raw="{&quot;kind&quot;: &quot;LLM&quot;, &quot;name&quot;: &quot;TrackedChatModel&quot;, &quot;event_id&quot;: 46, &quot;start_time_ms&quot;: 1684491293839, &quot;end_time_ms&quot;: 1684491332782, &quot;running&quot;: false, &quot;delta_frame_infos&quot;: [{&quot;module&quot;: &quot;blackboard_pagi.prompts.chat_chain&quot;, &quot;lineno&quot;: 35, &quot;function&quot;: &quot;query&quot;, &quot;code_context&quot;: null, &quot;index&quot;: null}, {&quot;module&quot;: &quot;blackboard_pagi.prompt_optimizer.llm_function&quot;, &quot;lineno&quot;: 455, &quot;function&quot;: &quot;query&quot;, &quot;code_context&quot;: null, &quot;index&quot;: null}, {&quot;module&quot;: &quot;blackboard_pagi.prompt_optimizer.track_hyperparameters&quot;, &quot;lineno&quot;: 325, &quot;function&quot;: &quot;__call__&quot;, &quot;code_context&quot;: null, &quot;index&quot;: null}, {&quot;module&quot;: &quot;blackboard_pagi.prompt_optimizer.llm_function&quot;, &quot;lineno&quot;: 377, &quot;function&quot;: &quot;__call__&quot;, &quot;code_context&quot;: null, &quot;index&quot;: null}, {&quot;module&quot;: &quot;blackboard_pagi.utils.tracer.trace_builder&quot;, &quot;lineno&quot;: 345, &quot;function&quot;: &quot;__call__&quot;, &quot;code_context&quot;: null, &quot;index&quot;: null}, {&quot;module&quot;: &quot;blackboard_pagi.prompt_optimizer.llm_function&quot;, &quot;lineno&quot;: 758, &quot;function&quot;: &quot;__call__&quot;, &quot;code_context&quot;: null, &quot;index&quot;: null}], &quot;properties&quot;: {&quot;arguments&quot;: {&quot;self&quot;: {&quot;_type&quot;: &quot;ChatOpenAI&quot;}, &quot;messages&quot;: [{&quot;content&quot;: &quot;Reflect on the results given the task parameters and hyperparameters.\n\nThis contains the lessons we learn from each task run to come up with better hyperparameters to try.\n\nThe input and output are formatted as a JSON interface that conforms to the JSON schemas below.\n\nAs an example, for the schema {\&quot;properties\&quot;: {\&quot;foo\&quot;: {\&quot;description\&quot;: \&quot;a list of strings\&quot;, \&quot;type\&quot;: \&quot;array\&quot;, \&quot;items\&quot;: {\&quot;type\&quot;: \&quot;string\&quot;}}}, \&quot;required\&quot;: [\&quot;foo\&quot;]}} the object {\&quot;foo\&quot;: [\&quot;bar\&quot;, \&quot;baz\&quot;]} is a well-formatted instance of the schema. The object {\&quot;properties\&quot;: {\&quot;foo\&quot;: [\&quot;bar\&quot;, \&quot;baz\&quot;]}} is not well-formatted.\n\nHere is the schema for additional data types:\n```\n{\n\&quot;CreateEssayTopicsInputs\&quot;: {\n\&quot;properties\&quot;: {\n\&quot;domain\&quot;: {\n\&quot;description\&quot;: \&quot;The domain or general area of the essay topic\&quot;,\n\&quot;type\&quot;: \&quot;string\&quot;\n},\n\&quot;n\&quot;: {\n\&quot;description\&quot;: \&quot;Number of topics to generate\&quot;,\n\&quot;type\&quot;: \&quot;integer\&quot;\n}\n},\n\&quot;required\&quot;: [\n\&quot;domain\&quot;,\n\&quot;n\&quot;\n]\n},\n\&quot;QueryHyperparameters\&quot;: {\n\&quot;properties\&quot;: {\n\&quot;json_dumps_kwargs\&quot;: {\n\&quot;default\&quot;: {\n\&quot;indent\&quot;: 0\n},\n\&quot;type\&quot;: \&quot;object\&quot;\n},\n\&quot;additional_definitions_prompt_template\&quot;: {\n\&quot;default\&quot;: \&quot;Here is the schema for additional data types:\\n```\\n{additional_definitions}\\n```\\n\\n\&quot;,\n\&quot;type\&quot;: \&quot;string\&quot;\n},\n\&quot;llm_structured_prompt_template\&quot;: {\n\&quot;description\&quot;: \&quot;The general-purpose prompt for the structured prompt execution. It tells the LLM what to do and how to read function arguments and structure return values. \&quot;,\n\&quot;default\&quot;: \&quot;{docstring}\\n\\nThe input and output are formatted as a JSON interface that conforms to the JSON schemas below.\\n\\nAs an example, for the schema {{\\\&quot;properties\\\&quot;: {{\\\&quot;foo\\\&quot;: {{\\\&quot;description\\\&quot;: \\\&quot;a list of strings\\\&quot;, \\\&quot;type\\\&quot;: \\\&quot;array\\\&quot;, \\\&quot;items\\\&quot;: {{\\\&quot;type\\\&quot;: \\\&quot;string\\\&quot;}}}}}}, \\\&quot;required\\\&quot;: [\\\&quot;foo\\\&quot;]}}}} the object {{\\\&quot;foo\\\&quot;: [\\\&quot;bar\\\&quot;, \\\&quot;baz\\\&quot;]}} is a well-formatted instance of the schema. The object {{\\\&quot;properties\\\&quot;: {{\\\&quot;foo\\\&quot;: [\\\&quot;bar\\\&quot;, \\\&quot;baz\\\&quot;]}}}} is not well-formatted.\\n\\n{optional_additional_definitions_prompt}Here is the input schema:\\n```\\n{input_schema}\\n```\\n\\nHere is the output schema:\\n```\\n{output_schema}\\n```\\nNow output the results for the following inputs:\\n```\\n{inputs}\\n```\&quot;,\n\&quot;type\&quot;: \&quot;string\&quot;\n},\n\&quot;num_retries_on_parser_failure\&quot;: {\n\&quot;default\&quot;: 3,\n\&quot;type\&quot;: \&quot;integer\&quot;\n}\n}\n},\n\&quot;blackboard_pagi_prompt_optimizer_llm_functionModule\&quot;: {\n\&quot;properties\&quot;: {\n\&quot;LLMStructuredPrompt_query\&quot;: {\n\&quot;default\&quot;: {\n\&quot;json_dumps_kwargs\&quot;: {\n\&quot;indent\&quot;: 0\n},\n\&quot;additional_definitions_prompt_template\&quot;: \&quot;Here is the schema for additional data types:\\n```\\n{additional_definitions}\\n```\\n\\n\&quot;,\n\&quot;llm_structured_prompt_template\&quot;: \&quot;{docstring}\\n\\nThe input and output are formatted as a JSON interface that conforms to the JSON schemas below.\\n\\nAs an example, for the schema {{\\\&quot;properties\\\&quot;: {{\\\&quot;foo\\\&quot;: {{\\\&quot;description\\\&quot;: \\\&quot;a list of strings\\\&quot;, \\\&quot;type\\\&quot;: \\\&quot;array\\\&quot;, \\\&quot;items\\\&quot;: {{\\\&quot;type\\\&quot;: \\\&quot;string\\\&quot;}}}}}}, \\\&quot;required\\\&quot;: [\\\&quot;foo\\\&quot;]}}}} the object {{\\\&quot;foo\\\&quot;: [\\\&quot;bar\\\&quot;, \\\&quot;baz\\\&quot;]}} is a well-formatted instance of the schema. The object {{\\\&quot;properties\\\&quot;: {{\\\&quot;foo\\\&quot;: [\\\&quot;bar\\\&quot;, \\\&quot;baz\\\&quot;]}}}} is not well-formatted.\\n\\n{optional_additional_definitions_prompt}Here is the input schema:\\n```\\n{input_schema}\\n```\\n\\nHere is the output schema:\\n```\\n{output_schema}\\n```\\nNow output the results for the following inputs:\\n```\\n{inputs}\\n```\&quot;,\n\&quot;num_retries_on_parser_failure\&quot;: 4\n},\n\&quot;allOf\&quot;: [\n{\n\&quot;$ref\&quot;: \&quot;#/definitions/QueryHyperparameters\&quot;\n}\n]\n}\n}\n},\n\&quot;Hyperparameters\&quot;: {\n\&quot;properties\&quot;: {\n\&quot;blackboard_pagi_prompt_optimizer_llm_function\&quot;: {\n\&quot;default\&quot;: {\n\&quot;LLMStructuredPrompt_query\&quot;: {\n\&quot;json_dumps_kwargs\&quot;: {\n\&quot;indent\&quot;: 0\n},\n\&quot;additional_definitions_prompt_template\&quot;: \&quot;Here is the schema for additional data types:\\n```\\n{additional_definitions}\\n```\\n\\n\&quot;,\n\&quot;llm_structured_prompt_template\&quot;: \&quot;{docstring}\\n\\nThe input and output are formatted as a JSON interface that conforms to the JSON schemas below.\\n\\nAs an example, for the schema {{\\\&quot;properties\\\&quot;: {{\\\&quot;foo\\\&quot;: {{\\\&quot;description\\\&quot;: \\\&quot;a list of strings\\\&quot;, \\\&quot;type\\\&quot;: \\\&quot;array\\\&quot;, \\\&quot;items\\\&quot;: {{\\\&quot;type\\\&quot;: \\\&quot;string\\\&quot;}}}}}}, \\\&quot;required\\\&quot;: [\\\&quot;foo\\\&quot;]}}}} the object {{\\\&quot;foo\\\&quot;: [\\\&quot;bar\\\&quot;, \\\&quot;baz\\\&quot;]}} is a well-formatted instance of the schema. The object {{\\\&quot;properties\\\&quot;: {{\\\&quot;foo\\\&quot;: [\\\&quot;bar\\\&quot;, \\\&quot;baz\\\&quot;]}}}} is not well-formatted.\\n\\n{optional_additional_definitions_prompt}Here is the input schema:\\n```\\n{input_schema}\\n```\\n\\nHere is the output schema:\\n```\\n{output_schema}\\n```\\nNow output the results for the following inputs:\\n```\\n{inputs}\\n```\&quot;,\n\&quot;num_retries_on_parser_failure\&quot;: 4\n}\n},\n\&quot;allOf\&quot;: [\n{\n\&quot;$ref\&quot;: \&quot;#/definitions/blackboard_pagi_prompt_optimizer_llm_functionModule\&quot;\n}\n]\n}\n}\n},\n\&quot;TaskRun_CreateEssayTopicsInputs__list_str___Hyperparameters_\&quot;: {\n\&quot;description\&quot;: \&quot;The task run. This is the 'data' we use to optimize the hyperparameters.\&quot;,\n\&quot;properties\&quot;: {\n\&quot;task_parameters\&quot;: {\n\&quot;description\&quot;: \&quot;The task parameters.\&quot;,\n\&quot;allOf\&quot;: [\n{\n\&quot;$ref\&quot;: \&quot;#/definitions/CreateEssayTopicsInputs\&quot;\n}\n]\n},\n\&quot;hyperparameters\&quot;: {\n\&quot;description\&quot;: \&quot;The hyperparameters used for the task. We optimize these.\&quot;,\n\&quot;allOf\&quot;: [\n{\n\&quot;$ref\&quot;: \&quot;#/definitions/Hyperparameters\&quot;\n}\n]\n},\n\&quot;all_chat_chains\&quot;: {\n\&quot;description\&quot;: \&quot;The chat chains from the task execution.\&quot;,\n\&quot;type\&quot;: \&quot;array\&quot;,\n\&quot;items\&quot;: {\n\&quot;type\&quot;: \&quot;object\&quot;\n}\n},\n\&quot;return_value\&quot;: {\n\&quot;description\&quot;: \&quot;The results of the task. (None for exceptions/failure.)\&quot;,\n\&quot;type\&quot;: \&quot;array\&quot;,\n\&quot;items\&quot;: {\n\&quot;type\&quot;: \&quot;string\&quot;\n}\n},\n\&quot;exception\&quot;: {\n\&quot;description\&quot;: \&quot;Exception that occurred during the task execution.\&quot;,\n\&quot;type\&quot;: \&quot;string\&quot;\n}\n},\n\&quot;required\&quot;: [\n\&quot;task_parameters\&quot;,\n\&quot;hyperparameters\&quot;,\n\&quot;all_chat_chains\&quot;,\n\&quot;return_value\&quot;,\n\&quot;exception\&quot;\n]\n},\n\&quot;TaskReflection\&quot;: {\n\&quot;description\&quot;: \&quot;The reflections on the task.\\n\\nThis contains the lessons we learn from each task run to come up with better hyperparameters to try.\&quot;,\n\&quot;properties\&quot;: {\n\&quot;feedback\&quot;: {\n\&quot;description\&quot;: \&quot;Only look at the final results field. Does its content satisfy the task description and task parameters? Does it contain all the relevant information from the all_chains and all_prompts fields? What could be improved in the results?\&quot;,\n\&quot;type\&quot;: \&quot;string\&quot;\n},\n\&quot;evaluation\&quot;: {\n\&quot;description\&quot;: \&quot;The evaluation of the outputs given the task. Is the output satisfying? What is wrong? What is missing?\&quot;,\n\&quot;type\&quot;: \&quot;string\&quot;\n},\n\&quot;hyperparameter_suggestion\&quot;: {\n\&quot;description\&quot;: \&quot;How we want to change the hyperparameters to improve the results. What could we try to change?\&quot;,\n\&quot;type\&quot;: \&quot;string\&quot;\n},\n\&quot;hyperparameter_missing\&quot;: {\n\&quot;description\&quot;: \&quot;What hyperparameters are missing to improve the results? What could be changed that is not exposed via hyperparameters?\&quot;,\n\&quot;type\&quot;: \&quot;string\&quot;\n}\n},\n\&quot;required\&quot;: [\n\&quot;feedback\&quot;,\n\&quot;evaluation\&quot;,\n\&quot;hyperparameter_suggestion\&quot;,\n\&quot;hyperparameter_missing\&quot;\n]\n}\n}\n```\n\nHere is the input schema:\n```\n{\n\&quot;properties\&quot;: {\n\&quot;task_run\&quot;: {\n\&quot;$ref\&quot;: \&quot;#/definitions/TaskRun_CreateEssayTopicsInputs__list_str___Hyperparameters_\&quot;\n}\n},\n\&quot;required\&quot;: [\n\&quot;task_run\&quot;\n]\n}\n```\n\nHere is the output schema:\n```\n{\n\&quot;properties\&quot;: {\n\&quot;return_value\&quot;: {\n\&quot;$ref\&quot;: \&quot;#/definitions/TaskReflection\&quot;\n}\n},\n\&quot;required\&quot;: [\n\&quot;return_value\&quot;\n]\n}\n```\nNow output the results for the following inputs:\n```\n{\n\&quot;task_run\&quot;: {\n\&quot;task_parameters\&quot;: {\n\&quot;domain\&quot;: \&quot;literature\&quot;,\n\&quot;n\&quot;: 3\n},\n\&quot;hyperparameters\&quot;: {\n\&quot;blackboard_pagi_prompt_optimizer_llm_function\&quot;: {\n\&quot;LLMStructuredPrompt_query\&quot;: {\n\&quot;json_dumps_kwargs\&quot;: {\n\&quot;indent\&quot;: 0\n},\n\&quot;additional_definitions_prompt_template\&quot;: \&quot;Here is the schema for additional data types:\\n```\\n{additional_definitions}\\n```\\n\\n\&quot;,\n\&quot;llm_structured_prompt_template\&quot;: \&quot;{docstring}\\n\\nThe input and output are formatted as a JSON interface that conforms to the JSON schemas below.\\n\\nAs an example, for the schema {{\\\&quot;properties\\\&quot;: {{\\\&quot;foo\\\&quot;: {{\\\&quot;description\\\&quot;: \\\&quot;a list of strings\\\&quot;, \\\&quot;type\\\&quot;: \\\&quot;array\\\&quot;, \\\&quot;items\\\&quot;: {{\\\&quot;type\\\&quot;: \\\&quot;string\\\&quot;}}}}}}, \\\&quot;required\\\&quot;: [\\\&quot;foo\\\&quot;]}}}} the object {{\\\&quot;foo\\\&quot;: [\\\&quot;bar\\\&quot;, \\\&quot;baz\\\&quot;]}} is a well-formatted instance of the schema. The object {{\\\&quot;properties\\\&quot;: {{\\\&quot;foo\\\&quot;: [\\\&quot;bar\\\&quot;, \\\&quot;baz\\\&quot;]}}}} is not well-formatted.\\n\\n{optional_additional_definitions_prompt}Here is the input schema:\\n```\\n{input_schema}\\n```\\n\\nHere is the output schema:\\n```\\n{output_schema}\\n```\\nNow output the results for the following inputs:\\n```\\n{inputs}\\n```\&quot;,\n\&quot;num_retries_on_parser_failure\&quot;: 4\n}\n}\n},\n\&quot;all_chat_chains\&quot;: [],\n\&quot;return_value\&quot;: [\n\&quot;Analysis of the themes in The Great Gatsby\&quot;,\n\&quot;The role of women in 19th century British literature\&quot;,\n\&quot;The use of symbolism in To Kill a Mockingbird\&quot;\n],\n\&quot;exception\&quot;: null\n}\n}\n```&quot;, &quot;additional_kwargs&quot;: {}}]}, &quot;result&quot;: {&quot;content&quot;: &quot;{\n\&quot;return_value\&quot;: {\n\&quot;feedback\&quot;: \&quot;The generated essay topics are relevant to the domain of literature and satisfy the task description and parameters. The content is appropriate and does not require any information from the all_chains and all_prompts fields.\&quot;,\n\&quot;evaluation\&quot;: \&quot;The output is satisfying as it provides three distinct essay topics related to the literature domain. There are no apparent issues or missing information.\&quot;,\n\&quot;hyperparameter_suggestion\&quot;: \&quot;The current hyperparameters seem to be working well for this task. However, we could experiment with different values for num_retries_on_parser_failure to see if it affects the quality or variety of the generated topics.\&quot;,\n\&quot;hyperparameter_missing\&quot;: \&quot;No missing hyperparameters are identified at this time. The current hyperparameters seem sufficient for this task.\&quot;\n}\n}&quot;, &quot;additional_kwargs&quot;: {}}}, &quot;children&quot;: []}" id="46" width="96.48776417188061%" x="0.005107016373248474%" y="1.8em"><defs /><rect data-id="46" fill="#268bd2" height="1.7em" id="46_box" onclick="handleClick(evt)" rx="2" ry="2" width="99.5%" x="2px" y="0" /><text clip-path="url(#46_clip)" fill="black" font-family="Arial" font-size="1em" pointer-events="none" x="4px" y="1.35em">TrackedChatModel</text></svg></svg></svg><svg data-raw="{&quot;kind&quot;: &quot;CHAIN&quot;, &quot;name&quot;: &quot;create_essay_topics&quot;, &quot;event_id&quot;: 47, &quot;start_time_ms&quot;: 1684491332820, &quot;end_time_ms&quot;: 1684491336100, &quot;running&quot;: false, &quot;delta_frame_infos&quot;: [{&quot;module&quot;: &quot;blackboard_pagi.prompt_optimizer.llm_function&quot;, &quot;lineno&quot;: 732, &quot;function&quot;: &quot;explicit&quot;, &quot;code_context&quot;: null, &quot;index&quot;: null}], &quot;properties&quot;: {&quot;arguments&quot;: {&quot;self&quot;: &quot;&lt;blackboard_pagi.prompt_optimizer.llm_function.LLMFunction object at 0x169e21fd0&gt;&quot;, &quot;language_model_or_chat_chain&quot;: {&quot;chat_model&quot;: {&quot;_type&quot;: &quot;ChatOpenAI&quot;}, &quot;messages&quot;: []}, &quot;kwargs&quot;: {&quot;domain&quot;: &quot;philosophy&quot;, &quot;n&quot;: 2}}, &quot;result&quot;: [&quot;The ethics of artificial intelligence&quot;, &quot;The concept of free will in philosophy&quot;]}, &quot;children&quot;: []}" id="47" width="0.5772897987771539%" x="89.8685476291725%" y="1.8em"><defs /><rect data-id="47" fill="#2aa198" height="1.7em" id="47_box" onclick="handleClick(evt)" rx="2" ry="2" width="99.5%" x="2px" y="0" /><text clip-path="url(#47_clip)" fill="black" font-family="Arial" font-size="1em" pointer-events="none" x="4px" y="1.35em">create_essay_topics</text><svg data-raw="{&quot;kind&quot;: &quot;CHAIN&quot;, &quot;name&quot;: &quot;LLMStructuredPrompt&quot;, &quot;event_id&quot;: 48, &quot;start_time_ms&quot;: 1684491332821, &quot;end_time_ms&quot;: 1684491336091, &quot;running&quot;: false, &quot;delta_frame_infos&quot;: [{&quot;module&quot;: &quot;blackboard_pagi.prompt_optimizer.llm_function&quot;, &quot;lineno&quot;: 758, &quot;function&quot;: &quot;__call__&quot;, &quot;code_context&quot;: null, &quot;index&quot;: null}, {&quot;module&quot;: &quot;blackboard_pagi.utils.tracer.trace_builder&quot;, &quot;lineno&quot;: 345, &quot;function&quot;: &quot;__call__&quot;, &quot;code_context&quot;: null, &quot;index&quot;: null}, {&quot;module&quot;: &quot;blackboard_pagi.prompt_optimizer.llm_function&quot;, &quot;lineno&quot;: 732, &quot;function&quot;: &quot;explicit&quot;, &quot;code_context&quot;: null, &quot;index&quot;: null}], &quot;properties&quot;: {&quot;arguments&quot;: {&quot;domain&quot;: &quot;philosophy&quot;, &quot;n&quot;: 2}, &quot;result&quot;: [&quot;The ethics of artificial intelligence&quot;, &quot;The concept of free will in philosophy&quot;]}, &quot;children&quot;: []}" id="48" width="97.22263307926828%" x="0.030335365853658536%" y="1.8em"><defs /><rect data-id="48" fill="#2aa198" height="1.7em" id="48_box" onclick="handleClick(evt)" rx="2" ry="2" width="99.5%" x="2px" y="0" /><text clip-path="url(#48_clip)" fill="black" font-family="Arial" font-size="1em" pointer-events="none" x="4px" y="1.35em">LLMStructuredPrompt</text><svg data-raw="{&quot;kind&quot;: &quot;LLM&quot;, &quot;name&quot;: &quot;TrackedChatModel&quot;, &quot;event_id&quot;: 49, &quot;start_time_ms&quot;: 1684491332822, &quot;end_time_ms&quot;: 1684491336071, &quot;running&quot;: false, &quot;delta_frame_infos&quot;: [{&quot;module&quot;: &quot;blackboard_pagi.prompts.chat_chain&quot;, &quot;lineno&quot;: 35, &quot;function&quot;: &quot;query&quot;, &quot;code_context&quot;: null, &quot;index&quot;: null}, {&quot;module&quot;: &quot;blackboard_pagi.prompt_optimizer.llm_function&quot;, &quot;lineno&quot;: 455, &quot;function&quot;: &quot;query&quot;, &quot;code_context&quot;: null, &quot;index&quot;: null}, {&quot;module&quot;: &quot;blackboard_pagi.prompt_optimizer.track_hyperparameters&quot;, &quot;lineno&quot;: 328, &quot;function&quot;: &quot;__call__&quot;, &quot;code_context&quot;: null, &quot;index&quot;: null}, {&quot;module&quot;: &quot;blackboard_pagi.prompt_optimizer.llm_function&quot;, &quot;lineno&quot;: 377, &quot;function&quot;: &quot;__call__&quot;, &quot;code_context&quot;: null, &quot;index&quot;: null}, {&quot;module&quot;: &quot;blackboard_pagi.utils.tracer.trace_builder&quot;, &quot;lineno&quot;: 345, &quot;function&quot;: &quot;__call__&quot;, &quot;code_context&quot;: null, &quot;index&quot;: null}, {&quot;module&quot;: &quot;blackboard_pagi.prompt_optimizer.llm_function&quot;, &quot;lineno&quot;: 758, &quot;function&quot;: &quot;__call__&quot;, &quot;code_context&quot;: null, &quot;index&quot;: null}], &quot;properties&quot;: {&quot;arguments&quot;: {&quot;self&quot;: {&quot;_type&quot;: &quot;ChatOpenAI&quot;}, &quot;messages&quot;: [{&quot;content&quot;: &quot;Create a list of essay topics.\n\nThe input and output are formatted as a JSON interface that conforms to the JSON schemas below.\n\nAs an example, for the schema {\&quot;properties\&quot;: {\&quot;foo\&quot;: {\&quot;description\&quot;: \&quot;a list of strings\&quot;, \&quot;type\&quot;: \&quot;array\&quot;, \&quot;items\&quot;: {\&quot;type\&quot;: \&quot;string\&quot;}}}, \&quot;required\&quot;: [\&quot;foo\&quot;]}} the object {\&quot;foo\&quot;: [\&quot;bar\&quot;, \&quot;baz\&quot;]} is a well-formatted instance of the schema. The object {\&quot;properties\&quot;: {\&quot;foo\&quot;: [\&quot;bar\&quot;, \&quot;baz\&quot;]}} is not well-formatted.\n\nHere is the input schema:\n```\n{\n\&quot;properties\&quot;: {\n\&quot;domain\&quot;: {\n\&quot;description\&quot;: \&quot;The domain or general area of the essay topic\&quot;,\n\&quot;type\&quot;: \&quot;string\&quot;\n},\n\&quot;n\&quot;: {\n\&quot;description\&quot;: \&quot;Number of topics to generate\&quot;,\n\&quot;type\&quot;: \&quot;integer\&quot;\n}\n},\n\&quot;required\&quot;: [\n\&quot;domain\&quot;,\n\&quot;n\&quot;\n]\n}\n```\n\nHere is the output schema:\n```\n{\n\&quot;properties\&quot;: {\n\&quot;return_value\&quot;: {\n\&quot;type\&quot;: \&quot;array\&quot;,\n\&quot;items\&quot;: {\n\&quot;type\&quot;: \&quot;string\&quot;\n}\n}\n},\n\&quot;required\&quot;: [\n\&quot;return_value\&quot;\n]\n}\n```\nNow output the results for the following inputs:\n```\n{\n\&quot;domain\&quot;: \&quot;philosophy\&quot;,\n\&quot;n\&quot;: 2\n}\n```&quot;, &quot;additional_kwargs&quot;: {}}]}, &quot;result&quot;: {&quot;content&quot;: &quot;{\n\&quot;return_value\&quot;: [\n\&quot;The ethics of artificial intelligence\&quot;,\n\&quot;The concept of free will in philosophy\&quot;\n]\n}&quot;, &quot;additional_kwargs&quot;: {}}}, &quot;children&quot;: []}" id="49" width="95.9247383408257%" x="0.03042813455657492%" y="1.8em"><defs /><rect data-id="49" fill="#268bd2" height="1.7em" id="49_box" onclick="handleClick(evt)" rx="2" ry="2" width="99.5%" x="2px" y="0" /><text clip-path="url(#49_clip)" fill="black" font-family="Arial" font-size="1em" pointer-events="none" x="4px" y="1.35em">TrackedChatModel</text></svg></svg></svg><svg data-raw="{&quot;kind&quot;: &quot;CHAIN&quot;, &quot;name&quot;: &quot;reflect_on_task_run&quot;, &quot;event_id&quot;: 50, &quot;start_time_ms&quot;: 1684491336111, &quot;end_time_ms&quot;: 1684491367911, &quot;running&quot;: false, &quot;delta_frame_infos&quot;: [{&quot;module&quot;: &quot;blackboard_pagi.prompt_optimizer.track_hyperparameters&quot;, &quot;lineno&quot;: 325, &quot;function&quot;: &quot;__call__&quot;, &quot;code_context&quot;: null, &quot;index&quot;: null}], &quot;properties&quot;: {&quot;arguments&quot;: {&quot;self&quot;: &quot;&lt;blackboard_pagi.prompt_optimizer.llm_function.LLMFunction object at 0x169c74210&gt;&quot;, &quot;language_model_or_chat_chain&quot;: {&quot;chat_model&quot;: {&quot;_type&quot;: &quot;ChatOpenAI&quot;}, &quot;messages&quot;: []}, &quot;args&quot;: [{&quot;task_parameters&quot;: {&quot;domain&quot;: &quot;philosophy&quot;, &quot;n&quot;: 2}, &quot;hyperparameters&quot;: {&quot;blackboard_pagi_prompt_optimizer_llm_function&quot;: {&quot;LLMStructuredPrompt_query&quot;: {&quot;json_dumps_kwargs&quot;: {&quot;indent&quot;: 0}, &quot;additional_definitions_prompt_template&quot;: &quot;Here is the schema for additional data types:\n```\n{additional_definitions}\n```\n\n&quot;, &quot;llm_structured_prompt_template&quot;: &quot;{docstring}\n\nThe input and output are formatted as a JSON interface that conforms to the JSON schemas below.\n\nAs an example, for the schema {{\&quot;properties\&quot;: {{\&quot;foo\&quot;: {{\&quot;description\&quot;: \&quot;a list of strings\&quot;, \&quot;type\&quot;: \&quot;array\&quot;, \&quot;items\&quot;: {{\&quot;type\&quot;: \&quot;string\&quot;}}}}}}, \&quot;required\&quot;: [\&quot;foo\&quot;]}}}} the object {{\&quot;foo\&quot;: [\&quot;bar\&quot;, \&quot;baz\&quot;]}} is a well-formatted instance of the schema. The object {{\&quot;properties\&quot;: {{\&quot;foo\&quot;: [\&quot;bar\&quot;, \&quot;baz\&quot;]}}}} is not well-formatted.\n\n{optional_additional_definitions_prompt}Here is the input schema:\n```\n{input_schema}\n```\n\nHere is the output schema:\n```\n{output_schema}\n```\nNow output the results for the following inputs:\n```\n{inputs}\n```&quot;, &quot;num_retries_on_parser_failure&quot;: 4}}}, &quot;all_chat_chains&quot;: [], &quot;return_value&quot;: [&quot;The ethics of artificial intelligence&quot;, &quot;The concept of free will in philosophy&quot;], &quot;exception&quot;: null}]}, &quot;result&quot;: {&quot;feedback&quot;: &quot;The content of the final results satisfies the task description and task parameters. The generated essay topics are relevant to the domain of philosophy and the number of topics generated is as requested. The information in the all_chains and all_prompts fields is not relevant for this task as there are no chat chains.&quot;, &quot;evaluation&quot;: &quot;The output is satisfying as it meets the requirements of the task. The generated essay topics are relevant and interesting.&quot;, &quot;hyperparameter_suggestion&quot;: &quot;The current hyperparameters seem to be working well for this task. No changes are suggested at this time.&quot;, &quot;hyperparameter_missing&quot;: &quot;There are no missing hyperparameters that need to be added for this task. The current hyperparameters are sufficient for generating essay topics.&quot;}}, &quot;children&quot;: []}" id="50" width="5.596895000339481%" x="90.45362422678754%" y="1.8em"><defs /><rect data-id="50" fill="#2aa198" height="1.7em" id="50_box" onclick="handleClick(evt)" rx="2" ry="2" width="99.5%" x="2px" y="0" /><text clip-path="url(#50_clip)" fill="black" font-family="Arial" font-size="1em" pointer-events="none" x="4px" y="1.35em">reflect_on_task_run</text><svg data-raw="{&quot;kind&quot;: &quot;CHAIN&quot;, &quot;name&quot;: &quot;LLMStructuredPrompt&quot;, &quot;event_id&quot;: 51, &quot;start_time_ms&quot;: 1684491336112, &quot;end_time_ms&quot;: 1684491367901, &quot;running&quot;: false, &quot;delta_frame_infos&quot;: [{&quot;module&quot;: &quot;blackboard_pagi.prompt_optimizer.llm_function&quot;, &quot;lineno&quot;: 758, &quot;function&quot;: &quot;__call__&quot;, &quot;code_context&quot;: null, &quot;index&quot;: null}, {&quot;module&quot;: &quot;blackboard_pagi.utils.tracer.trace_builder&quot;, &quot;lineno&quot;: 345, &quot;function&quot;: &quot;__call__&quot;, &quot;code_context&quot;: null, &quot;index&quot;: null}, {&quot;module&quot;: &quot;blackboard_pagi.prompt_optimizer.track_hyperparameters&quot;, &quot;lineno&quot;: 325, &quot;function&quot;: &quot;__call__&quot;, &quot;code_context&quot;: null, &quot;index&quot;: null}], &quot;properties&quot;: {&quot;arguments&quot;: {&quot;task_run&quot;: {&quot;task_parameters&quot;: {&quot;domain&quot;: &quot;philosophy&quot;, &quot;n&quot;: 2}, &quot;hyperparameters&quot;: {&quot;blackboard_pagi_prompt_optimizer_llm_function&quot;: {&quot;LLMStructuredPrompt_query&quot;: {&quot;json_dumps_kwargs&quot;: {&quot;indent&quot;: 0}, &quot;additional_definitions_prompt_template&quot;: &quot;Here is the schema for additional data types:\n```\n{additional_definitions}\n```\n\n&quot;, &quot;llm_structured_prompt_template&quot;: &quot;{docstring}\n\nThe input and output are formatted as a JSON interface that conforms to the JSON schemas below.\n\nAs an example, for the schema {{\&quot;properties\&quot;: {{\&quot;foo\&quot;: {{\&quot;description\&quot;: \&quot;a list of strings\&quot;, \&quot;type\&quot;: \&quot;array\&quot;, \&quot;items\&quot;: {{\&quot;type\&quot;: \&quot;string\&quot;}}}}}}, \&quot;required\&quot;: [\&quot;foo\&quot;]}}}} the object {{\&quot;foo\&quot;: [\&quot;bar\&quot;, \&quot;baz\&quot;]}} is a well-formatted instance of the schema. The object {{\&quot;properties\&quot;: {{\&quot;foo\&quot;: [\&quot;bar\&quot;, \&quot;baz\&quot;]}}}} is not well-formatted.\n\n{optional_additional_definitions_prompt}Here is the input schema:\n```\n{input_schema}\n```\n\nHere is the output schema:\n```\n{output_schema}\n```\nNow output the results for the following inputs:\n```\n{inputs}\n```&quot;, &quot;num_retries_on_parser_failure&quot;: 4}}}, &quot;all_chat_chains&quot;: [], &quot;return_value&quot;: [&quot;The ethics of artificial intelligence&quot;, &quot;The concept of free will in philosophy&quot;], &quot;exception&quot;: null}}, &quot;result&quot;: {&quot;feedback&quot;: &quot;The content of the final results satisfies the task description and task parameters. The generated essay topics are relevant to the domain of philosophy and the number of topics generated is as requested. The information in the all_chains and all_prompts fields is not relevant for this task as there are no chat chains.&quot;, &quot;evaluation&quot;: &quot;The output is satisfying as it meets the requirements of the task. The generated essay topics are relevant and interesting.&quot;, &quot;hyperparameter_suggestion&quot;: &quot;The current hyperparameters seem to be working well for this task. No changes are suggested at this time.&quot;, &quot;hyperparameter_missing&quot;: &quot;There are no missing hyperparameters that need to be added for this task. The current hyperparameters are sufficient for generating essay topics.&quot;}}, &quot;children&quot;: []}" id="51" width="97.48621668396225%" x="0.003128930817610063%" y="1.8em"><defs /><rect data-id="51" fill="#2aa198" height="1.7em" id="51_box" onclick="handleClick(evt)" rx="2" ry="2" width="99.5%" x="2px" y="0" /><text clip-path="url(#51_clip)" fill="black" font-family="Arial" font-size="1em" pointer-events="none" x="4px" y="1.35em">LLMStructuredPrompt</text><svg data-raw="{&quot;kind&quot;: &quot;LLM&quot;, &quot;name&quot;: &quot;TrackedChatModel&quot;, &quot;event_id&quot;: 52, &quot;start_time_ms&quot;: 1684491336113, &quot;end_time_ms&quot;: 1684491367874, &quot;running&quot;: false, &quot;delta_frame_infos&quot;: [{&quot;module&quot;: &quot;blackboard_pagi.prompts.chat_chain&quot;, &quot;lineno&quot;: 35, &quot;function&quot;: &quot;query&quot;, &quot;code_context&quot;: null, &quot;index&quot;: null}, {&quot;module&quot;: &quot;blackboard_pagi.prompt_optimizer.llm_function&quot;, &quot;lineno&quot;: 455, &quot;function&quot;: &quot;query&quot;, &quot;code_context&quot;: null, &quot;index&quot;: null}, {&quot;module&quot;: &quot;blackboard_pagi.prompt_optimizer.track_hyperparameters&quot;, &quot;lineno&quot;: 325, &quot;function&quot;: &quot;__call__&quot;, &quot;code_context&quot;: null, &quot;index&quot;: null}, {&quot;module&quot;: &quot;blackboard_pagi.prompt_optimizer.llm_function&quot;, &quot;lineno&quot;: 377, &quot;function&quot;: &quot;__call__&quot;, &quot;code_context&quot;: null, &quot;index&quot;: null}, {&quot;module&quot;: &quot;blackboard_pagi.utils.tracer.trace_builder&quot;, &quot;lineno&quot;: 345, &quot;function&quot;: &quot;__call__&quot;, &quot;code_context&quot;: null, &quot;index&quot;: null}, {&quot;module&quot;: &quot;blackboard_pagi.prompt_optimizer.llm_function&quot;, &quot;lineno&quot;: 758, &quot;function&quot;: &quot;__call__&quot;, &quot;code_context&quot;: null, &quot;index&quot;: null}], &quot;properties&quot;: {&quot;arguments&quot;: {&quot;self&quot;: {&quot;_type&quot;: &quot;ChatOpenAI&quot;}, &quot;messages&quot;: [{&quot;content&quot;: &quot;Reflect on the results given the task parameters and hyperparameters.\n\nThis contains the lessons we learn from each task run to come up with better hyperparameters to try.\n\nThe input and output are formatted as a JSON interface that conforms to the JSON schemas below.\n\nAs an example, for the schema {\&quot;properties\&quot;: {\&quot;foo\&quot;: {\&quot;description\&quot;: \&quot;a list of strings\&quot;, \&quot;type\&quot;: \&quot;array\&quot;, \&quot;items\&quot;: {\&quot;type\&quot;: \&quot;string\&quot;}}}, \&quot;required\&quot;: [\&quot;foo\&quot;]}} the object {\&quot;foo\&quot;: [\&quot;bar\&quot;, \&quot;baz\&quot;]} is a well-formatted instance of the schema. The object {\&quot;properties\&quot;: {\&quot;foo\&quot;: [\&quot;bar\&quot;, \&quot;baz\&quot;]}} is not well-formatted.\n\nHere is the schema for additional data types:\n```\n{\n\&quot;CreateEssayTopicsInputs\&quot;: {\n\&quot;properties\&quot;: {\n\&quot;domain\&quot;: {\n\&quot;description\&quot;: \&quot;The domain or general area of the essay topic\&quot;,\n\&quot;type\&quot;: \&quot;string\&quot;\n},\n\&quot;n\&quot;: {\n\&quot;description\&quot;: \&quot;Number of topics to generate\&quot;,\n\&quot;type\&quot;: \&quot;integer\&quot;\n}\n},\n\&quot;required\&quot;: [\n\&quot;domain\&quot;,\n\&quot;n\&quot;\n]\n},\n\&quot;QueryHyperparameters\&quot;: {\n\&quot;properties\&quot;: {\n\&quot;json_dumps_kwargs\&quot;: {\n\&quot;default\&quot;: {\n\&quot;indent\&quot;: 0\n},\n\&quot;type\&quot;: \&quot;object\&quot;\n},\n\&quot;additional_definitions_prompt_template\&quot;: {\n\&quot;default\&quot;: \&quot;Here is the schema for additional data types:\\n```\\n{additional_definitions}\\n```\\n\\n\&quot;,\n\&quot;type\&quot;: \&quot;string\&quot;\n},\n\&quot;llm_structured_prompt_template\&quot;: {\n\&quot;description\&quot;: \&quot;The general-purpose prompt for the structured prompt execution. It tells the LLM what to do and how to read function arguments and structure return values. \&quot;,\n\&quot;default\&quot;: \&quot;{docstring}\\n\\nThe input and output are formatted as a JSON interface that conforms to the JSON schemas below.\\n\\nAs an example, for the schema {{\\\&quot;properties\\\&quot;: {{\\\&quot;foo\\\&quot;: {{\\\&quot;description\\\&quot;: \\\&quot;a list of strings\\\&quot;, \\\&quot;type\\\&quot;: \\\&quot;array\\\&quot;, \\\&quot;items\\\&quot;: {{\\\&quot;type\\\&quot;: \\\&quot;string\\\&quot;}}}}}}, \\\&quot;required\\\&quot;: [\\\&quot;foo\\\&quot;]}}}} the object {{\\\&quot;foo\\\&quot;: [\\\&quot;bar\\\&quot;, \\\&quot;baz\\\&quot;]}} is a well-formatted instance of the schema. The object {{\\\&quot;properties\\\&quot;: {{\\\&quot;foo\\\&quot;: [\\\&quot;bar\\\&quot;, \\\&quot;baz\\\&quot;]}}}} is not well-formatted.\\n\\n{optional_additional_definitions_prompt}Here is the input schema:\\n```\\n{input_schema}\\n```\\n\\nHere is the output schema:\\n```\\n{output_schema}\\n```\\nNow output the results for the following inputs:\\n```\\n{inputs}\\n```\&quot;,\n\&quot;type\&quot;: \&quot;string\&quot;\n},\n\&quot;num_retries_on_parser_failure\&quot;: {\n\&quot;default\&quot;: 3,\n\&quot;type\&quot;: \&quot;integer\&quot;\n}\n}\n},\n\&quot;blackboard_pagi_prompt_optimizer_llm_functionModule\&quot;: {\n\&quot;properties\&quot;: {\n\&quot;LLMStructuredPrompt_query\&quot;: {\n\&quot;default\&quot;: {\n\&quot;json_dumps_kwargs\&quot;: {\n\&quot;indent\&quot;: 0\n},\n\&quot;additional_definitions_prompt_template\&quot;: \&quot;Here is the schema for additional data types:\\n```\\n{additional_definitions}\\n```\\n\\n\&quot;,\n\&quot;llm_structured_prompt_template\&quot;: \&quot;{docstring}\\n\\nThe input and output are formatted as a JSON interface that conforms to the JSON schemas below.\\n\\nAs an example, for the schema {{\\\&quot;properties\\\&quot;: {{\\\&quot;foo\\\&quot;: {{\\\&quot;description\\\&quot;: \\\&quot;a list of strings\\\&quot;, \\\&quot;type\\\&quot;: \\\&quot;array\\\&quot;, \\\&quot;items\\\&quot;: {{\\\&quot;type\\\&quot;: \\\&quot;string\\\&quot;}}}}}}, \\\&quot;required\\\&quot;: [\\\&quot;foo\\\&quot;]}}}} the object {{\\\&quot;foo\\\&quot;: [\\\&quot;bar\\\&quot;, \\\&quot;baz\\\&quot;]}} is a well-formatted instance of the schema. The object {{\\\&quot;properties\\\&quot;: {{\\\&quot;foo\\\&quot;: [\\\&quot;bar\\\&quot;, \\\&quot;baz\\\&quot;]}}}} is not well-formatted.\\n\\n{optional_additional_definitions_prompt}Here is the input schema:\\n```\\n{input_schema}\\n```\\n\\nHere is the output schema:\\n```\\n{output_schema}\\n```\\nNow output the results for the following inputs:\\n```\\n{inputs}\\n```\&quot;,\n\&quot;num_retries_on_parser_failure\&quot;: 4\n},\n\&quot;allOf\&quot;: [\n{\n\&quot;$ref\&quot;: \&quot;#/definitions/QueryHyperparameters\&quot;\n}\n]\n}\n}\n},\n\&quot;Hyperparameters\&quot;: {\n\&quot;properties\&quot;: {\n\&quot;blackboard_pagi_prompt_optimizer_llm_function\&quot;: {\n\&quot;default\&quot;: {\n\&quot;LLMStructuredPrompt_query\&quot;: {\n\&quot;json_dumps_kwargs\&quot;: {\n\&quot;indent\&quot;: 0\n},\n\&quot;additional_definitions_prompt_template\&quot;: \&quot;Here is the schema for additional data types:\\n```\\n{additional_definitions}\\n```\\n\\n\&quot;,\n\&quot;llm_structured_prompt_template\&quot;: \&quot;{docstring}\\n\\nThe input and output are formatted as a JSON interface that conforms to the JSON schemas below.\\n\\nAs an example, for the schema {{\\\&quot;properties\\\&quot;: {{\\\&quot;foo\\\&quot;: {{\\\&quot;description\\\&quot;: \\\&quot;a list of strings\\\&quot;, \\\&quot;type\\\&quot;: \\\&quot;array\\\&quot;, \\\&quot;items\\\&quot;: {{\\\&quot;type\\\&quot;: \\\&quot;string\\\&quot;}}}}}}, \\\&quot;required\\\&quot;: [\\\&quot;foo\\\&quot;]}}}} the object {{\\\&quot;foo\\\&quot;: [\\\&quot;bar\\\&quot;, \\\&quot;baz\\\&quot;]}} is a well-formatted instance of the schema. The object {{\\\&quot;properties\\\&quot;: {{\\\&quot;foo\\\&quot;: [\\\&quot;bar\\\&quot;, \\\&quot;baz\\\&quot;]}}}} is not well-formatted.\\n\\n{optional_additional_definitions_prompt}Here is the input schema:\\n```\\n{input_schema}\\n```\\n\\nHere is the output schema:\\n```\\n{output_schema}\\n```\\nNow output the results for the following inputs:\\n```\\n{inputs}\\n```\&quot;,\n\&quot;num_retries_on_parser_failure\&quot;: 4\n}\n},\n\&quot;allOf\&quot;: [\n{\n\&quot;$ref\&quot;: \&quot;#/definitions/blackboard_pagi_prompt_optimizer_llm_functionModule\&quot;\n}\n]\n}\n}\n},\n\&quot;TaskRun_CreateEssayTopicsInputs__list_str___Hyperparameters_\&quot;: {\n\&quot;description\&quot;: \&quot;The task run. This is the 'data' we use to optimize the hyperparameters.\&quot;,\n\&quot;properties\&quot;: {\n\&quot;task_parameters\&quot;: {\n\&quot;description\&quot;: \&quot;The task parameters.\&quot;,\n\&quot;allOf\&quot;: [\n{\n\&quot;$ref\&quot;: \&quot;#/definitions/CreateEssayTopicsInputs\&quot;\n}\n]\n},\n\&quot;hyperparameters\&quot;: {\n\&quot;description\&quot;: \&quot;The hyperparameters used for the task. We optimize these.\&quot;,\n\&quot;allOf\&quot;: [\n{\n\&quot;$ref\&quot;: \&quot;#/definitions/Hyperparameters\&quot;\n}\n]\n},\n\&quot;all_chat_chains\&quot;: {\n\&quot;description\&quot;: \&quot;The chat chains from the task execution.\&quot;,\n\&quot;type\&quot;: \&quot;array\&quot;,\n\&quot;items\&quot;: {\n\&quot;type\&quot;: \&quot;object\&quot;\n}\n},\n\&quot;return_value\&quot;: {\n\&quot;description\&quot;: \&quot;The results of the task. (None for exceptions/failure.)\&quot;,\n\&quot;type\&quot;: \&quot;array\&quot;,\n\&quot;items\&quot;: {\n\&quot;type\&quot;: \&quot;string\&quot;\n}\n},\n\&quot;exception\&quot;: {\n\&quot;description\&quot;: \&quot;Exception that occurred during the task execution.\&quot;,\n\&quot;type\&quot;: \&quot;string\&quot;\n}\n},\n\&quot;required\&quot;: [\n\&quot;task_parameters\&quot;,\n\&quot;hyperparameters\&quot;,\n\&quot;all_chat_chains\&quot;,\n\&quot;return_value\&quot;,\n\&quot;exception\&quot;\n]\n},\n\&quot;TaskReflection\&quot;: {\n\&quot;description\&quot;: \&quot;The reflections on the task.\\n\\nThis contains the lessons we learn from each task run to come up with better hyperparameters to try.\&quot;,\n\&quot;properties\&quot;: {\n\&quot;feedback\&quot;: {\n\&quot;description\&quot;: \&quot;Only look at the final results field. Does its content satisfy the task description and task parameters? Does it contain all the relevant information from the all_chains and all_prompts fields? What could be improved in the results?\&quot;,\n\&quot;type\&quot;: \&quot;string\&quot;\n},\n\&quot;evaluation\&quot;: {\n\&quot;description\&quot;: \&quot;The evaluation of the outputs given the task. Is the output satisfying? What is wrong? What is missing?\&quot;,\n\&quot;type\&quot;: \&quot;string\&quot;\n},\n\&quot;hyperparameter_suggestion\&quot;: {\n\&quot;description\&quot;: \&quot;How we want to change the hyperparameters to improve the results. What could we try to change?\&quot;,\n\&quot;type\&quot;: \&quot;string\&quot;\n},\n\&quot;hyperparameter_missing\&quot;: {\n\&quot;description\&quot;: \&quot;What hyperparameters are missing to improve the results? What could be changed that is not exposed via hyperparameters?\&quot;,\n\&quot;type\&quot;: \&quot;string\&quot;\n}\n},\n\&quot;required\&quot;: [\n\&quot;feedback\&quot;,\n\&quot;evaluation\&quot;,\n\&quot;hyperparameter_suggestion\&quot;,\n\&quot;hyperparameter_missing\&quot;\n]\n}\n}\n```\n\nHere is the input schema:\n```\n{\n\&quot;properties\&quot;: {\n\&quot;task_run\&quot;: {\n\&quot;$ref\&quot;: \&quot;#/definitions/TaskRun_CreateEssayTopicsInputs__list_str___Hyperparameters_\&quot;\n}\n},\n\&quot;required\&quot;: [\n\&quot;task_run\&quot;\n]\n}\n```\n\nHere is the output schema:\n```\n{\n\&quot;properties\&quot;: {\n\&quot;return_value\&quot;: {\n\&quot;$ref\&quot;: \&quot;#/definitions/TaskReflection\&quot;\n}\n},\n\&quot;required\&quot;: [\n\&quot;return_value\&quot;\n]\n}\n```\nNow output the results for the following inputs:\n```\n{\n\&quot;task_run\&quot;: {\n\&quot;task_parameters\&quot;: {\n\&quot;domain\&quot;: \&quot;philosophy\&quot;,\n\&quot;n\&quot;: 2\n},\n\&quot;hyperparameters\&quot;: {\n\&quot;blackboard_pagi_prompt_optimizer_llm_function\&quot;: {\n\&quot;LLMStructuredPrompt_query\&quot;: {\n\&quot;json_dumps_kwargs\&quot;: {\n\&quot;indent\&quot;: 0\n},\n\&quot;additional_definitions_prompt_template\&quot;: \&quot;Here is the schema for additional data types:\\n```\\n{additional_definitions}\\n```\\n\\n\&quot;,\n\&quot;llm_structured_prompt_template\&quot;: \&quot;{docstring}\\n\\nThe input and output are formatted as a JSON interface that conforms to the JSON schemas below.\\n\\nAs an example, for the schema {{\\\&quot;properties\\\&quot;: {{\\\&quot;foo\\\&quot;: {{\\\&quot;description\\\&quot;: \\\&quot;a list of strings\\\&quot;, \\\&quot;type\\\&quot;: \\\&quot;array\\\&quot;, \\\&quot;items\\\&quot;: {{\\\&quot;type\\\&quot;: \\\&quot;string\\\&quot;}}}}}}, \\\&quot;required\\\&quot;: [\\\&quot;foo\\\&quot;]}}}} the object {{\\\&quot;foo\\\&quot;: [\\\&quot;bar\\\&quot;, \\\&quot;baz\\\&quot;]}} is a well-formatted instance of the schema. The object {{\\\&quot;properties\\\&quot;: {{\\\&quot;foo\\\&quot;: [\\\&quot;bar\\\&quot;, \\\&quot;baz\\\&quot;]}}}} is not well-formatted.\\n\\n{optional_additional_definitions_prompt}Here is the input schema:\\n```\\n{input_schema}\\n```\\n\\nHere is the output schema:\\n```\\n{output_schema}\\n```\\nNow output the results for the following inputs:\\n```\\n{inputs}\\n```\&quot;,\n\&quot;num_retries_on_parser_failure\&quot;: 4\n}\n}\n},\n\&quot;all_chat_chains\&quot;: [],\n\&quot;return_value\&quot;: [\n\&quot;The ethics of artificial intelligence\&quot;,\n\&quot;The concept of free will in philosophy\&quot;\n],\n\&quot;exception\&quot;: null\n}\n}\n```&quot;, &quot;additional_kwargs&quot;: {}}]}, &quot;result&quot;: {&quot;content&quot;: &quot;{\n\&quot;return_value\&quot;: {\n\&quot;feedback\&quot;: \&quot;The content of the final results satisfies the task description and task parameters. The generated essay topics are relevant to the domain of philosophy and the number of topics generated is as requested. The information in the all_chains and all_prompts fields is not relevant for this task as there are no chat chains.\&quot;,\n\&quot;evaluation\&quot;: \&quot;The output is satisfying as it meets the requirements of the task. The generated essay topics are relevant and interesting.\&quot;,\n\&quot;hyperparameter_suggestion\&quot;: \&quot;The current hyperparameters seem to be working well for this task. No changes are suggested at this time.\&quot;,\n\&quot;hyperparameter_missing\&quot;: \&quot;There are no missing hyperparameters that need to be added for this task. The current hyperparameters are sufficient for generating essay topics.\&quot;\n}\n}&quot;, &quot;additional_kwargs&quot;: {}}}, &quot;children&quot;: []}" id="52" width="96.45971312814181%" x="0.0031300135266916227%" y="1.8em"><defs /><rect data-id="52" fill="#268bd2" height="1.7em" id="52_box" onclick="handleClick(evt)" rx="2" ry="2" width="99.5%" x="2px" y="0" /><text clip-path="url(#52_clip)" fill="black" font-family="Arial" font-size="1em" pointer-events="none" x="4px" y="1.35em">TrackedChatModel</text></svg></svg></svg><svg data-raw="{&quot;kind&quot;: &quot;CHAIN&quot;, &quot;name&quot;: &quot;probability_for_improvement&quot;, &quot;event_id&quot;: 53, &quot;start_time_ms&quot;: 1684491367920, &quot;end_time_ms&quot;: 1684491386986, &quot;running&quot;: false, &quot;delta_frame_infos&quot;: [{&quot;module&quot;: &quot;blackboard_pagi.prompt_optimizer.track_hyperparameters&quot;, &quot;lineno&quot;: 325, &quot;function&quot;: &quot;__call__&quot;, &quot;code_context&quot;: null, &quot;index&quot;: null}], &quot;properties&quot;: {&quot;arguments&quot;: {&quot;self&quot;: &quot;&lt;blackboard_pagi.prompt_optimizer.llm_function.LLMFunction object at 0x169e21990&gt;&quot;, &quot;language_model_or_chat_chain&quot;: {&quot;chat_model&quot;: {&quot;_type&quot;: &quot;ChatOpenAI&quot;}, &quot;messages&quot;: []}, &quot;args&quot;: [{&quot;older_task_summary&quot;: null, &quot;task_infos&quot;: [{&quot;task_parameters&quot;: {&quot;domain&quot;: &quot;comedy&quot;, &quot;n&quot;: 2}, &quot;hyperparameters&quot;: {&quot;blackboard_pagi_prompt_optimizer_llm_function&quot;: {&quot;LLMStructuredPrompt_query&quot;: {&quot;json_dumps_kwargs&quot;: {&quot;indent&quot;: 0}, &quot;additional_definitions_prompt_template&quot;: &quot;Here is the schema for additional data types:\n```\n{additional_definitions}\n```\n\n&quot;, &quot;llm_structured_prompt_template&quot;: &quot;{docstring}\n\nThe input and output are formatted as a JSON interface that conforms to the JSON schemas below.\n\nAs an example, for the schema {{\&quot;properties\&quot;: {{\&quot;foo\&quot;: {{\&quot;description\&quot;: \&quot;a list of strings\&quot;, \&quot;type\&quot;: \&quot;array\&quot;, \&quot;items\&quot;: {{\&quot;type\&quot;: \&quot;string\&quot;}}}}}}, \&quot;required\&quot;: [\&quot;foo\&quot;]}}}} the object {{\&quot;foo\&quot;: [\&quot;bar\&quot;, \&quot;baz\&quot;]}} is a well-formatted instance of the schema. The object {{\&quot;properties\&quot;: {{\&quot;foo\&quot;: [\&quot;bar\&quot;, \&quot;baz\&quot;]}}}} is not well-formatted.\n\n{optional_additional_definitions_prompt}Here is the input schema:\n```\n{input_schema}\n```\n\nHere is the output schema:\n```\n{output_schema}\n```\nNow output the results for the following inputs:\n```\n{inputs}\n```&quot;, &quot;num_retries_on_parser_failure&quot;: 3}}}, &quot;reflection&quot;: {&quot;feedback&quot;: &quot;The generated essay topics are relevant to the comedy domain and satisfy the task description and task parameters. The content is appropriate and contains relevant information.&quot;, &quot;evaluation&quot;: &quot;The output is satisfying as it provides two essay topics related to the comedy domain. There is nothing wrong or missing in the output.&quot;, &quot;hyperparameter_suggestion&quot;: &quot;The current hyperparameters seem to be working well for this task. There is no immediate need to change them.&quot;, &quot;hyperparameter_missing&quot;: &quot;There are no missing hyperparameters that need to be added for this task, as the current hyperparameters are providing satisfactory results.&quot;}}, {&quot;task_parameters&quot;: {&quot;domain&quot;: &quot;comedy&quot;, &quot;n&quot;: 2}, &quot;hyperparameters&quot;: {&quot;blackboard_pagi_prompt_optimizer_llm_function&quot;: {&quot;LLMStructuredPrompt_query&quot;: {&quot;json_dumps_kwargs&quot;: {&quot;indent&quot;: 0}, &quot;additional_definitions_prompt_template&quot;: &quot;Here is the schema for additional data types:\n```\n{additional_definitions}\n```\n\n&quot;, &quot;llm_structured_prompt_template&quot;: &quot;{docstring}\n\nThe input and output are formatted as a JSON interface that conforms to the JSON schemas below.\n\nAs an example, for the schema {{\&quot;properties\&quot;: {{\&quot;foo\&quot;: {{\&quot;description\&quot;: \&quot;a list of strings\&quot;, \&quot;type\&quot;: \&quot;array\&quot;, \&quot;items\&quot;: {{\&quot;type\&quot;: \&quot;string\&quot;}}}}}}, \&quot;required\&quot;: [\&quot;foo\&quot;]}}}} the object {{\&quot;foo\&quot;: [\&quot;bar\&quot;, \&quot;baz\&quot;]}} is a well-formatted instance of the schema. The object {{\&quot;properties\&quot;: {{\&quot;foo\&quot;: [\&quot;bar\&quot;, \&quot;baz\&quot;]}}}} is not well-formatted.\n\n{optional_additional_definitions_prompt}Here is the input schema:\n```\n{input_schema}\n```\n\nHere is the output schema:\n```\n{output_schema}\n```\nNow output the results for the following inputs:\n```\n{inputs}\n```&quot;, &quot;num_retries_on_parser_failure&quot;: 3}}}, &quot;reflection&quot;: {&quot;feedback&quot;: &quot;The generated essay topics are relevant to the comedy domain and satisfy the task description and parameters. The content is appropriate and contains relevant information.&quot;, &quot;evaluation&quot;: &quot;The output is satisfying as it provides two essay topics related to the comedy domain. There is nothing wrong or missing in the output.&quot;, &quot;hyperparameter_suggestion&quot;: &quot;The current hyperparameters seem to be working well for this task. No changes are suggested at this time.&quot;, &quot;hyperparameter_missing&quot;: &quot;There are no missing hyperparameters that need to be added for this task, as the current hyperparameters are providing satisfactory results.&quot;}}, {&quot;task_parameters&quot;: {&quot;domain&quot;: &quot;history&quot;, &quot;n&quot;: 2}, &quot;hyperparameters&quot;: {&quot;blackboard_pagi_prompt_optimizer_llm_function&quot;: {&quot;LLMStructuredPrompt_query&quot;: {&quot;json_dumps_kwargs&quot;: {&quot;indent&quot;: 0}, &quot;additional_definitions_prompt_template&quot;: &quot;Here is the schema for additional data types:\n```\n{additional_definitions}\n```\n\n&quot;, &quot;llm_structured_prompt_template&quot;: &quot;{docstring}\n\nThe input and output are formatted as a JSON interface that conforms to the JSON schemas below.\n\nAs an example, for the schema {{\&quot;properties\&quot;: {{\&quot;foo\&quot;: {{\&quot;description\&quot;: \&quot;a list of strings\&quot;, \&quot;type\&quot;: \&quot;array\&quot;, \&quot;items\&quot;: {{\&quot;type\&quot;: \&quot;string\&quot;}}}}}}, \&quot;required\&quot;: [\&quot;foo\&quot;]}}}} the object {{\&quot;foo\&quot;: [\&quot;bar\&quot;, \&quot;baz\&quot;]}} is a well-formatted instance of the schema. The object {{\&quot;properties\&quot;: {{\&quot;foo\&quot;: [\&quot;bar\&quot;, \&quot;baz\&quot;]}}}} is not well-formatted.\n\n{optional_additional_definitions_prompt}Here is the input schema:\n```\n{input_schema}\n```\n\nHere is the output schema:\n```\n{output_schema}\n```\nNow output the results for the following inputs:\n```\n{inputs}\n```&quot;, &quot;num_retries_on_parser_failure&quot;: 4}}}, &quot;reflection&quot;: {&quot;feedback&quot;: &quot;The generated essay topics are relevant to the history domain and satisfy the task description and task parameters. The content is appropriate, and no relevant information is missing from the all_chains and all_prompts fields.&quot;, &quot;evaluation&quot;: &quot;The output is satisfying as it provides two essay topics related to the history domain. There is nothing wrong or missing in the output.&quot;, &quot;hyperparameter_suggestion&quot;: &quot;The current hyperparameters seem to be working well for this task. No changes are needed at the moment.&quot;, &quot;hyperparameter_missing&quot;: &quot;There are no missing hyperparameters that need to be added for this task, as the current hyperparameters are providing satisfactory results.&quot;}}, {&quot;task_parameters&quot;: {&quot;domain&quot;: &quot;technology&quot;, &quot;n&quot;: 3}, &quot;hyperparameters&quot;: {&quot;blackboard_pagi_prompt_optimizer_llm_function&quot;: {&quot;LLMStructuredPrompt_query&quot;: {&quot;json_dumps_kwargs&quot;: {&quot;indent&quot;: 0}, &quot;additional_definitions_prompt_template&quot;: &quot;Here is the schema for additional data types:\n```\n{additional_definitions}\n```\n\n&quot;, &quot;llm_structured_prompt_template&quot;: &quot;{docstring}\n\nThe input and output are formatted as a JSON interface that conforms to the JSON schemas below.\n\nAs an example, for the schema {{\&quot;properties\&quot;: {{\&quot;foo\&quot;: {{\&quot;description\&quot;: \&quot;a list of strings\&quot;, \&quot;type\&quot;: \&quot;array\&quot;, \&quot;items\&quot;: {{\&quot;type\&quot;: \&quot;string\&quot;}}}}}}, \&quot;required\&quot;: [\&quot;foo\&quot;]}}}} the object {{\&quot;foo\&quot;: [\&quot;bar\&quot;, \&quot;baz\&quot;]}} is a well-formatted instance of the schema. The object {{\&quot;properties\&quot;: {{\&quot;foo\&quot;: [\&quot;bar\&quot;, \&quot;baz\&quot;]}}}} is not well-formatted.\n\n{optional_additional_definitions_prompt}Here is the input schema:\n```\n{input_schema}\n```\n\nHere is the output schema:\n```\n{output_schema}\n```\nNow output the results for the following inputs:\n```\n{inputs}\n```&quot;, &quot;num_retries_on_parser_failure&quot;: 4}}}, &quot;reflection&quot;: {&quot;feedback&quot;: &quot;The generated essay topics are relevant to the technology domain and satisfy the task description and task parameters. The content is appropriate and does not require any additional information from the all_chains and all_prompts fields.&quot;, &quot;evaluation&quot;: &quot;The output is satisfying as it provides three distinct essay topics related to the technology domain. There is no apparent issue or missing information.&quot;, &quot;hyperparameter_suggestion&quot;: &quot;The current hyperparameters seem to be working well for this task. No immediate changes are necessary.&quot;, &quot;hyperparameter_missing&quot;: &quot;There are no missing hyperparameters that need to be added for this task, as the current hyperparameters are producing satisfactory results.&quot;}}, {&quot;task_parameters&quot;: {&quot;domain&quot;: &quot;science&quot;, &quot;n&quot;: 2}, &quot;hyperparameters&quot;: {&quot;blackboard_pagi_prompt_optimizer_llm_function&quot;: {&quot;LLMStructuredPrompt_query&quot;: {&quot;json_dumps_kwargs&quot;: {&quot;indent&quot;: 0}, &quot;additional_definitions_prompt_template&quot;: &quot;Here is the schema for additional data types:\n```\n{additional_definitions}\n```\n\n&quot;, &quot;llm_structured_prompt_template&quot;: &quot;{docstring}\n\nThe input and output are formatted as a JSON interface that conforms to the JSON schemas below.\n\nAs an example, for the schema {{\&quot;properties\&quot;: {{\&quot;foo\&quot;: {{\&quot;description\&quot;: \&quot;a list of strings\&quot;, \&quot;type\&quot;: \&quot;array\&quot;, \&quot;items\&quot;: {{\&quot;type\&quot;: \&quot;string\&quot;}}}}}}, \&quot;required\&quot;: [\&quot;foo\&quot;]}}}} the object {{\&quot;foo\&quot;: [\&quot;bar\&quot;, \&quot;baz\&quot;]}} is a well-formatted instance of the schema. The object {{\&quot;properties\&quot;: {{\&quot;foo\&quot;: [\&quot;bar\&quot;, \&quot;baz\&quot;]}}}} is not well-formatted.\n\n{optional_additional_definitions_prompt}Here is the input schema:\n```\n{input_schema}\n```\n\nHere is the output schema:\n```\n{output_schema}\n```\nNow output the results for the following inputs:\n```\n{inputs}\n```&quot;, &quot;num_retries_on_parser_failure&quot;: 4}}}, &quot;reflection&quot;: {&quot;feedback&quot;: &quot;The generated essay topics are relevant to the science domain and satisfy the task description and task parameters. The content is appropriate and does not require any information from the all_chains and all_prompts fields.&quot;, &quot;evaluation&quot;: &quot;The output is satisfying as it provides two essay topics related to the science domain. There is nothing wrong or missing in the output.&quot;, &quot;hyperparameter_suggestion&quot;: &quot;The current hyperparameters seem to be working well for this task. No changes are needed at this time.&quot;, &quot;hyperparameter_missing&quot;: &quot;There are no missing hyperparameters that need to be added for this task, as the current hyperparameters are producing satisfactory results.&quot;}}, {&quot;task_parameters&quot;: {&quot;domain&quot;: &quot;literature&quot;, &quot;n&quot;: 3}, &quot;hyperparameters&quot;: {&quot;blackboard_pagi_prompt_optimizer_llm_function&quot;: {&quot;LLMStructuredPrompt_query&quot;: {&quot;json_dumps_kwargs&quot;: {&quot;indent&quot;: 0}, &quot;additional_definitions_prompt_template&quot;: &quot;Here is the schema for additional data types:\n```\n{additional_definitions}\n```\n\n&quot;, &quot;llm_structured_prompt_template&quot;: &quot;{docstring}\n\nThe input and output are formatted as a JSON interface that conforms to the JSON schemas below.\n\nAs an example, for the schema {{\&quot;properties\&quot;: {{\&quot;foo\&quot;: {{\&quot;description\&quot;: \&quot;a list of strings\&quot;, \&quot;type\&quot;: \&quot;array\&quot;, \&quot;items\&quot;: {{\&quot;type\&quot;: \&quot;string\&quot;}}}}}}, \&quot;required\&quot;: [\&quot;foo\&quot;]}}}} the object {{\&quot;foo\&quot;: [\&quot;bar\&quot;, \&quot;baz\&quot;]}} is a well-formatted instance of the schema. The object {{\&quot;properties\&quot;: {{\&quot;foo\&quot;: [\&quot;bar\&quot;, \&quot;baz\&quot;]}}}} is not well-formatted.\n\n{optional_additional_definitions_prompt}Here is the input schema:\n```\n{input_schema}\n```\n\nHere is the output schema:\n```\n{output_schema}\n```\nNow output the results for the following inputs:\n```\n{inputs}\n```&quot;, &quot;num_retries_on_parser_failure&quot;: 4}}}, &quot;reflection&quot;: {&quot;feedback&quot;: &quot;The generated essay topics are relevant to the domain of literature and satisfy the task description and parameters. The content is appropriate and does not require any information from the all_chains and all_prompts fields.&quot;, &quot;evaluation&quot;: &quot;The output is satisfying as it provides three distinct essay topics related to the literature domain. There are no apparent issues or missing information.&quot;, &quot;hyperparameter_suggestion&quot;: &quot;The current hyperparameters seem to be working well for this task. However, we could experiment with different values for num_retries_on_parser_failure to see if it affects the quality or variety of the generated topics.&quot;, &quot;hyperparameter_missing&quot;: &quot;No missing hyperparameters are identified at this time. The current hyperparameters seem sufficient for this task.&quot;}}, {&quot;task_parameters&quot;: {&quot;domain&quot;: &quot;philosophy&quot;, &quot;n&quot;: 2}, &quot;hyperparameters&quot;: {&quot;blackboard_pagi_prompt_optimizer_llm_function&quot;: {&quot;LLMStructuredPrompt_query&quot;: {&quot;json_dumps_kwargs&quot;: {&quot;indent&quot;: 0}, &quot;additional_definitions_prompt_template&quot;: &quot;Here is the schema for additional data types:\n```\n{additional_definitions}\n```\n\n&quot;, &quot;llm_structured_prompt_template&quot;: &quot;{docstring}\n\nThe input and output are formatted as a JSON interface that conforms to the JSON schemas below.\n\nAs an example, for the schema {{\&quot;properties\&quot;: {{\&quot;foo\&quot;: {{\&quot;description\&quot;: \&quot;a list of strings\&quot;, \&quot;type\&quot;: \&quot;array\&quot;, \&quot;items\&quot;: {{\&quot;type\&quot;: \&quot;string\&quot;}}}}}}, \&quot;required\&quot;: [\&quot;foo\&quot;]}}}} the object {{\&quot;foo\&quot;: [\&quot;bar\&quot;, \&quot;baz\&quot;]}} is a well-formatted instance of the schema. The object {{\&quot;properties\&quot;: {{\&quot;foo\&quot;: [\&quot;bar\&quot;, \&quot;baz\&quot;]}}}} is not well-formatted.\n\n{optional_additional_definitions_prompt}Here is the input schema:\n```\n{input_schema}\n```\n\nHere is the output schema:\n```\n{output_schema}\n```\nNow output the results for the following inputs:\n```\n{inputs}\n```&quot;, &quot;num_retries_on_parser_failure&quot;: 4}}}, &quot;reflection&quot;: {&quot;feedback&quot;: &quot;The content of the final results satisfies the task description and task parameters. The generated essay topics are relevant to the domain of philosophy and the number of topics generated is as requested. The information in the all_chains and all_prompts fields is not relevant for this task as there are no chat chains.&quot;, &quot;evaluation&quot;: &quot;The output is satisfying as it meets the requirements of the task. The generated essay topics are relevant and interesting.&quot;, &quot;hyperparameter_suggestion&quot;: &quot;The current hyperparameters seem to be working well for this task. No changes are suggested at this time.&quot;, &quot;hyperparameter_missing&quot;: &quot;There are no missing hyperparameters that need to be added for this task. The current hyperparameters are sufficient for generating essay topics.&quot;}}], &quot;best_hyperparameters&quot;: {&quot;blackboard_pagi_prompt_optimizer_llm_function&quot;: {&quot;LLMStructuredPrompt_query&quot;: {&quot;json_dumps_kwargs&quot;: {&quot;indent&quot;: 0}, &quot;additional_definitions_prompt_template&quot;: &quot;Here is the schema for additional data types:\n```\n{additional_definitions}\n```\n\n&quot;, &quot;llm_structured_prompt_template&quot;: &quot;{docstring}\n\nThe input and output are formatted as a JSON interface that conforms to the JSON schemas below.\n\nAs an example, for the schema {{\&quot;properties\&quot;: {{\&quot;foo\&quot;: {{\&quot;description\&quot;: \&quot;a list of strings\&quot;, \&quot;type\&quot;: \&quot;array\&quot;, \&quot;items\&quot;: {{\&quot;type\&quot;: \&quot;string\&quot;}}}}}}, \&quot;required\&quot;: [\&quot;foo\&quot;]}}}} the object {{\&quot;foo\&quot;: [\&quot;bar\&quot;, \&quot;baz\&quot;]}} is a well-formatted instance of the schema. The object {{\&quot;properties\&quot;: {{\&quot;foo\&quot;: [\&quot;bar\&quot;, \&quot;baz\&quot;]}}}} is not well-formatted.\n\n{optional_additional_definitions_prompt}Here is the input schema:\n```\n{input_schema}\n```\n\nHere is the output schema:\n```\n{output_schema}\n```\nNow output the results for the following inputs:\n```\n{inputs}\n```&quot;, &quot;num_retries_on_parser_failure&quot;: 3}}}}]}, &quot;result&quot;: {&quot;considerations&quot;: [&quot;The current hyperparameters have consistently produced satisfactory results across different domains.&quot;, &quot;There is no apparent issue or missing information in the generated essay topics.&quot;, &quot;The only suggested change was to experiment with different values for num_retries_on_parser_failure, but it is not clear if this would lead to significant improvements.&quot;], &quot;probability&quot;: 0.2}}, &quot;children&quot;: []}" id="53" width="3.35567295837964%" x="96.10865354721822%" y="1.8em"><defs /><rect data-id="53" fill="#2aa198" height="1.7em" id="53_box" onclick="handleClick(evt)" rx="2" ry="2" width="99.5%" x="2px" y="0" /><text clip-path="url(#53_clip)" fill="black" font-family="Arial" font-size="1em" pointer-events="none" x="4px" y="1.35em">probability_for_improvement</text><svg data-raw="{&quot;kind&quot;: &quot;CHAIN&quot;, &quot;name&quot;: &quot;LLMStructuredPrompt&quot;, &quot;event_id&quot;: 54, &quot;start_time_ms&quot;: 1684491367922, &quot;end_time_ms&quot;: 1684491386976, &quot;running&quot;: false, &quot;delta_frame_infos&quot;: [{&quot;module&quot;: &quot;blackboard_pagi.prompt_optimizer.llm_function&quot;, &quot;lineno&quot;: 758, &quot;function&quot;: &quot;__call__&quot;, &quot;code_context&quot;: null, &quot;index&quot;: null}, {&quot;module&quot;: &quot;blackboard_pagi.utils.tracer.trace_builder&quot;, &quot;lineno&quot;: 345, &quot;function&quot;: &quot;__call__&quot;, &quot;code_context&quot;: null, &quot;index&quot;: null}, {&quot;module&quot;: &quot;blackboard_pagi.prompt_optimizer.track_hyperparameters&quot;, &quot;lineno&quot;: 325, &quot;function&quot;: &quot;__call__&quot;, &quot;code_context&quot;: null, &quot;index&quot;: null}], &quot;properties&quot;: {&quot;arguments&quot;: {&quot;optimization_info&quot;: {&quot;older_task_summary&quot;: null, &quot;task_infos&quot;: [{&quot;task_parameters&quot;: {&quot;domain&quot;: &quot;comedy&quot;, &quot;n&quot;: 2}, &quot;hyperparameters&quot;: {&quot;blackboard_pagi_prompt_optimizer_llm_function&quot;: {&quot;LLMStructuredPrompt_query&quot;: {&quot;json_dumps_kwargs&quot;: {&quot;indent&quot;: 0}, &quot;additional_definitions_prompt_template&quot;: &quot;Here is the schema for additional data types:\n```\n{additional_definitions}\n```\n\n&quot;, &quot;llm_structured_prompt_template&quot;: &quot;{docstring}\n\nThe input and output are formatted as a JSON interface that conforms to the JSON schemas below.\n\nAs an example, for the schema {{\&quot;properties\&quot;: {{\&quot;foo\&quot;: {{\&quot;description\&quot;: \&quot;a list of strings\&quot;, \&quot;type\&quot;: \&quot;array\&quot;, \&quot;items\&quot;: {{\&quot;type\&quot;: \&quot;string\&quot;}}}}}}, \&quot;required\&quot;: [\&quot;foo\&quot;]}}}} the object {{\&quot;foo\&quot;: [\&quot;bar\&quot;, \&quot;baz\&quot;]}} is a well-formatted instance of the schema. The object {{\&quot;properties\&quot;: {{\&quot;foo\&quot;: [\&quot;bar\&quot;, \&quot;baz\&quot;]}}}} is not well-formatted.\n\n{optional_additional_definitions_prompt}Here is the input schema:\n```\n{input_schema}\n```\n\nHere is the output schema:\n```\n{output_schema}\n```\nNow output the results for the following inputs:\n```\n{inputs}\n```&quot;, &quot;num_retries_on_parser_failure&quot;: 3}}}, &quot;reflection&quot;: {&quot;feedback&quot;: &quot;The generated essay topics are relevant to the comedy domain and satisfy the task description and task parameters. The content is appropriate and contains relevant information.&quot;, &quot;evaluation&quot;: &quot;The output is satisfying as it provides two essay topics related to the comedy domain. There is nothing wrong or missing in the output.&quot;, &quot;hyperparameter_suggestion&quot;: &quot;The current hyperparameters seem to be working well for this task. There is no immediate need to change them.&quot;, &quot;hyperparameter_missing&quot;: &quot;There are no missing hyperparameters that need to be added for this task, as the current hyperparameters are providing satisfactory results.&quot;}}, {&quot;task_parameters&quot;: {&quot;domain&quot;: &quot;comedy&quot;, &quot;n&quot;: 2}, &quot;hyperparameters&quot;: {&quot;blackboard_pagi_prompt_optimizer_llm_function&quot;: {&quot;LLMStructuredPrompt_query&quot;: {&quot;json_dumps_kwargs&quot;: {&quot;indent&quot;: 0}, &quot;additional_definitions_prompt_template&quot;: &quot;Here is the schema for additional data types:\n```\n{additional_definitions}\n```\n\n&quot;, &quot;llm_structured_prompt_template&quot;: &quot;{docstring}\n\nThe input and output are formatted as a JSON interface that conforms to the JSON schemas below.\n\nAs an example, for the schema {{\&quot;properties\&quot;: {{\&quot;foo\&quot;: {{\&quot;description\&quot;: \&quot;a list of strings\&quot;, \&quot;type\&quot;: \&quot;array\&quot;, \&quot;items\&quot;: {{\&quot;type\&quot;: \&quot;string\&quot;}}}}}}, \&quot;required\&quot;: [\&quot;foo\&quot;]}}}} the object {{\&quot;foo\&quot;: [\&quot;bar\&quot;, \&quot;baz\&quot;]}} is a well-formatted instance of the schema. The object {{\&quot;properties\&quot;: {{\&quot;foo\&quot;: [\&quot;bar\&quot;, \&quot;baz\&quot;]}}}} is not well-formatted.\n\n{optional_additional_definitions_prompt}Here is the input schema:\n```\n{input_schema}\n```\n\nHere is the output schema:\n```\n{output_schema}\n```\nNow output the results for the following inputs:\n```\n{inputs}\n```&quot;, &quot;num_retries_on_parser_failure&quot;: 3}}}, &quot;reflection&quot;: {&quot;feedback&quot;: &quot;The generated essay topics are relevant to the comedy domain and satisfy the task description and parameters. The content is appropriate and contains relevant information.&quot;, &quot;evaluation&quot;: &quot;The output is satisfying as it provides two essay topics related to the comedy domain. There is nothing wrong or missing in the output.&quot;, &quot;hyperparameter_suggestion&quot;: &quot;The current hyperparameters seem to be working well for this task. No changes are suggested at this time.&quot;, &quot;hyperparameter_missing&quot;: &quot;There are no missing hyperparameters that need to be added for this task, as the current hyperparameters are providing satisfactory results.&quot;}}, {&quot;task_parameters&quot;: {&quot;domain&quot;: &quot;history&quot;, &quot;n&quot;: 2}, &quot;hyperparameters&quot;: {&quot;blackboard_pagi_prompt_optimizer_llm_function&quot;: {&quot;LLMStructuredPrompt_query&quot;: {&quot;json_dumps_kwargs&quot;: {&quot;indent&quot;: 0}, &quot;additional_definitions_prompt_template&quot;: &quot;Here is the schema for additional data types:\n```\n{additional_definitions}\n```\n\n&quot;, &quot;llm_structured_prompt_template&quot;: &quot;{docstring}\n\nThe input and output are formatted as a JSON interface that conforms to the JSON schemas below.\n\nAs an example, for the schema {{\&quot;properties\&quot;: {{\&quot;foo\&quot;: {{\&quot;description\&quot;: \&quot;a list of strings\&quot;, \&quot;type\&quot;: \&quot;array\&quot;, \&quot;items\&quot;: {{\&quot;type\&quot;: \&quot;string\&quot;}}}}}}, \&quot;required\&quot;: [\&quot;foo\&quot;]}}}} the object {{\&quot;foo\&quot;: [\&quot;bar\&quot;, \&quot;baz\&quot;]}} is a well-formatted instance of the schema. The object {{\&quot;properties\&quot;: {{\&quot;foo\&quot;: [\&quot;bar\&quot;, \&quot;baz\&quot;]}}}} is not well-formatted.\n\n{optional_additional_definitions_prompt}Here is the input schema:\n```\n{input_schema}\n```\n\nHere is the output schema:\n```\n{output_schema}\n```\nNow output the results for the following inputs:\n```\n{inputs}\n```&quot;, &quot;num_retries_on_parser_failure&quot;: 4}}}, &quot;reflection&quot;: {&quot;feedback&quot;: &quot;The generated essay topics are relevant to the history domain and satisfy the task description and task parameters. The content is appropriate, and no relevant information is missing from the all_chains and all_prompts fields.&quot;, &quot;evaluation&quot;: &quot;The output is satisfying as it provides two essay topics related to the history domain. There is nothing wrong or missing in the output.&quot;, &quot;hyperparameter_suggestion&quot;: &quot;The current hyperparameters seem to be working well for this task. No changes are needed at the moment.&quot;, &quot;hyperparameter_missing&quot;: &quot;There are no missing hyperparameters that need to be added for this task, as the current hyperparameters are providing satisfactory results.&quot;}}, {&quot;task_parameters&quot;: {&quot;domain&quot;: &quot;technology&quot;, &quot;n&quot;: 3}, &quot;hyperparameters&quot;: {&quot;blackboard_pagi_prompt_optimizer_llm_function&quot;: {&quot;LLMStructuredPrompt_query&quot;: {&quot;json_dumps_kwargs&quot;: {&quot;indent&quot;: 0}, &quot;additional_definitions_prompt_template&quot;: &quot;Here is the schema for additional data types:\n```\n{additional_definitions}\n```\n\n&quot;, &quot;llm_structured_prompt_template&quot;: &quot;{docstring}\n\nThe input and output are formatted as a JSON interface that conforms to the JSON schemas below.\n\nAs an example, for the schema {{\&quot;properties\&quot;: {{\&quot;foo\&quot;: {{\&quot;description\&quot;: \&quot;a list of strings\&quot;, \&quot;type\&quot;: \&quot;array\&quot;, \&quot;items\&quot;: {{\&quot;type\&quot;: \&quot;string\&quot;}}}}}}, \&quot;required\&quot;: [\&quot;foo\&quot;]}}}} the object {{\&quot;foo\&quot;: [\&quot;bar\&quot;, \&quot;baz\&quot;]}} is a well-formatted instance of the schema. The object {{\&quot;properties\&quot;: {{\&quot;foo\&quot;: [\&quot;bar\&quot;, \&quot;baz\&quot;]}}}} is not well-formatted.\n\n{optional_additional_definitions_prompt}Here is the input schema:\n```\n{input_schema}\n```\n\nHere is the output schema:\n```\n{output_schema}\n```\nNow output the results for the following inputs:\n```\n{inputs}\n```&quot;, &quot;num_retries_on_parser_failure&quot;: 4}}}, &quot;reflection&quot;: {&quot;feedback&quot;: &quot;The generated essay topics are relevant to the technology domain and satisfy the task description and task parameters. The content is appropriate and does not require any additional information from the all_chains and all_prompts fields.&quot;, &quot;evaluation&quot;: &quot;The output is satisfying as it provides three distinct essay topics related to the technology domain. There is no apparent issue or missing information.&quot;, &quot;hyperparameter_suggestion&quot;: &quot;The current hyperparameters seem to be working well for this task. No immediate changes are necessary.&quot;, &quot;hyperparameter_missing&quot;: &quot;There are no missing hyperparameters that need to be added for this task, as the current hyperparameters are producing satisfactory results.&quot;}}, {&quot;task_parameters&quot;: {&quot;domain&quot;: &quot;science&quot;, &quot;n&quot;: 2}, &quot;hyperparameters&quot;: {&quot;blackboard_pagi_prompt_optimizer_llm_function&quot;: {&quot;LLMStructuredPrompt_query&quot;: {&quot;json_dumps_kwargs&quot;: {&quot;indent&quot;: 0}, &quot;additional_definitions_prompt_template&quot;: &quot;Here is the schema for additional data types:\n```\n{additional_definitions}\n```\n\n&quot;, &quot;llm_structured_prompt_template&quot;: &quot;{docstring}\n\nThe input and output are formatted as a JSON interface that conforms to the JSON schemas below.\n\nAs an example, for the schema {{\&quot;properties\&quot;: {{\&quot;foo\&quot;: {{\&quot;description\&quot;: \&quot;a list of strings\&quot;, \&quot;type\&quot;: \&quot;array\&quot;, \&quot;items\&quot;: {{\&quot;type\&quot;: \&quot;string\&quot;}}}}}}, \&quot;required\&quot;: [\&quot;foo\&quot;]}}}} the object {{\&quot;foo\&quot;: [\&quot;bar\&quot;, \&quot;baz\&quot;]}} is a well-formatted instance of the schema. The object {{\&quot;properties\&quot;: {{\&quot;foo\&quot;: [\&quot;bar\&quot;, \&quot;baz\&quot;]}}}} is not well-formatted.\n\n{optional_additional_definitions_prompt}Here is the input schema:\n```\n{input_schema}\n```\n\nHere is the output schema:\n```\n{output_schema}\n```\nNow output the results for the following inputs:\n```\n{inputs}\n```&quot;, &quot;num_retries_on_parser_failure&quot;: 4}}}, &quot;reflection&quot;: {&quot;feedback&quot;: &quot;The generated essay topics are relevant to the science domain and satisfy the task description and task parameters. The content is appropriate and does not require any information from the all_chains and all_prompts fields.&quot;, &quot;evaluation&quot;: &quot;The output is satisfying as it provides two essay topics related to the science domain. There is nothing wrong or missing in the output.&quot;, &quot;hyperparameter_suggestion&quot;: &quot;The current hyperparameters seem to be working well for this task. No changes are needed at this time.&quot;, &quot;hyperparameter_missing&quot;: &quot;There are no missing hyperparameters that need to be added for this task, as the current hyperparameters are producing satisfactory results.&quot;}}, {&quot;task_parameters&quot;: {&quot;domain&quot;: &quot;literature&quot;, &quot;n&quot;: 3}, &quot;hyperparameters&quot;: {&quot;blackboard_pagi_prompt_optimizer_llm_function&quot;: {&quot;LLMStructuredPrompt_query&quot;: {&quot;json_dumps_kwargs&quot;: {&quot;indent&quot;: 0}, &quot;additional_definitions_prompt_template&quot;: &quot;Here is the schema for additional data types:\n```\n{additional_definitions}\n```\n\n&quot;, &quot;llm_structured_prompt_template&quot;: &quot;{docstring}\n\nThe input and output are formatted as a JSON interface that conforms to the JSON schemas below.\n\nAs an example, for the schema {{\&quot;properties\&quot;: {{\&quot;foo\&quot;: {{\&quot;description\&quot;: \&quot;a list of strings\&quot;, \&quot;type\&quot;: \&quot;array\&quot;, \&quot;items\&quot;: {{\&quot;type\&quot;: \&quot;string\&quot;}}}}}}, \&quot;required\&quot;: [\&quot;foo\&quot;]}}}} the object {{\&quot;foo\&quot;: [\&quot;bar\&quot;, \&quot;baz\&quot;]}} is a well-formatted instance of the schema. The object {{\&quot;properties\&quot;: {{\&quot;foo\&quot;: [\&quot;bar\&quot;, \&quot;baz\&quot;]}}}} is not well-formatted.\n\n{optional_additional_definitions_prompt}Here is the input schema:\n```\n{input_schema}\n```\n\nHere is the output schema:\n```\n{output_schema}\n```\nNow output the results for the following inputs:\n```\n{inputs}\n```&quot;, &quot;num_retries_on_parser_failure&quot;: 4}}}, &quot;reflection&quot;: {&quot;feedback&quot;: &quot;The generated essay topics are relevant to the domain of literature and satisfy the task description and parameters. The content is appropriate and does not require any information from the all_chains and all_prompts fields.&quot;, &quot;evaluation&quot;: &quot;The output is satisfying as it provides three distinct essay topics related to the literature domain. There are no apparent issues or missing information.&quot;, &quot;hyperparameter_suggestion&quot;: &quot;The current hyperparameters seem to be working well for this task. However, we could experiment with different values for num_retries_on_parser_failure to see if it affects the quality or variety of the generated topics.&quot;, &quot;hyperparameter_missing&quot;: &quot;No missing hyperparameters are identified at this time. The current hyperparameters seem sufficient for this task.&quot;}}, {&quot;task_parameters&quot;: {&quot;domain&quot;: &quot;philosophy&quot;, &quot;n&quot;: 2}, &quot;hyperparameters&quot;: {&quot;blackboard_pagi_prompt_optimizer_llm_function&quot;: {&quot;LLMStructuredPrompt_query&quot;: {&quot;json_dumps_kwargs&quot;: {&quot;indent&quot;: 0}, &quot;additional_definitions_prompt_template&quot;: &quot;Here is the schema for additional data types:\n```\n{additional_definitions}\n```\n\n&quot;, &quot;llm_structured_prompt_template&quot;: &quot;{docstring}\n\nThe input and output are formatted as a JSON interface that conforms to the JSON schemas below.\n\nAs an example, for the schema {{\&quot;properties\&quot;: {{\&quot;foo\&quot;: {{\&quot;description\&quot;: \&quot;a list of strings\&quot;, \&quot;type\&quot;: \&quot;array\&quot;, \&quot;items\&quot;: {{\&quot;type\&quot;: \&quot;string\&quot;}}}}}}, \&quot;required\&quot;: [\&quot;foo\&quot;]}}}} the object {{\&quot;foo\&quot;: [\&quot;bar\&quot;, \&quot;baz\&quot;]}} is a well-formatted instance of the schema. The object {{\&quot;properties\&quot;: {{\&quot;foo\&quot;: [\&quot;bar\&quot;, \&quot;baz\&quot;]}}}} is not well-formatted.\n\n{optional_additional_definitions_prompt}Here is the input schema:\n```\n{input_schema}\n```\n\nHere is the output schema:\n```\n{output_schema}\n```\nNow output the results for the following inputs:\n```\n{inputs}\n```&quot;, &quot;num_retries_on_parser_failure&quot;: 4}}}, &quot;reflection&quot;: {&quot;feedback&quot;: &quot;The content of the final results satisfies the task description and task parameters. The generated essay topics are relevant to the domain of philosophy and the number of topics generated is as requested. The information in the all_chains and all_prompts fields is not relevant for this task as there are no chat chains.&quot;, &quot;evaluation&quot;: &quot;The output is satisfying as it meets the requirements of the task. The generated essay topics are relevant and interesting.&quot;, &quot;hyperparameter_suggestion&quot;: &quot;The current hyperparameters seem to be working well for this task. No changes are suggested at this time.&quot;, &quot;hyperparameter_missing&quot;: &quot;There are no missing hyperparameters that need to be added for this task. The current hyperparameters are sufficient for generating essay topics.&quot;}}], &quot;best_hyperparameters&quot;: {&quot;blackboard_pagi_prompt_optimizer_llm_function&quot;: {&quot;LLMStructuredPrompt_query&quot;: {&quot;json_dumps_kwargs&quot;: {&quot;indent&quot;: 0}, &quot;additional_definitions_prompt_template&quot;: &quot;Here is the schema for additional data types:\n```\n{additional_definitions}\n```\n\n&quot;, &quot;llm_structured_prompt_template&quot;: &quot;{docstring}\n\nThe input and output are formatted as a JSON interface that conforms to the JSON schemas below.\n\nAs an example, for the schema {{\&quot;properties\&quot;: {{\&quot;foo\&quot;: {{\&quot;description\&quot;: \&quot;a list of strings\&quot;, \&quot;type\&quot;: \&quot;array\&quot;, \&quot;items\&quot;: {{\&quot;type\&quot;: \&quot;string\&quot;}}}}}}, \&quot;required\&quot;: [\&quot;foo\&quot;]}}}} the object {{\&quot;foo\&quot;: [\&quot;bar\&quot;, \&quot;baz\&quot;]}} is a well-formatted instance of the schema. The object {{\&quot;properties\&quot;: {{\&quot;foo\&quot;: [\&quot;bar\&quot;, \&quot;baz\&quot;]}}}} is not well-formatted.\n\n{optional_additional_definitions_prompt}Here is the input schema:\n```\n{input_schema}\n```\n\nHere is the output schema:\n```\n{output_schema}\n```\nNow output the results for the following inputs:\n```\n{inputs}\n```&quot;, &quot;num_retries_on_parser_failure&quot;: 3}}}}}, &quot;result&quot;: {&quot;considerations&quot;: [&quot;The current hyperparameters have consistently produced satisfactory results across different domains.&quot;, &quot;There is no apparent issue or missing information in the generated essay topics.&quot;, &quot;The only suggested change was to experiment with different values for num_retries_on_parser_failure, but it is not clear if this would lead to significant improvements.&quot;], &quot;probability&quot;: 0.2}}, &quot;children&quot;: []}" id="54" width="97.45857166159655%" x="0.010437427882093779%" y="1.8em"><defs /><rect data-id="54" fill="#2aa198" height="1.7em" id="54_box" onclick="handleClick(evt)" rx="2" ry="2" width="99.5%" x="2px" y="0" /><text clip-path="url(#54_clip)" fill="black" font-family="Arial" font-size="1em" pointer-events="none" x="4px" y="1.35em">LLMStructuredPrompt</text><svg data-raw="{&quot;kind&quot;: &quot;LLM&quot;, &quot;name&quot;: &quot;TrackedChatModel&quot;, &quot;event_id&quot;: 55, &quot;start_time_ms&quot;: 1684491367923, &quot;end_time_ms&quot;: 1684491386949, &quot;running&quot;: false, &quot;delta_frame_infos&quot;: [{&quot;module&quot;: &quot;blackboard_pagi.prompts.chat_chain&quot;, &quot;lineno&quot;: 35, &quot;function&quot;: &quot;query&quot;, &quot;code_context&quot;: null, &quot;index&quot;: null}, {&quot;module&quot;: &quot;blackboard_pagi.prompt_optimizer.llm_function&quot;, &quot;lineno&quot;: 455, &quot;function&quot;: &quot;query&quot;, &quot;code_context&quot;: null, &quot;index&quot;: null}, {&quot;module&quot;: &quot;blackboard_pagi.prompt_optimizer.track_hyperparameters&quot;, &quot;lineno&quot;: 325, &quot;function&quot;: &quot;__call__&quot;, &quot;code_context&quot;: null, &quot;index&quot;: null}, {&quot;module&quot;: &quot;blackboard_pagi.prompt_optimizer.llm_function&quot;, &quot;lineno&quot;: 377, &quot;function&quot;: &quot;__call__&quot;, &quot;code_context&quot;: null, &quot;index&quot;: null}, {&quot;module&quot;: &quot;blackboard_pagi.utils.tracer.trace_builder&quot;, &quot;lineno&quot;: 345, &quot;function&quot;: &quot;__call__&quot;, &quot;code_context&quot;: null, &quot;index&quot;: null}, {&quot;module&quot;: &quot;blackboard_pagi.prompt_optimizer.llm_function&quot;, &quot;lineno&quot;: 758, &quot;function&quot;: &quot;__call__&quot;, &quot;code_context&quot;: null, &quot;index&quot;: null}], &quot;properties&quot;: {&quot;arguments&quot;: {&quot;self&quot;: {&quot;_type&quot;: &quot;ChatOpenAI&quot;}, &quot;messages&quot;: [{&quot;content&quot;: &quot;Return the probability for improvement (between 0 and 1).\n\nThis is your confidence that your next optimization steps will improve the hyperparameters given the information\nprovided. If you think that the information available is unlikely to lead to better hyperparameters, return 0.\nIf you think that the information available is very likely to lead to better hyperparameters, return 1.\nBe concise.\n\nThe input and output are formatted as a JSON interface that conforms to the JSON schemas below.\n\nAs an example, for the schema {\&quot;properties\&quot;: {\&quot;foo\&quot;: {\&quot;description\&quot;: \&quot;a list of strings\&quot;, \&quot;type\&quot;: \&quot;array\&quot;, \&quot;items\&quot;: {\&quot;type\&quot;: \&quot;string\&quot;}}}, \&quot;required\&quot;: [\&quot;foo\&quot;]}} the object {\&quot;foo\&quot;: [\&quot;bar\&quot;, \&quot;baz\&quot;]} is a well-formatted instance of the schema. The object {\&quot;properties\&quot;: {\&quot;foo\&quot;: [\&quot;bar\&quot;, \&quot;baz\&quot;]}} is not well-formatted.\n\nHere is the schema for additional data types:\n```\n{\n\&quot;CreateEssayTopicsInputs\&quot;: {\n\&quot;properties\&quot;: {\n\&quot;domain\&quot;: {\n\&quot;description\&quot;: \&quot;The domain or general area of the essay topic\&quot;,\n\&quot;type\&quot;: \&quot;string\&quot;\n},\n\&quot;n\&quot;: {\n\&quot;description\&quot;: \&quot;Number of topics to generate\&quot;,\n\&quot;type\&quot;: \&quot;integer\&quot;\n}\n},\n\&quot;required\&quot;: [\n\&quot;domain\&quot;,\n\&quot;n\&quot;\n]\n},\n\&quot;QueryHyperparameters\&quot;: {\n\&quot;properties\&quot;: {\n\&quot;json_dumps_kwargs\&quot;: {\n\&quot;default\&quot;: {\n\&quot;indent\&quot;: 0\n},\n\&quot;type\&quot;: \&quot;object\&quot;\n},\n\&quot;additional_definitions_prompt_template\&quot;: {\n\&quot;default\&quot;: \&quot;Here is the schema for additional data types:\\n```\\n{additional_definitions}\\n```\\n\\n\&quot;,\n\&quot;type\&quot;: \&quot;string\&quot;\n},\n\&quot;llm_structured_prompt_template\&quot;: {\n\&quot;description\&quot;: \&quot;The general-purpose prompt for the structured prompt execution. It tells the LLM what to do and how to read function arguments and structure return values. \&quot;,\n\&quot;default\&quot;: \&quot;{docstring}\\n\\nThe input and output are formatted as a JSON interface that conforms to the JSON schemas below.\\n\\nAs an example, for the schema {{\\\&quot;properties\\\&quot;: {{\\\&quot;foo\\\&quot;: {{\\\&quot;description\\\&quot;: \\\&quot;a list of strings\\\&quot;, \\\&quot;type\\\&quot;: \\\&quot;array\\\&quot;, \\\&quot;items\\\&quot;: {{\\\&quot;type\\\&quot;: \\\&quot;string\\\&quot;}}}}}}, \\\&quot;required\\\&quot;: [\\\&quot;foo\\\&quot;]}}}} the object {{\\\&quot;foo\\\&quot;: [\\\&quot;bar\\\&quot;, \\\&quot;baz\\\&quot;]}} is a well-formatted instance of the schema. The object {{\\\&quot;properties\\\&quot;: {{\\\&quot;foo\\\&quot;: [\\\&quot;bar\\\&quot;, \\\&quot;baz\\\&quot;]}}}} is not well-formatted.\\n\\n{optional_additional_definitions_prompt}Here is the input schema:\\n```\\n{input_schema}\\n```\\n\\nHere is the output schema:\\n```\\n{output_schema}\\n```\\nNow output the results for the following inputs:\\n```\\n{inputs}\\n```\&quot;,\n\&quot;type\&quot;: \&quot;string\&quot;\n},\n\&quot;num_retries_on_parser_failure\&quot;: {\n\&quot;default\&quot;: 3,\n\&quot;type\&quot;: \&quot;integer\&quot;\n}\n}\n},\n\&quot;blackboard_pagi_prompt_optimizer_llm_functionModule\&quot;: {\n\&quot;properties\&quot;: {\n\&quot;LLMStructuredPrompt_query\&quot;: {\n\&quot;default\&quot;: {\n\&quot;json_dumps_kwargs\&quot;: {\n\&quot;indent\&quot;: 0\n},\n\&quot;additional_definitions_prompt_template\&quot;: \&quot;Here is the schema for additional data types:\\n```\\n{additional_definitions}\\n```\\n\\n\&quot;,\n\&quot;llm_structured_prompt_template\&quot;: \&quot;{docstring}\\n\\nThe input and output are formatted as a JSON interface that conforms to the JSON schemas below.\\n\\nAs an example, for the schema {{\\\&quot;properties\\\&quot;: {{\\\&quot;foo\\\&quot;: {{\\\&quot;description\\\&quot;: \\\&quot;a list of strings\\\&quot;, \\\&quot;type\\\&quot;: \\\&quot;array\\\&quot;, \\\&quot;items\\\&quot;: {{\\\&quot;type\\\&quot;: \\\&quot;string\\\&quot;}}}}}}, \\\&quot;required\\\&quot;: [\\\&quot;foo\\\&quot;]}}}} the object {{\\\&quot;foo\\\&quot;: [\\\&quot;bar\\\&quot;, \\\&quot;baz\\\&quot;]}} is a well-formatted instance of the schema. The object {{\\\&quot;properties\\\&quot;: {{\\\&quot;foo\\\&quot;: [\\\&quot;bar\\\&quot;, \\\&quot;baz\\\&quot;]}}}} is not well-formatted.\\n\\n{optional_additional_definitions_prompt}Here is the input schema:\\n```\\n{input_schema}\\n```\\n\\nHere is the output schema:\\n```\\n{output_schema}\\n```\\nNow output the results for the following inputs:\\n```\\n{inputs}\\n```\&quot;,\n\&quot;num_retries_on_parser_failure\&quot;: 3\n},\n\&quot;allOf\&quot;: [\n{\n\&quot;$ref\&quot;: \&quot;#/definitions/QueryHyperparameters\&quot;\n}\n]\n}\n}\n},\n\&quot;Hyperparameters\&quot;: {\n\&quot;properties\&quot;: {\n\&quot;blackboard_pagi_prompt_optimizer_llm_function\&quot;: {\n\&quot;default\&quot;: {\n\&quot;LLMStructuredPrompt_query\&quot;: {\n\&quot;json_dumps_kwargs\&quot;: {\n\&quot;indent\&quot;: 0\n},\n\&quot;additional_definitions_prompt_template\&quot;: \&quot;Here is the schema for additional data types:\\n```\\n{additional_definitions}\\n```\\n\\n\&quot;,\n\&quot;llm_structured_prompt_template\&quot;: \&quot;{docstring}\\n\\nThe input and output are formatted as a JSON interface that conforms to the JSON schemas below.\\n\\nAs an example, for the schema {{\\\&quot;properties\\\&quot;: {{\\\&quot;foo\\\&quot;: {{\\\&quot;description\\\&quot;: \\\&quot;a list of strings\\\&quot;, \\\&quot;type\\\&quot;: \\\&quot;array\\\&quot;, \\\&quot;items\\\&quot;: {{\\\&quot;type\\\&quot;: \\\&quot;string\\\&quot;}}}}}}, \\\&quot;required\\\&quot;: [\\\&quot;foo\\\&quot;]}}}} the object {{\\\&quot;foo\\\&quot;: [\\\&quot;bar\\\&quot;, \\\&quot;baz\\\&quot;]}} is a well-formatted instance of the schema. The object {{\\\&quot;properties\\\&quot;: {{\\\&quot;foo\\\&quot;: [\\\&quot;bar\\\&quot;, \\\&quot;baz\\\&quot;]}}}} is not well-formatted.\\n\\n{optional_additional_definitions_prompt}Here is the input schema:\\n```\\n{input_schema}\\n```\\n\\nHere is the output schema:\\n```\\n{output_schema}\\n```\\nNow output the results for the following inputs:\\n```\\n{inputs}\\n```\&quot;,\n\&quot;num_retries_on_parser_failure\&quot;: 3\n}\n},\n\&quot;allOf\&quot;: [\n{\n\&quot;$ref\&quot;: \&quot;#/definitions/blackboard_pagi_prompt_optimizer_llm_functionModule\&quot;\n}\n]\n}\n}\n},\n\&quot;TaskReflection\&quot;: {\n\&quot;description\&quot;: \&quot;The reflections on the task.\\n\\nThis contains the lessons we learn from each task run to come up with better hyperparameters to try.\&quot;,\n\&quot;properties\&quot;: {\n\&quot;feedback\&quot;: {\n\&quot;description\&quot;: \&quot;Only look at the final results field. Does its content satisfy the task description and task parameters? Does it contain all the relevant information from the all_chains and all_prompts fields? What could be improved in the results?\&quot;,\n\&quot;type\&quot;: \&quot;string\&quot;\n},\n\&quot;evaluation\&quot;: {\n\&quot;description\&quot;: \&quot;The evaluation of the outputs given the task. Is the output satisfying? What is wrong? What is missing?\&quot;,\n\&quot;type\&quot;: \&quot;string\&quot;\n},\n\&quot;hyperparameter_suggestion\&quot;: {\n\&quot;description\&quot;: \&quot;How we want to change the hyperparameters to improve the results. What could we try to change?\&quot;,\n\&quot;type\&quot;: \&quot;string\&quot;\n},\n\&quot;hyperparameter_missing\&quot;: {\n\&quot;description\&quot;: \&quot;What hyperparameters are missing to improve the results? What could be changed that is not exposed via hyperparameters?\&quot;,\n\&quot;type\&quot;: \&quot;string\&quot;\n}\n},\n\&quot;required\&quot;: [\n\&quot;feedback\&quot;,\n\&quot;evaluation\&quot;,\n\&quot;hyperparameter_suggestion\&quot;,\n\&quot;hyperparameter_missing\&quot;\n]\n},\n\&quot;TaskInfo_CreateEssayTopicsInputs__list_str___Hyperparameters_\&quot;: {\n\&quot;description\&quot;: \&quot;The task run and the reflection on the experiment.\&quot;,\n\&quot;properties\&quot;: {\n\&quot;task_parameters\&quot;: {\n\&quot;description\&quot;: \&quot;The task parameters.\&quot;,\n\&quot;allOf\&quot;: [\n{\n\&quot;$ref\&quot;: \&quot;#/definitions/CreateEssayTopicsInputs\&quot;\n}\n]\n},\n\&quot;hyperparameters\&quot;: {\n\&quot;description\&quot;: \&quot;The hyperparameters used for the task. We optimize these.\&quot;,\n\&quot;allOf\&quot;: [\n{\n\&quot;$ref\&quot;: \&quot;#/definitions/Hyperparameters\&quot;\n}\n]\n},\n\&quot;reflection\&quot;: {\n\&quot;description\&quot;: \&quot;The reflection on the task.\&quot;,\n\&quot;allOf\&quot;: [\n{\n\&quot;$ref\&quot;: \&quot;#/definitions/TaskReflection\&quot;\n}\n]\n}\n},\n\&quot;required\&quot;: [\n\&quot;task_parameters\&quot;,\n\&quot;hyperparameters\&quot;,\n\&quot;reflection\&quot;\n]\n},\n\&quot;OptimizationInfo_CreateEssayTopicsInputs__list_str___Hyperparameters_\&quot;: {\n\&quot;description\&quot;: \&quot;The optimization information. This is the data we use to optimize the hyperparameters.\&quot;,\n\&quot;properties\&quot;: {\n\&quot;older_task_summary\&quot;: {\n\&quot;description\&quot;: \&quot;A summary of previous experiments and the proposed changes with the goal of avoiding trying the same changes repeatedly.\&quot;,\n\&quot;type\&quot;: \&quot;string\&quot;\n},\n\&quot;task_infos\&quot;: {\n\&quot;description\&quot;: \&quot;The most recent tasks we have run and our reflections on them.\&quot;,\n\&quot;type\&quot;: \&quot;array\&quot;,\n\&quot;items\&quot;: {\n\&quot;$ref\&quot;: \&quot;#/definitions/TaskInfo_CreateEssayTopicsInputs__list_str___Hyperparameters_\&quot;\n}\n},\n\&quot;best_hyperparameters\&quot;: {\n\&quot;description\&quot;: \&quot;The best hyperparameters we have found so far.\&quot;,\n\&quot;allOf\&quot;: [\n{\n\&quot;$ref\&quot;: \&quot;#/definitions/Hyperparameters\&quot;\n}\n]\n}\n},\n\&quot;required\&quot;: [\n\&quot;task_infos\&quot;,\n\&quot;best_hyperparameters\&quot;\n]\n},\n\&quot;ImprovementProbability\&quot;: {\n\&quot;properties\&quot;: {\n\&quot;considerations\&quot;: {\n\&quot;description\&quot;: \&quot;The considerations for potential improvements.\&quot;,\n\&quot;type\&quot;: \&quot;array\&quot;,\n\&quot;items\&quot;: {\n\&quot;type\&quot;: \&quot;string\&quot;\n}\n},\n\&quot;probability\&quot;: {\n\&quot;description\&quot;: \&quot;The probability of improvement.\&quot;,\n\&quot;type\&quot;: \&quot;number\&quot;\n}\n},\n\&quot;required\&quot;: [\n\&quot;considerations\&quot;,\n\&quot;probability\&quot;\n]\n}\n}\n```\n\nHere is the input schema:\n```\n{\n\&quot;properties\&quot;: {\n\&quot;optimization_info\&quot;: {\n\&quot;$ref\&quot;: \&quot;#/definitions/OptimizationInfo_CreateEssayTopicsInputs__list_str___Hyperparameters_\&quot;\n}\n},\n\&quot;required\&quot;: [\n\&quot;optimization_info\&quot;\n]\n}\n```\n\nHere is the output schema:\n```\n{\n\&quot;properties\&quot;: {\n\&quot;return_value\&quot;: {\n\&quot;$ref\&quot;: \&quot;#/definitions/ImprovementProbability\&quot;\n}\n},\n\&quot;required\&quot;: [\n\&quot;return_value\&quot;\n]\n}\n```\nNow output the results for the following inputs:\n```\n{\n\&quot;optimization_info\&quot;: {\n\&quot;older_task_summary\&quot;: null,\n\&quot;task_infos\&quot;: [\n{\n\&quot;task_parameters\&quot;: {\n\&quot;domain\&quot;: \&quot;comedy\&quot;,\n\&quot;n\&quot;: 2\n},\n\&quot;hyperparameters\&quot;: {\n\&quot;blackboard_pagi_prompt_optimizer_llm_function\&quot;: {\n\&quot;LLMStructuredPrompt_query\&quot;: {\n\&quot;json_dumps_kwargs\&quot;: {\n\&quot;indent\&quot;: 0\n},\n\&quot;additional_definitions_prompt_template\&quot;: \&quot;Here is the schema for additional data types:\\n```\\n{additional_definitions}\\n```\\n\\n\&quot;,\n\&quot;llm_structured_prompt_template\&quot;: \&quot;{docstring}\\n\\nThe input and output are formatted as a JSON interface that conforms to the JSON schemas below.\\n\\nAs an example, for the schema {{\\\&quot;properties\\\&quot;: {{\\\&quot;foo\\\&quot;: {{\\\&quot;description\\\&quot;: \\\&quot;a list of strings\\\&quot;, \\\&quot;type\\\&quot;: \\\&quot;array\\\&quot;, \\\&quot;items\\\&quot;: {{\\\&quot;type\\\&quot;: \\\&quot;string\\\&quot;}}}}}}, \\\&quot;required\\\&quot;: [\\\&quot;foo\\\&quot;]}}}} the object {{\\\&quot;foo\\\&quot;: [\\\&quot;bar\\\&quot;, \\\&quot;baz\\\&quot;]}} is a well-formatted instance of the schema. The object {{\\\&quot;properties\\\&quot;: {{\\\&quot;foo\\\&quot;: [\\\&quot;bar\\\&quot;, \\\&quot;baz\\\&quot;]}}}} is not well-formatted.\\n\\n{optional_additional_definitions_prompt}Here is the input schema:\\n```\\n{input_schema}\\n```\\n\\nHere is the output schema:\\n```\\n{output_schema}\\n```\\nNow output the results for the following inputs:\\n```\\n{inputs}\\n```\&quot;,\n\&quot;num_retries_on_parser_failure\&quot;: 3\n}\n}\n},\n\&quot;reflection\&quot;: {\n\&quot;feedback\&quot;: \&quot;The generated essay topics are relevant to the comedy domain and satisfy the task description and task parameters. The content is appropriate and contains relevant information.\&quot;,\n\&quot;evaluation\&quot;: \&quot;The output is satisfying as it provides two essay topics related to the comedy domain. There is nothing wrong or missing in the output.\&quot;,\n\&quot;hyperparameter_suggestion\&quot;: \&quot;The current hyperparameters seem to be working well for this task. There is no immediate need to change them.\&quot;,\n\&quot;hyperparameter_missing\&quot;: \&quot;There are no missing hyperparameters that need to be added for this task, as the current hyperparameters are providing satisfactory results.\&quot;\n}\n},\n{\n\&quot;task_parameters\&quot;: {\n\&quot;domain\&quot;: \&quot;comedy\&quot;,\n\&quot;n\&quot;: 2\n},\n\&quot;hyperparameters\&quot;: {\n\&quot;blackboard_pagi_prompt_optimizer_llm_function\&quot;: {\n\&quot;LLMStructuredPrompt_query\&quot;: {\n\&quot;json_dumps_kwargs\&quot;: {\n\&quot;indent\&quot;: 0\n},\n\&quot;additional_definitions_prompt_template\&quot;: \&quot;Here is the schema for additional data types:\\n```\\n{additional_definitions}\\n```\\n\\n\&quot;,\n\&quot;llm_structured_prompt_template\&quot;: \&quot;{docstring}\\n\\nThe input and output are formatted as a JSON interface that conforms to the JSON schemas below.\\n\\nAs an example, for the schema {{\\\&quot;properties\\\&quot;: {{\\\&quot;foo\\\&quot;: {{\\\&quot;description\\\&quot;: \\\&quot;a list of strings\\\&quot;, \\\&quot;type\\\&quot;: \\\&quot;array\\\&quot;, \\\&quot;items\\\&quot;: {{\\\&quot;type\\\&quot;: \\\&quot;string\\\&quot;}}}}}}, \\\&quot;required\\\&quot;: [\\\&quot;foo\\\&quot;]}}}} the object {{\\\&quot;foo\\\&quot;: [\\\&quot;bar\\\&quot;, \\\&quot;baz\\\&quot;]}} is a well-formatted instance of the schema. The object {{\\\&quot;properties\\\&quot;: {{\\\&quot;foo\\\&quot;: [\\\&quot;bar\\\&quot;, \\\&quot;baz\\\&quot;]}}}} is not well-formatted.\\n\\n{optional_additional_definitions_prompt}Here is the input schema:\\n```\\n{input_schema}\\n```\\n\\nHere is the output schema:\\n```\\n{output_schema}\\n```\\nNow output the results for the following inputs:\\n```\\n{inputs}\\n```\&quot;,\n\&quot;num_retries_on_parser_failure\&quot;: 3\n}\n}\n},\n\&quot;reflection\&quot;: {\n\&quot;feedback\&quot;: \&quot;The generated essay topics are relevant to the comedy domain and satisfy the task description and parameters. The content is appropriate and contains relevant information.\&quot;,\n\&quot;evaluation\&quot;: \&quot;The output is satisfying as it provides two essay topics related to the comedy domain. There is nothing wrong or missing in the output.\&quot;,\n\&quot;hyperparameter_suggestion\&quot;: \&quot;The current hyperparameters seem to be working well for this task. No changes are suggested at this time.\&quot;,\n\&quot;hyperparameter_missing\&quot;: \&quot;There are no missing hyperparameters that need to be added for this task, as the current hyperparameters are providing satisfactory results.\&quot;\n}\n},\n{\n\&quot;task_parameters\&quot;: {\n\&quot;domain\&quot;: \&quot;history\&quot;,\n\&quot;n\&quot;: 2\n},\n\&quot;hyperparameters\&quot;: {\n\&quot;blackboard_pagi_prompt_optimizer_llm_function\&quot;: {\n\&quot;LLMStructuredPrompt_query\&quot;: {\n\&quot;json_dumps_kwargs\&quot;: {\n\&quot;indent\&quot;: 0\n},\n\&quot;additional_definitions_prompt_template\&quot;: \&quot;Here is the schema for additional data types:\\n```\\n{additional_definitions}\\n```\\n\\n\&quot;,\n\&quot;llm_structured_prompt_template\&quot;: \&quot;{docstring}\\n\\nThe input and output are formatted as a JSON interface that conforms to the JSON schemas below.\\n\\nAs an example, for the schema {{\\\&quot;properties\\\&quot;: {{\\\&quot;foo\\\&quot;: {{\\\&quot;description\\\&quot;: \\\&quot;a list of strings\\\&quot;, \\\&quot;type\\\&quot;: \\\&quot;array\\\&quot;, \\\&quot;items\\\&quot;: {{\\\&quot;type\\\&quot;: \\\&quot;string\\\&quot;}}}}}}, \\\&quot;required\\\&quot;: [\\\&quot;foo\\\&quot;]}}}} the object {{\\\&quot;foo\\\&quot;: [\\\&quot;bar\\\&quot;, \\\&quot;baz\\\&quot;]}} is a well-formatted instance of the schema. The object {{\\\&quot;properties\\\&quot;: {{\\\&quot;foo\\\&quot;: [\\\&quot;bar\\\&quot;, \\\&quot;baz\\\&quot;]}}}} is not well-formatted.\\n\\n{optional_additional_definitions_prompt}Here is the input schema:\\n```\\n{input_schema}\\n```\\n\\nHere is the output schema:\\n```\\n{output_schema}\\n```\\nNow output the results for the following inputs:\\n```\\n{inputs}\\n```\&quot;,\n\&quot;num_retries_on_parser_failure\&quot;: 4\n}\n}\n},\n\&quot;reflection\&quot;: {\n\&quot;feedback\&quot;: \&quot;The generated essay topics are relevant to the history domain and satisfy the task description and task parameters. The content is appropriate, and no relevant information is missing from the all_chains and all_prompts fields.\&quot;,\n\&quot;evaluation\&quot;: \&quot;The output is satisfying as it provides two essay topics related to the history domain. There is nothing wrong or missing in the output.\&quot;,\n\&quot;hyperparameter_suggestion\&quot;: \&quot;The current hyperparameters seem to be working well for this task. No changes are needed at the moment.\&quot;,\n\&quot;hyperparameter_missing\&quot;: \&quot;There are no missing hyperparameters that need to be added for this task, as the current hyperparameters are providing satisfactory results.\&quot;\n}\n},\n{\n\&quot;task_parameters\&quot;: {\n\&quot;domain\&quot;: \&quot;technology\&quot;,\n\&quot;n\&quot;: 3\n},\n\&quot;hyperparameters\&quot;: {\n\&quot;blackboard_pagi_prompt_optimizer_llm_function\&quot;: {\n\&quot;LLMStructuredPrompt_query\&quot;: {\n\&quot;json_dumps_kwargs\&quot;: {\n\&quot;indent\&quot;: 0\n},\n\&quot;additional_definitions_prompt_template\&quot;: \&quot;Here is the schema for additional data types:\\n```\\n{additional_definitions}\\n```\\n\\n\&quot;,\n\&quot;llm_structured_prompt_template\&quot;: \&quot;{docstring}\\n\\nThe input and output are formatted as a JSON interface that conforms to the JSON schemas below.\\n\\nAs an example, for the schema {{\\\&quot;properties\\\&quot;: {{\\\&quot;foo\\\&quot;: {{\\\&quot;description\\\&quot;: \\\&quot;a list of strings\\\&quot;, \\\&quot;type\\\&quot;: \\\&quot;array\\\&quot;, \\\&quot;items\\\&quot;: {{\\\&quot;type\\\&quot;: \\\&quot;string\\\&quot;}}}}}}, \\\&quot;required\\\&quot;: [\\\&quot;foo\\\&quot;]}}}} the object {{\\\&quot;foo\\\&quot;: [\\\&quot;bar\\\&quot;, \\\&quot;baz\\\&quot;]}} is a well-formatted instance of the schema. The object {{\\\&quot;properties\\\&quot;: {{\\\&quot;foo\\\&quot;: [\\\&quot;bar\\\&quot;, \\\&quot;baz\\\&quot;]}}}} is not well-formatted.\\n\\n{optional_additional_definitions_prompt}Here is the input schema:\\n```\\n{input_schema}\\n```\\n\\nHere is the output schema:\\n```\\n{output_schema}\\n```\\nNow output the results for the following inputs:\\n```\\n{inputs}\\n```\&quot;,\n\&quot;num_retries_on_parser_failure\&quot;: 4\n}\n}\n},\n\&quot;reflection\&quot;: {\n\&quot;feedback\&quot;: \&quot;The generated essay topics are relevant to the technology domain and satisfy the task description and task parameters. The content is appropriate and does not require any additional information from the all_chains and all_prompts fields.\&quot;,\n\&quot;evaluation\&quot;: \&quot;The output is satisfying as it provides three distinct essay topics related to the technology domain. There is no apparent issue or missing information.\&quot;,\n\&quot;hyperparameter_suggestion\&quot;: \&quot;The current hyperparameters seem to be working well for this task. No immediate changes are necessary.\&quot;,\n\&quot;hyperparameter_missing\&quot;: \&quot;There are no missing hyperparameters that need to be added for this task, as the current hyperparameters are producing satisfactory results.\&quot;\n}\n},\n{\n\&quot;task_parameters\&quot;: {\n\&quot;domain\&quot;: \&quot;science\&quot;,\n\&quot;n\&quot;: 2\n},\n\&quot;hyperparameters\&quot;: {\n\&quot;blackboard_pagi_prompt_optimizer_llm_function\&quot;: {\n\&quot;LLMStructuredPrompt_query\&quot;: {\n\&quot;json_dumps_kwargs\&quot;: {\n\&quot;indent\&quot;: 0\n},\n\&quot;additional_definitions_prompt_template\&quot;: \&quot;Here is the schema for additional data types:\\n```\\n{additional_definitions}\\n```\\n\\n\&quot;,\n\&quot;llm_structured_prompt_template\&quot;: \&quot;{docstring}\\n\\nThe input and output are formatted as a JSON interface that conforms to the JSON schemas below.\\n\\nAs an example, for the schema {{\\\&quot;properties\\\&quot;: {{\\\&quot;foo\\\&quot;: {{\\\&quot;description\\\&quot;: \\\&quot;a list of strings\\\&quot;, \\\&quot;type\\\&quot;: \\\&quot;array\\\&quot;, \\\&quot;items\\\&quot;: {{\\\&quot;type\\\&quot;: \\\&quot;string\\\&quot;}}}}}}, \\\&quot;required\\\&quot;: [\\\&quot;foo\\\&quot;]}}}} the object {{\\\&quot;foo\\\&quot;: [\\\&quot;bar\\\&quot;, \\\&quot;baz\\\&quot;]}} is a well-formatted instance of the schema. The object {{\\\&quot;properties\\\&quot;: {{\\\&quot;foo\\\&quot;: [\\\&quot;bar\\\&quot;, \\\&quot;baz\\\&quot;]}}}} is not well-formatted.\\n\\n{optional_additional_definitions_prompt}Here is the input schema:\\n```\\n{input_schema}\\n```\\n\\nHere is the output schema:\\n```\\n{output_schema}\\n```\\nNow output the results for the following inputs:\\n```\\n{inputs}\\n```\&quot;,\n\&quot;num_retries_on_parser_failure\&quot;: 4\n}\n}\n},\n\&quot;reflection\&quot;: {\n\&quot;feedback\&quot;: \&quot;The generated essay topics are relevant to the science domain and satisfy the task description and task parameters. The content is appropriate and does not require any information from the all_chains and all_prompts fields.\&quot;,\n\&quot;evaluation\&quot;: \&quot;The output is satisfying as it provides two essay topics related to the science domain. There is nothing wrong or missing in the output.\&quot;,\n\&quot;hyperparameter_suggestion\&quot;: \&quot;The current hyperparameters seem to be working well for this task. No changes are needed at this time.\&quot;,\n\&quot;hyperparameter_missing\&quot;: \&quot;There are no missing hyperparameters that need to be added for this task, as the current hyperparameters are producing satisfactory results.\&quot;\n}\n},\n{\n\&quot;task_parameters\&quot;: {\n\&quot;domain\&quot;: \&quot;literature\&quot;,\n\&quot;n\&quot;: 3\n},\n\&quot;hyperparameters\&quot;: {\n\&quot;blackboard_pagi_prompt_optimizer_llm_function\&quot;: {\n\&quot;LLMStructuredPrompt_query\&quot;: {\n\&quot;json_dumps_kwargs\&quot;: {\n\&quot;indent\&quot;: 0\n},\n\&quot;additional_definitions_prompt_template\&quot;: \&quot;Here is the schema for additional data types:\\n```\\n{additional_definitions}\\n```\\n\\n\&quot;,\n\&quot;llm_structured_prompt_template\&quot;: \&quot;{docstring}\\n\\nThe input and output are formatted as a JSON interface that conforms to the JSON schemas below.\\n\\nAs an example, for the schema {{\\\&quot;properties\\\&quot;: {{\\\&quot;foo\\\&quot;: {{\\\&quot;description\\\&quot;: \\\&quot;a list of strings\\\&quot;, \\\&quot;type\\\&quot;: \\\&quot;array\\\&quot;, \\\&quot;items\\\&quot;: {{\\\&quot;type\\\&quot;: \\\&quot;string\\\&quot;}}}}}}, \\\&quot;required\\\&quot;: [\\\&quot;foo\\\&quot;]}}}} the object {{\\\&quot;foo\\\&quot;: [\\\&quot;bar\\\&quot;, \\\&quot;baz\\\&quot;]}} is a well-formatted instance of the schema. The object {{\\\&quot;properties\\\&quot;: {{\\\&quot;foo\\\&quot;: [\\\&quot;bar\\\&quot;, \\\&quot;baz\\\&quot;]}}}} is not well-formatted.\\n\\n{optional_additional_definitions_prompt}Here is the input schema:\\n```\\n{input_schema}\\n```\\n\\nHere is the output schema:\\n```\\n{output_schema}\\n```\\nNow output the results for the following inputs:\\n```\\n{inputs}\\n```\&quot;,\n\&quot;num_retries_on_parser_failure\&quot;: 4\n}\n}\n},\n\&quot;reflection\&quot;: {\n\&quot;feedback\&quot;: \&quot;The generated essay topics are relevant to the domain of literature and satisfy the task description and parameters. The content is appropriate and does not require any information from the all_chains and all_prompts fields.\&quot;,\n\&quot;evaluation\&quot;: \&quot;The output is satisfying as it provides three distinct essay topics related to the literature domain. There are no apparent issues or missing information.\&quot;,\n\&quot;hyperparameter_suggestion\&quot;: \&quot;The current hyperparameters seem to be working well for this task. However, we could experiment with different values for num_retries_on_parser_failure to see if it affects the quality or variety of the generated topics.\&quot;,\n\&quot;hyperparameter_missing\&quot;: \&quot;No missing hyperparameters are identified at this time. The current hyperparameters seem sufficient for this task.\&quot;\n}\n},\n{\n\&quot;task_parameters\&quot;: {\n\&quot;domain\&quot;: \&quot;philosophy\&quot;,\n\&quot;n\&quot;: 2\n},\n\&quot;hyperparameters\&quot;: {\n\&quot;blackboard_pagi_prompt_optimizer_llm_function\&quot;: {\n\&quot;LLMStructuredPrompt_query\&quot;: {\n\&quot;json_dumps_kwargs\&quot;: {\n\&quot;indent\&quot;: 0\n},\n\&quot;additional_definitions_prompt_template\&quot;: \&quot;Here is the schema for additional data types:\\n```\\n{additional_definitions}\\n```\\n\\n\&quot;,\n\&quot;llm_structured_prompt_template\&quot;: \&quot;{docstring}\\n\\nThe input and output are formatted as a JSON interface that conforms to the JSON schemas below.\\n\\nAs an example, for the schema {{\\\&quot;properties\\\&quot;: {{\\\&quot;foo\\\&quot;: {{\\\&quot;description\\\&quot;: \\\&quot;a list of strings\\\&quot;, \\\&quot;type\\\&quot;: \\\&quot;array\\\&quot;, \\\&quot;items\\\&quot;: {{\\\&quot;type\\\&quot;: \\\&quot;string\\\&quot;}}}}}}, \\\&quot;required\\\&quot;: [\\\&quot;foo\\\&quot;]}}}} the object {{\\\&quot;foo\\\&quot;: [\\\&quot;bar\\\&quot;, \\\&quot;baz\\\&quot;]}} is a well-formatted instance of the schema. The object {{\\\&quot;properties\\\&quot;: {{\\\&quot;foo\\\&quot;: [\\\&quot;bar\\\&quot;, \\\&quot;baz\\\&quot;]}}}} is not well-formatted.\\n\\n{optional_additional_definitions_prompt}Here is the input schema:\\n```\\n{input_schema}\\n```\\n\\nHere is the output schema:\\n```\\n{output_schema}\\n```\\nNow output the results for the following inputs:\\n```\\n{inputs}\\n```\&quot;,\n\&quot;num_retries_on_parser_failure\&quot;: 4\n}\n}\n},\n\&quot;reflection\&quot;: {\n\&quot;feedback\&quot;: \&quot;The content of the final results satisfies the task description and task parameters. The generated essay topics are relevant to the domain of philosophy and the number of topics generated is as requested. The information in the all_chains and all_prompts fields is not relevant for this task as there are no chat chains.\&quot;,\n\&quot;evaluation\&quot;: \&quot;The output is satisfying as it meets the requirements of the task. The generated essay topics are relevant and interesting.\&quot;,\n\&quot;hyperparameter_suggestion\&quot;: \&quot;The current hyperparameters seem to be working well for this task. No changes are suggested at this time.\&quot;,\n\&quot;hyperparameter_missing\&quot;: \&quot;There are no missing hyperparameters that need to be added for this task. The current hyperparameters are sufficient for generating essay topics.\&quot;\n}\n}\n],\n\&quot;best_hyperparameters\&quot;: {\n\&quot;blackboard_pagi_prompt_optimizer_llm_function\&quot;: {\n\&quot;LLMStructuredPrompt_query\&quot;: {\n\&quot;json_dumps_kwargs\&quot;: {\n\&quot;indent\&quot;: 0\n},\n\&quot;additional_definitions_prompt_template\&quot;: \&quot;Here is the schema for additional data types:\\n```\\n{additional_definitions}\\n```\\n\\n\&quot;,\n\&quot;llm_structured_prompt_template\&quot;: \&quot;{docstring}\\n\\nThe input and output are formatted as a JSON interface that conforms to the JSON schemas below.\\n\\nAs an example, for the schema {{\\\&quot;properties\\\&quot;: {{\\\&quot;foo\\\&quot;: {{\\\&quot;description\\\&quot;: \\\&quot;a list of strings\\\&quot;, \\\&quot;type\\\&quot;: \\\&quot;array\\\&quot;, \\\&quot;items\\\&quot;: {{\\\&quot;type\\\&quot;: \\\&quot;string\\\&quot;}}}}}}, \\\&quot;required\\\&quot;: [\\\&quot;foo\\\&quot;]}}}} the object {{\\\&quot;foo\\\&quot;: [\\\&quot;bar\\\&quot;, \\\&quot;baz\\\&quot;]}} is a well-formatted instance of the schema. The object {{\\\&quot;properties\\\&quot;: {{\\\&quot;foo\\\&quot;: [\\\&quot;bar\\\&quot;, \\\&quot;baz\\\&quot;]}}}} is not well-formatted.\\n\\n{optional_additional_definitions_prompt}Here is the input schema:\\n```\\n{input_schema}\\n```\\n\\nHere is the output schema:\\n```\\n{output_schema}\\n```\\nNow output the results for the following inputs:\\n```\\n{inputs}\\n```\&quot;,\n\&quot;num_retries_on_parser_failure\&quot;: 3\n}\n}\n}\n}\n}\n```&quot;, &quot;additional_kwargs&quot;: {}}]}, &quot;result&quot;: {&quot;content&quot;: &quot;{\n  \&quot;return_value\&quot;: {\n    \&quot;considerations\&quot;: [\n      \&quot;The current hyperparameters have consistently produced satisfactory results across different domains.\&quot;,\n      \&quot;There is no apparent issue or missing information in the generated essay topics.\&quot;,\n      \&quot;The only suggested change was to experiment with different values for num_retries_on_parser_failure, but it is not clear if this would lead to significant improvements.\&quot;\n    ],\n    \&quot;probability\&quot;: 0.2\n  }\n}&quot;, &quot;additional_kwargs&quot;: {}}}, &quot;children&quot;: []}" id="55" width="96.40287724430566%" x="0.0052220006297890205%" y="1.8em"><defs /><rect data-id="55" fill="#268bd2" height="1.7em" id="55_box" onclick="handleClick(evt)" rx="2" ry="2" width="99.5%" x="2px" y="0" /><text clip-path="url(#55_clip)" fill="black" font-family="Arial" font-size="1em" pointer-events="none" x="4px" y="1.35em">TrackedChatModel</text></svg></svg></svg></svg></symbol><clipPath id="1_clip"><rect fill="white" height="1.7em" width="99.5%" x="4px" y="0" /></clipPath><clipPath id="2_clip"><rect fill="white" height="1.7em" width="99.5%" x="4px" y="0" /></clipPath><clipPath id="3_clip"><rect fill="white" height="1.7em" width="99.5%" x="4px" y="0" /></clipPath><clipPath id="4_clip"><rect fill="white" height="1.7em" width="99.5%" x="4px" y="0" /></clipPath><clipPath id="5_clip"><rect fill="white" height="1.7em" width="99.5%" x="4px" y="0" /></clipPath><clipPath id="6_clip"><rect fill="white" height="1.7em" width="99.5%" x="4px" y="0" /></clipPath><clipPath id="7_clip"><rect fill="white" height="1.7em" width="99.5%" x="4px" y="0" /></clipPath><clipPath id="8_clip"><rect fill="white" height="1.7em" width="99.5%" x="4px" y="0" /></clipPath><clipPath id="9_clip"><rect fill="white" height="1.7em" width="99.5%" x="4px" y="0" /></clipPath><clipPath id="10_clip"><rect fill="white" height="1.7em" width="99.5%" x="4px" y="0" /></clipPath><clipPath id="11_clip"><rect fill="white" height="1.7em" width="99.5%" x="4px" y="0" /></clipPath><clipPath id="12_clip"><rect fill="white" height="1.7em" width="99.5%" x="4px" y="0" /></clipPath><clipPath id="13_clip"><rect fill="white" height="1.7em" width="99.5%" x="4px" y="0" /></clipPath><clipPath id="14_clip"><rect fill="white" height="1.7em" width="99.5%" x="4px" y="0" /></clipPath><clipPath id="15_clip"><rect fill="white" height="1.7em" width="99.5%" x="4px" y="0" /></clipPath><clipPath id="16_clip"><rect fill="white" height="1.7em" width="99.5%" x="4px" y="0" /></clipPath><clipPath id="17_clip"><rect fill="white" height="1.7em" width="99.5%" x="4px" y="0" /></clipPath><clipPath id="18_clip"><rect fill="white" height="1.7em" width="99.5%" x="4px" y="0" /></clipPath><clipPath id="19_clip"><rect fill="white" height="1.7em" width="99.5%" x="4px" y="0" /></clipPath><clipPath id="20_clip"><rect fill="white" height="1.7em" width="99.5%" x="4px" y="0" /></clipPath><clipPath id="21_clip"><rect fill="white" height="1.7em" width="99.5%" x="4px" y="0" /></clipPath><clipPath id="22_clip"><rect fill="white" height="1.7em" width="99.5%" x="4px" y="0" /></clipPath><clipPath id="23_clip"><rect fill="white" height="1.7em" width="99.5%" x="4px" y="0" /></clipPath><clipPath id="24_clip"><rect fill="white" height="1.7em" width="99.5%" x="4px" y="0" /></clipPath><clipPath id="25_clip"><rect fill="white" height="1.7em" width="99.5%" x="4px" y="0" /></clipPath><clipPath id="26_clip"><rect fill="white" height="1.7em" width="99.5%" x="4px" y="0" /></clipPath><clipPath id="27_clip"><rect fill="white" height="1.7em" width="99.5%" x="4px" y="0" /></clipPath><clipPath id="28_clip"><rect fill="white" height="1.7em" width="99.5%" x="4px" y="0" /></clipPath><clipPath id="29_clip"><rect fill="white" height="1.7em" width="99.5%" x="4px" y="0" /></clipPath><clipPath id="30_clip"><rect fill="white" height="1.7em" width="99.5%" x="4px" y="0" /></clipPath><clipPath id="31_clip"><rect fill="white" height="1.7em" width="99.5%" x="4px" y="0" /></clipPath><clipPath id="32_clip"><rect fill="white" height="1.7em" width="99.5%" x="4px" y="0" /></clipPath><clipPath id="33_clip"><rect fill="white" height="1.7em" width="99.5%" x="4px" y="0" /></clipPath><clipPath id="34_clip"><rect fill="white" height="1.7em" width="99.5%" x="4px" y="0" /></clipPath><clipPath id="35_clip"><rect fill="white" height="1.7em" width="99.5%" x="4px" y="0" /></clipPath><clipPath id="36_clip"><rect fill="white" height="1.7em" width="99.5%" x="4px" y="0" /></clipPath><clipPath id="37_clip"><rect fill="white" height="1.7em" width="99.5%" x="4px" y="0" /></clipPath><clipPath id="38_clip"><rect fill="white" height="1.7em" width="99.5%" x="4px" y="0" /></clipPath><clipPath id="39_clip"><rect fill="white" height="1.7em" width="99.5%" x="4px" y="0" /></clipPath><clipPath id="40_clip"><rect fill="white" height="1.7em" width="99.5%" x="4px" y="0" /></clipPath><clipPath id="41_clip"><rect fill="white" height="1.7em" width="99.5%" x="4px" y="0" /></clipPath><clipPath id="42_clip"><rect fill="white" height="1.7em" width="99.5%" x="4px" y="0" /></clipPath><clipPath id="43_clip"><rect fill="white" height="1.7em" width="99.5%" x="4px" y="0" /></clipPath><clipPath id="44_clip"><rect fill="white" height="1.7em" width="99.5%" x="4px" y="0" /></clipPath><clipPath id="45_clip"><rect fill="white" height="1.7em" width="99.5%" x="4px" y="0" /></clipPath><clipPath id="46_clip"><rect fill="white" height="1.7em" width="99.5%" x="4px" y="0" /></clipPath><clipPath id="47_clip"><rect fill="white" height="1.7em" width="99.5%" x="4px" y="0" /></clipPath><clipPath id="48_clip"><rect fill="white" height="1.7em" width="99.5%" x="4px" y="0" /></clipPath><clipPath id="49_clip"><rect fill="white" height="1.7em" width="99.5%" x="4px" y="0" /></clipPath><clipPath id="50_clip"><rect fill="white" height="1.7em" width="99.5%" x="4px" y="0" /></clipPath><clipPath id="51_clip"><rect fill="white" height="1.7em" width="99.5%" x="4px" y="0" /></clipPath><clipPath id="52_clip"><rect fill="white" height="1.7em" width="99.5%" x="4px" y="0" /></clipPath><clipPath id="53_clip"><rect fill="white" height="1.7em" width="99.5%" x="4px" y="0" /></clipPath><clipPath id="54_clip"><rect fill="white" height="1.7em" width="99.5%" x="4px" y="0" /></clipPath><clipPath id="55_clip"><rect fill="white" height="1.7em" width="99.5%" x="4px" y="0" /></clipPath></defs><script type="application/ecmascript"><![CDATA[// Copyright © 2013-2017 David Caldwell <david@porkrind.org>
//
// Permission to use, copy, modify, and/or distribute this software for any
// purpose with or without fee is hereby granted, provided that the above
// copyright notice and this permission notice appear in all copies.
//
// THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES
// WITH REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF
// MERCHANTABILITY AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY
// SPECIAL, DIRECT, INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES
// WHATSOEVER RESULTING FROM LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION
// OF CONTRACT, NEGLIGENCE OR OTHER TORTIOUS ACTION, ARISING OUT OF OR IN
// CONNECTION WITH THE USE OR PERFORMANCE OF THIS SOFTWARE.

// Usage
// -----
// The module exports one entry point, the `renderjson()` function. It takes in
// the JSON you want to render as a single argument and returns an HTML
// element.
//
// Options
// -------
// renderjson.set_icons("+", "-")
//   This Allows you to override the disclosure icons.
//
// renderjson.set_show_to_level(level)
//   Pass the number of levels to expand when rendering. The default is 0, which
//   starts with everything collapsed. As a special case, if level is the string
//   "all" then it will start with everything expanded.
//
// renderjson.set_max_string_length(length)
//   Strings will be truncated and made expandable if they are longer than
//   `length`. As a special case, if `length` is the string "none" then
//   there will be no truncation. The default is "none".
//
// renderjson.set_sort_objects(sort_bool)
//   Sort objects by key (default: false)
//
// renderjson.set_replacer(replacer_function)
//   Equivalent of JSON.stringify() `replacer` argument when it's a function
//
// renderjson.set_collapse_msg(collapse_function)
//   Accepts a function (len:number):string => {} where len is the length of the
//   object collapsed.  Function should return the message displayed when a
//   object is collapsed.  The default message is "X items"
//
// renderjson.set_property_list(property_list)
//   Equivalent of JSON.stringify() `replacer` argument when it's an array
//
// Theming
// -------
// The HTML output uses a number of classes so that you can theme it the way
// you'd like:
//     .disclosure    ("⊕", "⊖")
//     .syntax        (",", ":", "{", "}", "[", "]")
//     .string        (includes quotes)
//     .number
//     .boolean
//     .key           (object key)
//     .keyword       ("null", "undefined")
//     .object.syntax ("{", "}")
//     .array.syntax  ("[", "]")

var module, window, define, renderjson = (function() {
  var themetext = function( /* [class, text]+ */ ) {
    /* The arguments are alternating class names and text strings.
     *
     * This function creates a span using the class name and adds the text for each argument pair. It returns the array.
     */
    var spans = [];
    while (arguments.length)
      spans.push(append(span(Array.prototype.shift.call(
          arguments)),
        text(Array.prototype.shift.call(arguments))));
    return spans;
  };

  var append = function( /* el, ... */ ) {
    /* append all arguments to the first one and return the first el. */
    // Flattens arrays.
    var el = Array.prototype.shift.call(arguments);
    for (var a = 0; a < arguments.length; a++)
      if (arguments[a].constructor == Array)
        append.apply(this, [el].concat(arguments[a]));
      else
        el.appendChild(arguments[a]);
    return el;
  };

  var prepend = function(el, child) {
    /* prepend child to el's children */
    el.insertBefore(child, el.firstChild);
    return el;
  }

  var isempty = function(obj, pl) {
    var keys = pl || Object.keys(obj);
    for (var i in keys)
      if (Object.hasOwnProperty.call(obj, keys[i]))
        return false;
    return true;
  }

  var text = function(txt) {
    return document.createTextNode(txt)
  };

  var div = function() {
    return document.createElementNS(
      "http://www.w3.org/1999/xhtml", "div")
  };

  var pre = function(classname) {
    var s = document.createElementNS(
      "http://www.w3.org/1999/xhtml", "pre")
    if (classname) s.className = classname;
    return s;
  };

  var span = function(classname) {
    var s = document.createElementNS(
      "http://www.w3.org/1999/xhtml", "span");
    if (classname) s.className = classname;
    return s;
  };

  var A = function A(txt, classname, callback) {
    var a = document.createElementNS(
      "http://www.w3.org/1999/xhtml", "a");
    if (classname) a.className = classname;
    a.appendChild(text(txt));
    a.href = '#';
    a.onclick = function(e) {
      callback();
      if (e) e.stopPropagation();
      return false;
    };
    return a;
  };

  function _renderjson(json, indent, dont_indent, show_level,
    options) {
    var my_indent = dont_indent ? "" : indent;

    var disclosure = function(open, placeholder, close, type,
      builder) {
      var content;
      var empty = span(type);
      var show = function() {
        if (!content) {
          append(
            empty.parentNode,
            content = prepend(builder(),
              A(
                options.hide, "disclosure",
                function() {
                  content.style.display =
                    "none";
                  empty.style.display =
                    "inline";
                })
            )
          );
        }
        content.style.display = "inline";
        empty.style.display = "none";
      };
      append(empty,
        A(options.show, "disclosure", show),
        themetext(type + " syntax", open),
        A(placeholder, null, show),
        themetext(type + " syntax", close));

      var el = append(span(), text(my_indent.slice(0, -1)),
        empty);
      if (show_level > 0 && type != "string")
        show();
      return el;
    };

    if (json === null) return themetext(null, my_indent, "keyword",
      "null");
    if (json === void 0) return themetext(null, my_indent,
      "keyword", "undefined");

    if (typeof(json) == "string" && json.length > options
      .max_string_length)
      return disclosure('"', json.substr(0, options
          .max_string_length) + " ...", '"', "string",
        function() {
          return append(span("string"), themetext(null,
            my_indent, "string", JSON.stringify(
              json)));
        });

    // Strings: wrap in a <pre>
    if (json.constructor == String) {
        let pre_text = pre(null);
        pre_text.innerHTML = json;
        pre_text.style.whiteSpace = "pre-wrap";
        pre_text.style.display ="inline-flex";
        pre_text.style.overflow = "auto";
        pre_text.style.maxHeight = "400px";
        // add borders for overflow
        pre_text.style.border = "1px solid #ccc";
        // scrollbar-gutter: stable;
        pre_text.style.scrollbarGutter = "stable";
        pre_text.style.margin = "0";

        let as = [
            append(span(null), text(my_indent)),
            append(span("string"), text("\""), pre_text, text("\""))
        ];
        return as;
    }

    // Numbers and bools
    if (typeof(json) != "object" || [Number, Boolean, Date]
      .indexOf(json.constructor) >= 0)
      return themetext(null, my_indent, typeof(json), JSON
        .stringify(json));

    if (json.constructor == Array) {
      if (json.length == 0) return themetext(null, my_indent,
        "array syntax", "[]");

      return disclosure("[", options.collapse_msg(json.length),
        "]", "array",
        function() {
          var as = append(span("array"), themetext(
            "array syntax", "[", null, "\n"));
          for (var i = 0; i < json.length; i++)
            append(as,
              _renderjson(options.replacer.call(json,
                  i, json[i]), indent + "    ",
                false, show_level - 1, options),
              i != json.length - 1 ? themetext(
                "syntax", ",") : [],
              text("\n"));
          append(as, themetext(null, indent,
            "array syntax", "]"));
          return as;
        });
    }

    // object
    if (isempty(json, options.property_list))
      return themetext(null, my_indent, "object syntax", "{}");

    return disclosure("{", options.collapse_msg(Object.keys(json)
      .length), "}", "object", function() {
      var os = append(span("object"), themetext(
        "object syntax", "{", null, "\n"));
      for (var k in json) var last = k;
      var keys = options.property_list || Object.keys(
        json);
      if (options.sort_objects)
        keys = keys.sort();
      for (var i in keys) {
        var k = keys[i];
        if (!(k in json)) continue;
        append(os, themetext(null, indent + "    ",
            "key", '"' + k + '"',
            "object syntax", ': '),
          _renderjson(options.replacer.call(json,
              k, json[k]), indent + "    ",
            true, show_level - 1, options),
          k != last ? themetext("syntax", ",") : [],
          text("\n"));
      }
      append(os, themetext(null, indent, "object syntax",
        "}"));
      return os;
    });
  }

  var renderjson = function renderjson(json) {
    var options = new Object(renderjson.options);
    options.replacer = typeof(options.replacer) == "function" ?
      options.replacer : function(k, v) {
        return v;
      };
    var pre = append(document.createElementNS(
        "http://www.w3.org/1999/xhtml", "pre"),
      _renderjson(json, "", false, options.show_to_level,
        options));
    pre.className = "renderjson";
    return pre;
  }
  renderjson.set_icons = function(show, hide) {
    renderjson.options.show = show;
    renderjson.options.hide = hide;
    return renderjson;
  };
  renderjson.set_show_to_level = function(level) {
    renderjson.options.show_to_level = typeof level ==
      "string" &&
      level.toLowerCase() === "all" ? Number.MAX_VALUE :
      level;
    return renderjson;
  };
  renderjson.set_max_string_length = function(length) {
    renderjson.options.max_string_length = typeof length ==
      "string" &&
      length.toLowerCase() === "none" ? Number.MAX_VALUE :
      length;
    return renderjson;
  };
  renderjson.set_sort_objects = function(sort_bool) {
    renderjson.options.sort_objects = sort_bool;
    return renderjson;
  };
  renderjson.set_replacer = function(replacer) {
    renderjson.options.replacer = replacer;
    return renderjson;
  };
  renderjson.set_collapse_msg = function(collapse_msg) {
    renderjson.options.collapse_msg = collapse_msg;
    return renderjson;
  };
  renderjson.set_property_list = function(prop_list) {
    renderjson.options.property_list = prop_list;
    return renderjson;
  };
  // Backwards compatiblity. Use set_show_to_level() for new code.
  renderjson.set_show_by_default = function(show) {
    renderjson.options.show_to_level = show ? Number.MAX_VALUE :
      0;
    return renderjson;
  };
  renderjson.options = {};
  renderjson.set_icons('⊕', '⊖');
  renderjson.set_show_by_default(false);
  renderjson.set_sort_objects(false);
  renderjson.set_max_string_length("none");
  renderjson.set_replacer(void 0);
  renderjson.set_property_list(void 0);
  renderjson.set_collapse_msg(function(len) {
    return len + " item" + (len == 1 ? "" : "s")
  })
  return renderjson;
})();

if (define) define({
  renderjson: renderjson
})
else(module || {}).exports = (window || {}).renderjson = renderjson;]]></script><script type="application/ecmascript"><![CDATA[
                function handleClick(evt) {
                    // implement the zooming functionality and display the rectangle's properties.
                    let target = evt.target;
                    // get the parent of the target
                    let parent = target.parentNode;
                    // get x of parent
                    let left = parent.x.baseVal.value;
                    // get y of parent
                    let top = parent.y.baseVal.value;
                    // set the view_zoom's href to this id
                    let zoom_view = document.getElementById("zoom_view")
                    // if zoom_view is already set to the parent.id, reset to the full_view
                    if (zoom_view.getAttribute("href") == "#" + parent.id) {
                        zoom_view.setAttribute("href", "#full_view");
                        zoom_view.setAttribute("x", 0);
                        zoom_view.setAttribute("y", 0);
                        resetDetails();
                    } else {
                        zoom_view.setAttribute("href", "#" + parent.id);
                        // set the view_zoom's x and y to the negative x and y of the bounding box
                        zoom_view.setAttribute("x", -left);
                        zoom_view.setAttribute("y", -top);
                        updateDetails(parent);
                    }
                }
                ]]></script><use height="200" id="zoom_view" width="100%" x="0" xlink:href="#full_view" y="0" /><foreignObject height="560" width="100%" x="0" y="200"><html:html style="height: 100%;">
<html:body style="height: 100%; margin: 0px; padding: 2px;">
<html:div style="height: 100%; display: flex; flex-direction: column; background-color: #eee8d5;">
    <html:style>
        // Solarized Light Color Scheme (Different Colors for Different Types)
        .renderjson a              { text-decoration: none; }
        .renderjson .syntax        { color: #657b83; }
        .renderjson .string        { color: #2aa198; }
        .renderjson .number        { color: #d33682; }
        .renderjson .boolean       { color: #6c71c4; }
        .renderjson .key           { color: #268bd2; }
        .renderjson .keyword       { color: #859900; }
        .renderjson .object.syntax { color: #b58900; }
        .renderjson .array.syntax  { color: #cb4b16; }
        .renderjson .disclosure    { color: #b58900;
                                     font-size: 150%; }
        .renderjson .syntax.collapsed .disclosure { color: #cb4b16; }
        .renderjson .disclosure:hover    { color: #dc322f; }
        .renderjson .syntax.collapsed .disclosure:hover { color: #d33682; }
        // background for the div
        div {
            color: #657b83;
            font-family: monospace;
            font-size: 14px;
            overflow: auto;
        }
    </html:style>
    <html:strong>Click on a node to zoom in and see more details. Click on the zoomed in node to zoom out.</html:strong>
    <html:h2>Scope Details</html:h2>
    <html:div id="details" style="overflow: auto; font-family: monospace;">
        <html:table style="border: 1px none black; border-collapse: collapse; width: 100%;">
            <html:tr style="border: 1px none black; border-collapse: collapse;">
                <html:th style="border: 1px none black; border-collapse: collapse; text-align: left; width: 30ex;">
                    Property
                </html:th>
                <html:th style="border: 1px none black; border-collapse: collapse; text-align: left;" />
            </html:tr>
            <html:tr style="border: 1px none black; border-collapse: collapse;">
                <html:td style="border: 1px none black; border-collapse: collapse; text-align: left; width: 30ex;">Name</html:td>
                <html:td id="details-name" style="border: 1px none black; border-collapse: collapse; text-align: left;" />
            </html:tr>
            <html:tr style="border: 1px none black; border-collapse: collapse;">
                <html:td style="border: 1px none black; border-collapse: collapse; text-align: left; width: 30ex;">
                Kind</html:td>
                <html:td id="details-kind" style="border: 1px none black; border-collapse: collapse; text-align: left;" />
            </html:tr>
            <html:tr style="border: 1px none black; border-collapse: collapse;">
                <html:td style="border: 1px none black; border-collapse: collapse; text-align: left; width: 30ex;">
                Duration</html:td>
                <html:td id="details-duration" style="border: 1px none black; border-collapse: collapse; text-align: left;" />
            </html:tr>
            <html:tr style="border: 1px none black; border-collapse: collapse;">
                <html:td style="border: 1px none black; border-collapse: collapse; text-align: left; vertical-align: top;                     width: 30ex;">Exception</html:td>
                <html:td id="details-exception" style="border: 1px none black; border-collapse: collapse; text-align: left; width: calc(100%-30ex);">
                </html:td>
            </html:tr>
            <html:tr style="border: 1px none black; border-collapse: collapse;">
                <html:td style="border: 1px none black; border-collapse: collapse; text-align: left; vertical-align: top;                     width: 30ex;">Result</html:td>
                <html:td id="details-result" style="border: 1px none black; border-collapse: collapse; text-align: left; width: calc(100%-30ex);">
                </html:td>
            </html:tr>
            <html:tr style="border: 1px none black; border-collapse: collapse;">
                <html:td style="border: 1px none black; border-collapse: collapse; text-align: left; vertical-align: top;                     width: 30ex;">Arguments</html:td>
                <html:td id="details-arguments" style="border: 1px none black; border-collapse: collapse; text-align: left; width: calc(100%-30ex);">
                </html:td>
            </html:tr>
            <html:tr style="border: 1px none black; border-collapse: collapse;">
                <html:td style="border: 1px none black; border-collapse: collapse; text-align: left; vertical-align: top;                     width: 30ex;">Self</html:td>
                <html:td id="details-self" style="border: 1px none black; border-collapse: collapse; text-align: left; width: calc(100%-30ex);">
                </html:td>
            </html:tr>
            <html:tr style="border: 1px none black; border-collapse: collapse;">
                <html:td style="border: 1px none black; border-collapse: collapse; text-align: left; vertical-align: top;                     width: 30ex;">Properties</html:td>
                <html:td id="details-properties" style="border: 1px none black; border-collapse: collapse; text-align: left; width: calc(100%-30ex);">
                </html:td>
            </html:tr>
        </html:table>
    </html:div>
</html:div>
</html:body></html:html></foreignObject><script type="application/ecmascript"><![CDATA[
        function updateDetails(target) {
            let trace_info = JSON.parse(target.dataset.raw);
            let details_name = document.getElementById("details-name");
            let details_kind = document.getElementById("details-kind");
            let details_duration = document.getElementById("details-duration");
            let details_exception = document.getElementById("details-exception");
            let details_result = document.getElementById("details-result");
            let details_arguments = document.getElementById("details-arguments");
            let details_self = document.getElementById("details-self");
            let details_properties = document.getElementById("details-properties");

            var node_name = trace_info.name || "/Unnamed/";
            // add an asterisk if the node is currently running (.running is True)
            if (trace_info.running) {
                node_name += " (*)";
            }
            details_name.innerText = node_name;

            // set kind
            details_kind.innerText = trace_info.kind;

            // set duration
            details_duration.innerText = ((trace_info.end_time_ms - trace_info.start_time_ms) / 1000).toFixed(2) + " s";

            function renderjson_to(node, json) {
                node.innerHTML = "";
                rendered_json = renderjson.set_icons('+', '-').set_show_to_level("all")(json)
                rendered_json.style.whiteSpace = "pre-wrap";
                rendered_json.style.wordWrap = "break-word";
                rendered_json.style.overflow = "auto";
                rendered_json.style.display = "inline-block";
                rendered_json.style.margin = "0";
                node.appendChild(rendered_json);
            }

            // set exception
            let exception = trace_info.properties.exception || "";
            renderjson_to(details_exception, exception);

            // set result
            let result = trace_info.properties.result || "";
            renderjson_to(details_result, result);

            // set arguments
            let arguments = trace_info.properties.arguments || {};
            renderjson_to(details_arguments, arguments);

            // set self
            let self = trace_info.properties.self || {};
            renderjson_to(details_self, self);

            // set properties
            // remove exception, result, arguments, self
            delete trace_info.properties.exception;
            delete trace_info.properties.result;
            delete trace_info.properties.arguments;
            delete trace_info.properties.self;
            let properties = trace_info.properties || {};
            renderjson_to(details_properties, properties);
        }

        function resetDetails() {
            let details_name = document.getElementById("details-name");
            let details_kind = document.getElementById("details-kind");
            let details_duration = document.getElementById("details-duration");
            let details_exception = document.getElementById("details-exception");
            let details_result = document.getElementById("details-result");
            let details_arguments = document.getElementById("details-arguments");
            let details_self = document.getElementById("details-self");
            let details_properties = document.getElementById("details-properties");

            details_name.innerText = "";
            details_kind.innerText = "";
            details_duration.innerText = "";
            details_exception.innerHTML = "";
            details_result.innerHTML = "";
            details_arguments.innerHTML = "";
            details_self.innerHTML = "";
            details_properties.innerHTML = "";
        }
        ]]></script></svg>
